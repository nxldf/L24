Array.prototype.indexOf || (Array.prototype.indexOf = function (a, b) { void 0 === b && (b = 0), 0 > b && (b += this.length), 0 > b && (b = 0); for (var c = this.length; c > b; b++) if (this[b] === a) return b; return -1 }); var raf = window.requestAnimationFrame || function (a) { a() }, body, Saatchi = function () { return { init: function () { Saatchi.Search.init(), body = document.querySelector("body") }, LockScroll: { lock: function () { raf(function () { body.classList.add("body--lock-scroll") }) }, unlock: function () { raf(function () { body.classList.remove("body--lock-scroll") }) } }, logout: function (a) { }, Cookie: { domain: ".saatchiart.com", create: function (a, b, c) { var d, e = null; 2 === arguments.length && (c = 100), c ? (d = new Date, d.setTime(d.getTime() + 24 * c * 60 * 60 * 1e3), e = "; expires=" + d.toGMTString()) : e = "", document.cookie = a + "=" + b + e + "; path=/; domain=" + Saatchi.Cookie.domain }, read: function (a) { var b = a + "=", c = document.cookie.split(";"), d = 0, e = null; for (d = 0; d < c.length; d++) { for (e = c[d]; " " === e.charAt(0) ;) e = e.substring(1, e.length); if (0 === e.indexOf(b)) return e.substring(b.length, e.length) } return null }, erase: function (a) { this.create(a, "", -1) } }, Loader: { scripts: [], styles: [], listeners: [], version: null, cdn: null, minified: !1, load: function (a, b, c) { b || (b = {}, b.css = !0, b.js = !0), c || (c = function () { }), b.js && this.scripts.push({ name: a, callback: c }), b.css && this.styles.push({ name: a }) }, listen: function (a) { this.listeners.push(a) }, reset: function () { Saatchi.Loader.scripts = [], Saatchi.Loader.styles = [], Saatchi.Loader.listeners = [] }, getCDNPrefix: function () { return Saatchi.Loader.cdn && "" != Saatchi.Loader.cdn && null != Saatchi.Loader.cdn ? Saatchi.Loader.cdn : "" }, performLoad: function (a) { var b = 0, c = Saatchi.Loader, d = [], e = [], f = [], g = []; for (b = 0; b < c.styles.length; b++) d.push(c.styles[b].name); for (d.length && (d = d.join(","), c.version && (d += "?v=" + c.version), $("head").append('<link rel="stylesheet" href="' + c.getCDNPrefix() + "/assets/css/post," + d + '" type="text/css" />')), b = 0; b < c.scripts.length; b++) -1 === e.indexOf(c.scripts[b].name) && e.push(c.scripts[b].name), f.push(c.scripts[b].callback); for (b = 0; b < c.listeners.length; b++) f.push(c.listeners[b]); "function" == typeof a && f.push(a), e.length && (e = e.join(","), c.minified && (e += ",min"), c.version && (e += "?v=" + c.version), g = $.extend(g || {}, { dataType: "script", cache: !0, url: c.getCDNPrefix() + "/assets/js/post," + e, complete: function () { for (var a = 0; a < f.length; a++) f[a]() } }), $.ajax(g)); var h = $("#so-status-msg"); if (h) { setTimeout("Saatchi.Status.hide()", 4e3) } Saatchi.Loader.reset() } }, Status: { hide: function () { var a = $("#so-status-msg"); a && a.remove() } }, toString: function () { return "Saatchi" }, Facebook: { requiredPermissions: null, login: function (a, b) { ("undefined" == typeof b || null == b) && (b = ""), window.location = "/accounts/check-facebook-connect?url=" + b }, fblogin: function (a, b) { FB.getLoginStatus(function (c) { "connected" == c.status ? "function" != typeof b ? Saatchi.Facebook.login("112537152116651", a) : b() : ("function" != typeof b && (b = function (b) { "connected" == b.status && Saatchi.Facebook.login("112537152116651", a) }), FB.login(b, { scope: Saatchi.Facebook.requiredPermissions })) }) }, toString: function () { return "Saatchi.Facebook" }, publishStream: function (a, b, c, d, e, f, g) { var h = "http://" + document.location.hostname, i = $(window).scrollTop(); FB.ui({ method: "stream.publish", message: "", attachment: { name: b, caption: c, description: d, media: [{ type: "image", src: e, href: f }], href: f }, action_links: [{ text: g, href: h }], user_message_prompt: a }, function (a) { Saatch.GoogleTracking.trackEvent("facebook", "share", f), a && a.post_id ? $(".fb_dialog").hide() : $(".fb_dialog").hide() }); var j = $(".fb_dialog"); return $.each(j, function () { $(this).removeAttr("style"), 0 == $(this).children("div").hasClass("fb_dialog_iframe") ? $(this).css({ top: "-10000px", display: "none" }) : (-1 == navigator.userAgent.indexOf("Firefox") && $(this).css({ top: "29%", left: "27%" }), dialog = $(this)) }), $(".fbProfileBrowserResult").ready(function () { t = setTimeout('Saatchi.Facebook.fbMove("29%", dialog)', 2e3) }), $(window).scrollTop(i), !1 }, publish: function (a, b, c, d, e, f, g) { var h = ("http://" + document.location.hostname, $(window).scrollTop()); FB.ui({ method: "stream.publish", name: b, link: f, picture: e, caption: c, description: d }, function (a) { a && a.post_id ? $(".fb_dialog").hide() : $(".fb_dialog").hide() }); var i = $(".fb_dialog"); return $.each(i, function () { $(this).removeAttr("style"), 0 == $(this).children("div").hasClass("fb_dialog_iframe") ? $(this).css({ top: "-10000px", display: "none" }) : (-1 == navigator.userAgent.indexOf("Firefox") && $(this).css({ top: "29%", left: "27%" }), dialog = $(this)) }), $(".fbProfileBrowserResult").ready(function () { t = setTimeout('Saatchi.Facebook.fbMove("29%", dialog)', 2e3) }), $(window).scrollTop(h), !1 }, fbMove: function (a, b) { b.css("top") != a ? b.css({ top: a }) : setTimeout('Saatchi.Facebook.fbMove("' + a + '", dialog)', 2e3) } }, GoogleTracking: { pushDeferredTrackingItems: function () { }, trackEvent: function (a, b, c, d, e, f) { "function" == typeof c && (f = c, c = null), "function" == typeof d && (f = d, d = null), "function" == typeof e && (f = e, e = null), dataLayer.push({ eventCategory: a, eventAction: b }), "undefined" != typeof c && null != c && dataLayer.push({ eventLabel: c }), "undefined" != typeof d && null != d && dataLayer.push({ eventValue: parseFloat(d) }), dataLayer.push({ event: "generic" }), "function" == typeof f && f() }, trackPageview: function (a) { dataLayer.push({ event: "pageview", page: a }) } }, Utils: { extractParamFromUri: function (a, b) { if (a) { var c = "", d = a.split("#"); 2 == d.length && (c += d[1]); var e = a.split("?"); if (2 == e.length && (c += (c.length > 0 ? "&" : "") + e[1]), 0 != c.length) { var f = decodeURI(c); b += "="; for (var g, h = f.split("&"), i = 0; g = h[i]; ++i) if (0 === g.indexOf(b) && (paramParts = g.split("="), 2 == paramParts.length)) return unescape(paramParts[1]) } } } }, Search: { init: function () { $("#so-search .keywords").focus(), $(".so-search-select").change(function () { $("#header_search_form").attr("action", $(this).find("select").val()) }), $("#header_search_form").submit(function () { var a = $(this).find(".keywords"); return "" == a.val() || a.val() == a.attr("placeholder") ? ($(this).find(".keywords").focus(), !1) : void 0 }) } }, ArtActions: { init: function () { function a() { $(this).find(".so-art-actions").stop().show() } function b() { $(this).find(".so-art-actions").stop().hide() } function c(a) { return !1 } function d(a) { return !1 } function e() { function a(a) { if (0 == $(a.target).parents(".ui-tooltip-collect").length) { var e = $(a.data.obj); e.off("mousedown.stopProp", d), e.closest(".so-art-actions.btn-group").not($(a.data.obj).parents(".so-art-actions.btn-group")).stop().hide(), e.closest(".so-list-item-art").off("mouseout mouseleave", c).on("mouseout mouseleave", b).trigger("mouseout"), $(document).off("click.addToCollectionsOverlayCheck") } } "addToCollection" == $(this).data().type && $(".so-list-item-art").length > 0 && ($(document).trigger("click.addToCollectionsOverlayCheck", { obj: $(this) }), $(this).on("mousedown.stopProp", d), $(this).closest(".so-list-item-art").off("mouseout mouseleave", c).off("mouseout mouseleave", b).on("mouseout mouseleave", c), $(document).off("click.addToCollectionsOverlayCheck").on("click.addToCollectionsOverlayCheck", { obj: $(this) }, a)) } $(document).off("mouseover mouseenter", ".so-list-item-art", a).on("mouseover mouseenter", ".so-list-item-art", a).off("mouseout mouseleave", ".so-list-item-art", b).on("mouseout mouseleave", ".so-list-item-art", b).off("mousedown", ".so-art-actions a", e).on("mousedown", ".so-art-actions a", e) } }, List: { fullWidth: 1400, largeWidth: 1061, mediumWidth: 766, mobileWidth: 450, enableMasonry: !1, init: function (a) { var b = $("div.so-list"), c = b.width(); Saatchi.List._changeView(), Saatchi.List._updateColumns(c), a && $(window).resize(function () { Saatchi.List._resize() }) }, _changeView: function () { $(document).on("change", ".so-change-view select", function (a) { $(this).parent().addClass("disabled"), $(this).attr("disabled", !0), Saatchi.Cookie.create("gallery", $(this).attr("value")), window.location.reload() }) }, _updateColumns: function (a) { var b = $("div.so-list"); a <= Saatchi.List.mediumWidth && b.removeClass("so-list-threecol so-list-fourcol so-list-fivecol").addClass("so-list-twocol"), a > Saatchi.List.mediumWidth && b.removeClass("so-list-twocol so-list-fourcol so-list-fivecol").addClass("so-list-threecol"), a > Saatchi.List.largeWidth && b.removeClass("so-list-twocol so-list-threecol so-list-fivecol").addClass("so-list-fourcol"), a > Saatchi.List.fullWidth && b.removeClass("so-list-twocol so-list-threecol so-list-fourcol").addClass("so-list-fivecol") }, _resize: function () { var a = $("div.so-list"), b = a.width(), c = 3; b < Saatchi.List.mediumWidth ? c = 2 : b > Saatchi.List.largeWidth && b < Saatchi.List.fullWidth ? c = 4 : b > Saatchi.List.fullWidth && (c = 5), Saatchi.List._updateColumns(b), Saatchi.List.enableMasonry && (msnry.layout(), a.css({ overflow: "visible" })) } } } }(); $(function () { Saatchi.init(), Saatchi.Loader.performLoad(), Saatchi.GoogleTracking.pushDeferredTrackingItems() }), Saatchi.GlobalAddToCart = function (a) { "use strict"; var b = { sku: ["sku"], price: ["price"], artId: ["artwork id", "art_id"], AgencyId: ["Agency id"], category: ["category"], title: ["artwork title"] }; return { init: function () { var b = this; a("body").on("click", ".btn-add-to-cart", function (c) { var d = a(c.currentTarget), e = b.extractData(d); e.sku && (d.attr("disabled", !0), c.preventDefault(), b.pushToDataLayer(e), b.processProduct(e.AgencyId, e.artId).complete(function () { d.removeAttr("disabled"), window.location = "/cart/add/" + e.sku })) }) }, exposeArtworkDataObjectToDataLayer: function (a) { var c, d, e, f, g = {}; for (c in b) if (b.hasOwnProperty(c) && "undefined" != typeof a[c]) for (d = b[c], f = 0; f < d.length; f++) e = d[f], g[e] = a[c]; dataLayer.push(g) }, pushToDataLayer: function (a) { var b = a.title, c = a.sku, d = a.category, e = a.original || "original"; this.exposeArtworkDataObjectToDataLayer(a), dataLayer.push({ event: "addToCart", ecommerce: { currencyCode: "USD", add: { products: [{ name: b, id: c, quantity: 1, category: d, variant: e, brand: "saatchi" }] } } }) }, extractData: function (a) { return { sku: a.data("sku"), title: a.data("title"), price: a.data("price"), category: a.data("category"), AgencyId: a.data("Agency-id"), artId: a.data("art-id") } }, processProduct: function (b, c) { return a.ajax({ url: "/art/process-product", data: { Agency: b, art: c } }) } } }(jQuery), Saatchi.Collect = function (a) { "use strict"; return { control: null, init: function (b, c) { var b = b ? b : a(".so-collect, .btn-add-to-collection"); return Saatchi.Signup.isLoggedIn ? void b.each(function () { var b = a(this); b.qtip({ content: { text: "Loading...", ajax: { url: "/collections/add-art", type: "GET", data: { owner: b.data("art") ? b.data("art").owner : b.data("collectionOwner"), id: b.data("art") ? b.data("art").id : b.data("artId") }, once: !1, success: function (a, c) { if (a.result) Saatchi.Collect.renderCollectionList(a, b); else { var d = '<div class="alert alert-error">Oops, something went wrong. Please try again.</div>'; this.set("content.text", d) } Saatchi.Collect.control = b.closest("div.item-controls"), Saatchi.Collect.control.attr("style", "display:block !important;") }, loading: !1 } }, position: { viewport: a(window), my: "top center", at: "bottom center", effect: !1 }, show: { event: "click", solo: c ? !1 : !0 }, hide: { target: !1, event: "mouseleave", effect: !0, delay: 419, fixed: !0, inactive: !1, leave: "window", distance: !1 }, style: { classes: "ui-tooltip-light ui-tooltip-collect ui-tooltip-shadow", tip: { height: 5, width: 25 } }, events: { show: function (a, c) { b.children("i").addClass("so-loading") }, visible: function () { b.children("i").removeClass("so-loading") }, hide: function () { b.qtip("remove"), b.qtip("option", "content.text", "Loading..."), a(document).trigger("click.addToCollectionsOverlayCheck", { obj: b }), Saatchi.Collect.control.removeAttr("style") } } }) }).bind("click", function (a) { return a.preventDefault(), !1 }) : (b.on("click", function () { return a("*").qtip("hide"), Saatchi.Signup.source = "collect", Saatchi.Signup.openAccountRequired(null, "You must have an account to add art to a collection."), !1 }), !1) }, renderCollectionList: function (b, c) { var d = a(c), e = d.data("art"), f = b.collections; d.data("collectionsArtIsIn", b.collectionsArtIsIn); var g = b.user, h = e ? e.owner : d.data("collectionOwner"), i = e ? e.id : d.data("artId"), j = '<div class="so-collections-list">'; if (j += '   <div class="hd">', j += '       <h6 class="pull-left">Add to a Collection</h6>', j += '       <div class="create pull-right">', j += '           <a href="/collections/add-art-to-new/owner/' + h + "/id/" + i + '" class="so-spr-add btn btn-mini ready" onclick="Saatchi.Collect.createNewCollection( $(this) );return false;"><i class="fa fa-plus"></i>', j += "               New Collection</a>", j += "       </div>", j += '       <div class="clearfix"></div>', j += "   </div>", j += "<hr />", j += '<div class="bd">', b.collections.length > 0 ? (j += '   <form id="collectionSearch" method="get" action="/search/collection">', j += '       <input id="collectionSearchBox" class="keyword input-xlarge pull-left" type="text" value="" name="query" placeholder="Search Collections">', j += '       <select id="collectionSort" name="collectionSort" class="so-select pull-left">', j += '           <option value="dateModified">Date Modified</option>', j += '           <option value="title">Title</option>', j += '           <option value="dateCreated">Date Created</option>', j += "           </select>", j += "   </form>", j += '<div class="clearfix"></div>', j += '   <div class="so-available-collections scroll-visible"><table id="table-collection-list" class="table table-bordered table-condensed table-striped"></table></div>') : j += "<p class=\"alert alert-block\">Click on the <strong>'New Collection'</strong> button above to create a collection.</p>", j += "</div>", d.qtip("option", "content.text", j), 0 == b.collections.length) return !1; var k = a("#collectionSearchBox"); a(".qtip-close").on("click", function () { return d.find(".so-art-actions").stop().hide(), a(document).trigger("click.addToCollectionsOverlayCheck"), d.qtip("hide"), !1 }), a("#collectionSort.so-select").uniform().on("change", function () { a("#table-collection-list").empty().append("<tr><td>Loading...</td></tr>"), Saatchi.Collect.updateCollectionList(d, "/collections/add-art/owner/" + h + "/id/" + i + "/sort/" + a(this).val(), k) }), Saatchi.Collect.addRemoveArtInCollection(a(".so-collections-list")), k.autocomplete({ delay: 0, minLength: 0, open: function (b, c) { a("ul.ui-autocomplete").stop().hide() }, change: function (a, b) { }, select: function (a, b) { return !1 }, source: a.map(f, function (a) { return { label: a.title, value: a.collection_id, image: a.collection_image_main } }), response: function (b, c) { 0 === c.content.length ? a("#table-collection-list").html('<tr class="warning"><td>No Results Found</td></tr>') : a("#table-collection-list").empty() } }), k.data("ui-autocomplete")._renderItem = function (b, c) { var e = 0, f = "", j = d.data("collectionsArtIsIn"); for (var k in j) j.hasOwnProperty(k) && j[k] == c.value && (e = 1, f = ' class="success"'); var l = "<tr" + f + "><td>"; return l += '<div class="so-available-collections-item">', l += '   <a href="/collections/remove-art/art_id/' + i + "/art_owner/" + h + "/collection_owner/" + g + "/collection/" + c.value + '" class="btn btn-mini btn-danger close"', e || (l += 'style="display:none;"'), l += ">&times;</a>", l += '   <a href="/collections/add-art/owner/' + h + "/id/" + i + "/collection/" + c.value + '" class="add', e && (l += " disable"), l += '">', l += '   <span class="btn btn-mini btn-success"', l += ' style="display:none;"', l += '   ><i class="icon-ok-sign icon-white"></i></span>', l += '   <div class="ellipsis">' + c.label + "</div>", l += '   <div class="clearfix"></div>', l += "</a></div></td></tr>", a(l).appendTo(a("#table-collection-list")) }, k.autocomplete("search", "").focus().on("autocompletesearch", function (b, c) { a("#table-collection-list").empty(), a("ul.ui-autocomplete").hide() }) }, updateCollectionList: function (b, c, d) { b.closest(".ui-tooltip-content"); b.qtip("reposition"), a.ajax({ url: c, success: function (b) { if (b.result) d.closest(".so-list-art-image").find("a.so-collect").data("collectionsArtIsIn", b.collectionsArtIsIn), d.autocomplete({ source: a.map(b.collections, function (a) { return { label: a.title, value: a.collection_id, image: a.collection_image_main } }) }), d.autocomplete("search"); else; } }) }, addRemoveArtInCollection: function (b) { b.on("click", "a.add,a.close", function () { var b = a(this).attr("href"), c = a(this), d = c.parents(".so-available-collections-item"); return c.hasClass("disable") ? !1 : (c.hasClass("close") && c.hide(), d.append('<span class="icon"><i class="icon so-loading">&nbsp;</i></span>'), a.ajax({ url: b, success: function (a) { if (a.result) { if (c.hasClass("add")) { var b = "Artwork added to collection."; c.addClass("disable"), c.siblings("a").show().children("span").show(), c.closest("tr").addClass("success") } else if (c.hasClass("close")) { var b = "Artwork removed from collection."; c.siblings("a.add").removeClass("disable"), c.hide(), c.closest("tr").removeClass("success") } d.find(".icon.so-loading").parent().remove(), Saatchi.Dialog.success(b) } else Saatchi.Dialog.error(a.message) } }), !1) }) }, createNewCollection: function (a) { return Saatchi.Modal.url = a.attr("href"), Saatchi.Modal.title = "Art will be added to your new collection.", Saatchi.Modal.init(), !1 }, addToNewCollection: function (b) { var c = b.find('input[type="submit"]'); c.val("Creating..."), a.ajax({ url: "/collections/create-validate", data: b.serialize(), success: function (d) { d.result ? a.post(b.attr("action"), b.serialize(), function (b) { return b.result ? (a("#so-doc").qtip("hide"), void ("/collections/create" == window.location.pathname ? (window.location = b.redirect, Saatchi.Dialog.success("New collection created. Browse art to add to your collection.")) : (Saatchi.Dialog.success("New collection created. And art added to this collection."), Saatchi.Modal.api.hide()))) : (Saatchi.Dialog.error(b.content), void c.val("Create Collection")) }, "json") : (Saatchi.Dialog.error(d.content), c.val("Create Collection")) } }) }, update: function (b) { var c = b.find('input[type="submit"]'); c.val("Saving..."), a.ajax({ url: "/collections/edit-validate", data: b.serialize(), success: function (d) { d.result ? a.post(b.attr("action"), b.serialize(), function (a) { window.location = a.redirect }) : d.result || (Saatchi.Dialog.error(d.content), c.val("Save")) } }) }, isPrivateSelected: function (a) { var b = a.closest(".control-group").next(); return b.find('[type="submit"]').length > 0 ? !1 : void (a.is(":checked") ? b.hide() : b.show()) }, share: function (b) { b.html("Sharing..."), a.ajax({ url: b.attr("href"), type: "POST", success: function (a) { a.result ? (Saatchi.Dialog.success(a.message), b.html("Shared").attr("disabled", !0).off("click")) : (Saatchi.Dialog.error("There was an error. Please try again later."), b.html("Share")) } }) } } }(jQuery), Saatchi.Dialog = function () { var a = "so-dialog", b = "so-dialog-wrapper", c = .1, d = null, e = null, f = null, g = null; return { data: null, dismissTimeout: null, init: function (h, i) { i || (i = {}), i.hasOwnProperty("class") || (i["class"] = "default"), i.hasOwnProperty("title") || (i.title = null), i.hasOwnProperty("url") || (i.url = !0), i.hasOwnProperty("modal") || (i.modal = !1, f = a), i.hasOwnProperty("data") || (i.data = null), i.hasOwnProperty("dismiss") || (i.dismiss = !1), i.hasOwnProperty("actions") || (i.actions = [{ label: "OK", handler: function (a) { Saatchi.Dialog.dismiss() }, id: "so-dialog-button-ok", "default": !0 }]), e && e.detach(), YUI().use("event", "node", "io", "json-parse", "anim", function (f) { var j = null, k = i.title ? '<div class="hd"><h3>' + i.title + "</h3></div>" : "", l = null, m = null, n = null, o = 0, p = null, q = null, r = '<div class="ft"><div>'; for (q = 0; q < i.actions.length; q++) n = i.actions[q].hasOwnProperty("default") && i.actions[q]["default"] ? "default" : "", "default" === n && (o = q), i.actions[q].hasOwnProperty("id") || (i.actions[q].id = f.guid()), r += '<input type="button" id="' + i.actions[q].id + '" class="' + n + '" value="' + i.actions[q].label + '">'; for (r += "</div></div>", d = f, d.one("#" + a) && d.one("#" + a).remove(), d.one("#" + b) && d.one("#" + b).remove(), d.one("body").append(f.Node.create((i.modal ? '<div id="so-dialog-wrapper" class="modal">' : "") + '<div id="' + a + '" class="loading ' + i["class"] + '">' + k + '<div class="bd"><p>Loading</p></div>' + r + "</div>" + (i.modal ? "</div>" : ""))), q = 0; q < i.actions.length; q++) i.actions[q].handler && d.one("#" + i.actions[q].id).on("click", i.actions[q].handler); if (i.modal || (m = d.one(document.body).get("winWidth"), d.one("#" + a).setStyle("left", Math.round(m / 2 - d.one("#" + a).get("region").width / 2))), l = new d.Anim({ node: "#" + a, to: { opacity: 1 } }), l.set("duration", c), l.run(), i.url ? (d.on("io:complete", function (b, e) { j = d.JSON.parse(e.responseText).content; var f = d.one("#" + a), g = new d.Anim({ node: "#" + a + " .bd p", to: { opacity: 0 } }); g.set("duration", c), g.on("end", function () { f.one(".bd").set("innerHTML", j), f.removeClass("loading") }), g.run() }), d.io(h)) : (p = d.one("#" + a), p.one(".bd").set("innerHTML", h), p.removeClass("loading")), d.one("#" + i.actions[o].id)._node.focus(), e = d.on("key", function (a) { Saatchi.Dialog.dismiss() }, d.one(document.body), "down:27"), i.dismiss) g = f.later(i.dismiss, null, function () { Saatchi.Dialog.dismiss() }); else { setTimeout("Saatchi.Dialog.dismiss()", 5e3) } }) }, loading: function () { d.one("#" + a).addClass("loading") }, toString: function () { return "Saatchi.Dialog" }, quit: function () { var e = new d.Anim({ node: d.one("#" + b) ? d.one("#" + b) : d.one("#" + a), to: { opacity: 0 } }); e.set("duration", c), e.on("end", function () { this.get("node").remove(), g = null }), e.run() }, dismiss: function () { try { e && e.detach(); var f = new d.Anim({ node: "#" + a, to: { opacity: 0, marginTop: 0 } }); f.set("duration", c), f.on("end", function () { var e = new d.Anim({ node: d.one("#" + b) ? d.one("#" + b) : d.one("#" + a), to: { opacity: 0 } }); e.set("duration", c), e.on("end", function () { this.get("node").remove(), g = null }) }), f.run() } catch (h) { d.log(h.description, "error", "Saatchi.Dialog.dismiss()") } }, error: function (a) { Saatchi.Dialog._startMessageTimeout(a, "error") }, success: function (a) { Saatchi.Dialog._startMessageTimeout(a, "success") }, _startMessageTimeout: function (a, b) { null != jQuery() && (null != Saatchi.Dialog.dismissTimeout && (clearTimeout(Saatchi.Dialog.dismissTimeout), Saatchi.Dialog.dismissTimeout = null), jQuery("#so-status-msg").length > 0 ? jQuery("#so-status-msg").fadeOut(100, function () { jQuery("#so-status-msg").remove(), Saatchi.Dialog._displayMessage(a, b) }) : Saatchi.Dialog._displayMessage(a, b)) }, _displayMessage: function (a, b) { jQuery.isArray(a) || (a = [a]); for (var c = jQuery("<ul>"), d = 0; d < a.length; d++) c.append(jQuery("<li>", { text: a[d] })); var e = jQuery("<div>", { id: "so-status-msg", style: "display: none;" }).append(jQuery("<div>", { "class": "bd" }).append(jQuery("<div>", { "class": b }).append(c))); jQuery("body").prepend(e), jQuery("#so-status-msg").fadeIn(500), Saatchi.Dialog.dismissTimeout = setTimeout(function () { jQuery("#so-status-msg") && jQuery("#so-status-msg").fadeOut(500, function () { jQuery("#so-status-msg").remove() }) }, 5e3) } } }(), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, { def: "easeOutQuad", swing: function (a, b, c, d, e) { return jQuery.easing[jQuery.easing.def](a, b, c, d, e) }, easeInQuad: function (a, b, c, d, e) { return d * (b /= e) * b + c }, easeOutQuad: function (a, b, c, d, e) { return -d * (b /= e) * (b - 2) + c }, easeInOutQuad: function (a, b, c, d, e) { return (b /= e / 2) < 1 ? d / 2 * b * b + c : -d / 2 * (--b * (b - 2) - 1) + c }, easeInCubic: function (a, b, c, d, e) { return d * (b /= e) * b * b + c }, easeOutCubic: function (a, b, c, d, e) { return d * ((b = b / e - 1) * b * b + 1) + c }, easeInOutCubic: function (a, b, c, d, e) { return (b /= e / 2) < 1 ? d / 2 * b * b * b + c : d / 2 * ((b -= 2) * b * b + 2) + c }, easeInQuart: function (a, b, c, d, e) { return d * (b /= e) * b * b * b + c }, easeOutQuart: function (a, b, c, d, e) { return -d * ((b = b / e - 1) * b * b * b - 1) + c }, easeInOutQuart: function (a, b, c, d, e) { return (b /= e / 2) < 1 ? d / 2 * b * b * b * b + c : -d / 2 * ((b -= 2) * b * b * b - 2) + c }, easeInQuint: function (a, b, c, d, e) { return d * (b /= e) * b * b * b * b + c }, easeOutQuint: function (a, b, c, d, e) { return d * ((b = b / e - 1) * b * b * b * b + 1) + c }, easeInOutQuint: function (a, b, c, d, e) { return (b /= e / 2) < 1 ? d / 2 * b * b * b * b * b + c : d / 2 * ((b -= 2) * b * b * b * b + 2) + c }, easeInSine: function (a, b, c, d, e) { return -d * Math.cos(b / e * (Math.PI / 2)) + d + c }, easeOutSine: function (a, b, c, d, e) { return d * Math.sin(b / e * (Math.PI / 2)) + c }, easeInOutSine: function (a, b, c, d, e) { return -d / 2 * (Math.cos(Math.PI * b / e) - 1) + c }, easeInExpo: function (a, b, c, d, e) { return 0 == b ? c : d * Math.pow(2, 10 * (b / e - 1)) + c }, easeOutExpo: function (a, b, c, d, e) { return b == e ? c + d : d * (-Math.pow(2, -10 * b / e) + 1) + c }, easeInOutExpo: function (a, b, c, d, e) { return 0 == b ? c : b == e ? c + d : (b /= e / 2) < 1 ? d / 2 * Math.pow(2, 10 * (b - 1)) + c : d / 2 * (-Math.pow(2, -10 * --b) + 2) + c }, easeInCirc: function (a, b, c, d, e) { return -d * (Math.sqrt(1 - (b /= e) * b) - 1) + c }, easeOutCirc: function (a, b, c, d, e) { return d * Math.sqrt(1 - (b = b / e - 1) * b) + c }, easeInOutCirc: function (a, b, c, d, e) { return (b /= e / 2) < 1 ? -d / 2 * (Math.sqrt(1 - b * b) - 1) + c : d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c }, easeInElastic: function (a, b, c, d, e) { var f = 1.70158, g = 0, h = d; if (0 == b) return c; if (1 == (b /= e)) return c + d; if (g || (g = .3 * e), h < Math.abs(d)) { h = d; var f = g / 4 } else var f = g / (2 * Math.PI) * Math.asin(d / h); return -(h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * (2 * Math.PI) / g)) + c }, easeOutElastic: function (a, b, c, d, e) { var f = 1.70158, g = 0, h = d; if (0 == b) return c; if (1 == (b /= e)) return c + d; if (g || (g = .3 * e), h < Math.abs(d)) { h = d; var f = g / 4 } else var f = g / (2 * Math.PI) * Math.asin(d / h); return h * Math.pow(2, -10 * b) * Math.sin((b * e - f) * (2 * Math.PI) / g) + d + c }, easeInOutElastic: function (a, b, c, d, e) { var f = 1.70158, g = 0, h = d; if (0 == b) return c; if (2 == (b /= e / 2)) return c + d; if (g || (g = e * (.3 * 1.5)), h < Math.abs(d)) { h = d; var f = g / 4 } else var f = g / (2 * Math.PI) * Math.asin(d / h); return 1 > b ? -.5 * (h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * (2 * Math.PI) / g)) + c : h * Math.pow(2, -10 * (b -= 1)) * Math.sin((b * e - f) * (2 * Math.PI) / g) * .5 + d + c }, easeInBack: function (a, b, c, d, e, f) { return void 0 == f && (f = 1.70158), d * (b /= e) * b * ((f + 1) * b - f) + c }, easeOutBack: function (a, b, c, d, e, f) { return void 0 == f && (f = 1.70158), d * ((b = b / e - 1) * b * ((f + 1) * b + f) + 1) + c }, easeInOutBack: function (a, b, c, d, e, f) { return void 0 == f && (f = 1.70158), (b /= e / 2) < 1 ? d / 2 * (b * b * (((f *= 1.525) + 1) * b - f)) + c : d / 2 * ((b -= 2) * b * (((f *= 1.525) + 1) * b + f) + 2) + c }, easeInBounce: function (a, b, c, d, e) { return d - jQuery.easing.easeOutBounce(a, e - b, 0, d, e) + c }, easeOutBounce: function (a, b, c, d, e) { return (b /= e) < 1 / 2.75 ? d * (7.5625 * b * b) + c : 2 / 2.75 > b ? d * (7.5625 * (b -= 1.5 / 2.75) * b + .75) + c : 2.5 / 2.75 > b ? d * (7.5625 * (b -= 2.25 / 2.75) * b + .9375) + c : d * (7.5625 * (b -= 2.625 / 2.75) * b + .984375) + c }, easeInOutBounce: function (a, b, c, d, e) { return e / 2 > b ? .5 * jQuery.easing.easeInBounce(a, 2 * b, 0, d, e) + c : .5 * jQuery.easing.easeOutBounce(a, 2 * b - e, 0, d, e) + .5 * d + c } }), Saatchi.EmailToFriend = function (a) { "use strict"; return { onHide: function () { }, modalTrack: "email-to-friend", modalUrl: "/social/email/art", modalData: "emailtofriend", modalTitle: "Share This Artwork", init: function () { a("body").on("click", ".so-email-to-friend-open", function (b) { return b.preventDefault(), Saatchi.Signup.isLoggedIn ? (Saatchi.GoogleTracking.trackEvent("social", Saatchi.EmailToFriend.modalTrack, "open"), Saatchi.Modal.url = Saatchi.EmailToFriend.modalUrl, Saatchi.Modal.data = a(this).data(Saatchi.EmailToFriend.modalData), Saatchi.Modal.title = Saatchi.EmailToFriend.modalTitle, void Saatchi.Modal.init()) : (Saatchi.Signup.source = "email-to-friend", Saatchi.Signup.openAccountRequired(null, "You must have an account to email art to a friend."), !1) }) } } }(jQuery), Saatchi.Favorite = function (a) { "use strict"; return a.fn.favorite = function () { function b(b) { var c = b.attr("href"); a.ajax({ url: c, success: function (d) { b.replaceWith(d.content), a(".so-favorite").favorite(), Saatchi.Tips.init(); var e = null; -1 !== c.indexOf("/like/art/") ? e = "art" : -1 !== c.indexOf("/like/collection/") ? e = "collection" : -1 !== c.indexOf("/relationships/follow/") && (e = "user"), null != e && Saatchi.GoogleTracking.trackEvent("social", "favorite", e) } }) } return a(this).each(function () { a(this).click(function (c) { return c.preventDefault(), a(this).children("i").hasClass("so-loading") ? !1 : (a(this).children("i").addClass("so-loading"), void (Saatchi.Signup.isLoggedIn ? b(a(this)) : (a("*").qtip("hide"), Saatchi.Signup.source = "favorite", Saatchi.Signup.openAccountRequired(a(this).attr("href"), "You must have an account to favorite art."), a(this).children("i").removeClass("so-loading")))) }) }) }, { users: [], init: function () { a(document).on("mouseenter", ".btn-favorite.is-favorite", function (b) { b.preventDefault(), a(this).find(".fa").addClass("fa-heart-o") }).on("mouseleave", ".btn-favorite.is-favorite", function (b) { b.preventDefault(), a(this).find(".fa").removeClass("fa-heart-o") }), a(document).on("click", ".btn-favorite", function (b) { if (b.preventDefault(), !Saatchi.Signup.isLoggedIn) return Saatchi.Favorite.openLoginModal(), !1; var c = a(this), d = c.closest(".item-controls"), e = d.data("id"), f = c.data("user"), g = c.data("favorite"), h = d.siblings(".list-art-image-wrapper").find("img").height(), i = d.siblings(".list-art-image-wrapper").find("img").width(), j = { id: f, id_user_art: e, favorite: g }; return Saatchi.Favorite.update(j) ? Saatchi.Favorite.openLoginModal() : (d.addClass("hidden"), c.hasClass("is-favorite") ? (c.removeClass("is-favorite").attr("title", "Add to Favorites"), c.data("favorite", !1), d.before('<div class="removed-from-favorites flexcontainer" style="height:' + h + "px; width:" + i + 'px;"><span class="btn-round"><i class="fa fa-minus"></i></span><br />Success! <br/> This artwork has been removed from your favorites</div> '), a(".removed-from-favorites").delay(4e3).fadeOut(600, function () { a(this).remove(), d.removeClass("hidden") })) : (c.addClass("is-favorite").attr("title", "Remove from Favorites"), c.data("favorite", !0), d.before('<div class="added-to-favorites flexcontainer" style="height:' + h + "px; width:" + i + 'px;"><span class="btn-round"><i class="fa fa-check"></i></span><br />Success! <br/> This artwork has been added to your favorites</div> '), a(".added-to-favorites").delay(4e3).fadeOut(600, function () { a(this).remove(), d.removeClass("hidden") })), c.find(".fa").removeClass("fa-heart-o")), !1 }), Saatchi.Favorite.setUserFavorite() }, openLoginModal: function () { return Saatchi.Signup.source = "favorite", Saatchi.Signup.openAccountRequired(null, "You must have an account to favorite art."), !1 }, update: function (b) { var c = "/account/favorite"; b.favorite && (b._method = "_delete"), b.format = "json", a.ajax({ type: "POST", url: c, data: b, dataType: "json" }).done(function (a) { a.success === !1 && a.requiresLogin === !0 && (Saatchi.Signup.init(), Saatchi.Favorite.openLoginModal()) }) }, setUserFavorite: function () { a(document).on("hover", ".art-item", function () { var b = a(this), c = b.find(".btn-favorite"), d = b.find(".item-controls").data("id"), e = Saatchi.Favorite.users; if (c.data("updated")) return !1; for (var f = 0; f < e.length; f++) e[f] == d && c.addClass("is-favorite").data("favorite", !0).data("updated", !0).attr("title", "Remove from Favorites"); return !1 }) } } }(jQuery), function () {
    function a() { } function b(a, b) { for (var c = a.length; c--;) if (a[c].listener === b) return c; return -1 } function c(a) { return function () { return this[a].apply(this, arguments) } } var d = a.prototype, e = this, f = e.EventEmitter; d.getListeners = function (a) { var b, c, d = this._getEvents(); if ("object" == typeof a) { b = {}; for (c in d) d.hasOwnProperty(c) && a.test(c) && (b[c] = d[c]) } else b = d[a] || (d[a] = []); return b }, d.flattenListeners = function (a) { var b, c = []; for (b = 0; a.length > b; b += 1) c.push(a[b].listener); return c }, d.getListenersAsObject = function (a) { var b, c = this.getListeners(a); return c instanceof Array && (b = {}, b[a] = c), b || c }, d.addListener = function (a, c) { var d, e = this.getListenersAsObject(a), f = "object" == typeof c; for (d in e) e.hasOwnProperty(d) && -1 === b(e[d], c) && e[d].push(f ? c : { listener: c, once: !1 }); return this }, d.on = c("addListener"), d.addOnceListener = function (a, b) { return this.addListener(a, { listener: b, once: !0 }) }, d.once = c("addOnceListener"), d.defineEvent = function (a) { return this.getListeners(a), this }, d.defineEvents = function (a) { for (var b = 0; a.length > b; b += 1) this.defineEvent(a[b]); return this }, d.removeListener = function (a, c) { var d, e, f = this.getListenersAsObject(a); for (e in f) f.hasOwnProperty(e) && (d = b(f[e], c), -1 !== d && f[e].splice(d, 1)); return this }, d.off = c("removeListener"), d.addListeners = function (a, b) { return this.manipulateListeners(!1, a, b) }, d.removeListeners = function (a, b) { return this.manipulateListeners(!0, a, b) }, d.manipulateListeners = function (a, b, c) { var d, e, f = a ? this.removeListener : this.addListener, g = a ? this.removeListeners : this.addListeners; if ("object" != typeof b || b instanceof RegExp) for (d = c.length; d--;) f.call(this, b, c[d]); else for (d in b) b.hasOwnProperty(d) && (e = b[d]) && ("function" == typeof e ? f.call(this, d, e) : g.call(this, d, e)); return this }, d.removeEvent = function (a) { var b, c = typeof a, d = this._getEvents(); if ("string" === c) delete d[a]; else if ("object" === c) for (b in d) d.hasOwnProperty(b) && a.test(b) && delete d[b]; else delete this._events; return this }, d.removeAllListeners = c("removeEvent"), d.emitEvent = function (a, b) { var c, d, e, f, g = this.getListenersAsObject(a); for (e in g) if (g.hasOwnProperty(e)) for (d = g[e].length; d--;) c = g[e][d], c.once === !0 && this.removeListener(a, c.listener), f = c.listener.apply(this, b || []), f === this._getOnceReturnValue() && this.removeListener(a, c.listener); return this }, d.trigger = c("emitEvent"), d.emit = function (a) { var b = Array.prototype.slice.call(arguments, 1); return this.emitEvent(a, b) }, d.setOnceReturnValue = function (a) { return this._onceReturnValue = a, this }, d._getOnceReturnValue = function () { return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0 }, d._getEvents = function () { return this._events || (this._events = {}) }, a.noConflict = function () { return e.EventEmitter = f, a }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function () {
        return a
    }) : "object" == typeof module && module.exports ? module.exports = a : this.EventEmitter = a
}.call(this), function (a) { function b(b) { var c = a.event; return c.target = c.target || c.srcElement || b, c } var c = document.documentElement, d = function () { }; c.addEventListener ? d = function (a, b, c) { a.addEventListener(b, c, !1) } : c.attachEvent && (d = function (a, c, d) { a[c + d] = d.handleEvent ? function () { var c = b(a); d.handleEvent.call(d, c) } : function () { var c = b(a); d.call(a, c) }, a.attachEvent("on" + c, a[c + d]) }); var e = function () { }; c.removeEventListener ? e = function (a, b, c) { a.removeEventListener(b, c, !1) } : c.detachEvent && (e = function (a, b, c) { a.detachEvent("on" + b, a[b + c]); try { delete a[b + c] } catch (d) { a[b + c] = void 0 } }); var f = { bind: d, unbind: e }; "function" == typeof define && define.amd ? define("eventie/eventie", f) : a.eventie = f }(this), function (a, b) { "function" == typeof define && define.amd ? define(["eventEmitter/EventEmitter", "eventie/eventie"], function (c, d) { return b(a, c, d) }) : "object" == typeof exports ? module.exports = b(a, require("eventEmitter"), require("eventie")) : a.imagesLoaded = b(a, a.EventEmitter, a.eventie) }(this, function (a, b, c) { function d(a, b) { for (var c in b) a[c] = b[c]; return a } function e(a) { return "[object Array]" === m.call(a) } function f(a) { var b = []; if (e(a)) b = a; else if ("number" == typeof a.length) for (var c = 0, d = a.length; d > c; c++) b.push(a[c]); else b.push(a); return b } function g(a, b, c) { if (!(this instanceof g)) return new g(a, b); "string" == typeof a && (a = document.querySelectorAll(a)), this.elements = f(a), this.options = d({}, this.options), "function" == typeof b ? c = b : d(this.options, b), c && this.on("always", c), this.getImages(), j && (this.jqDeferred = new j.Deferred); var e = this; setTimeout(function () { e.check() }) } function h(a) { this.img = a } function i(a) { this.src = a, n[a] = this } var j = a.jQuery, k = a.console, l = void 0 !== k, m = Object.prototype.toString; g.prototype = new b, g.prototype.options = {}, g.prototype.getImages = function () { this.images = []; for (var a = 0, b = this.elements.length; b > a; a++) { var c = this.elements[a]; "IMG" === c.nodeName && this.addImage(c); for (var d = c.querySelectorAll("img"), e = 0, f = d.length; f > e; e++) { var g = d[e]; this.addImage(g) } } }, g.prototype.addImage = function (a) { var b = new h(a); this.images.push(b) }, g.prototype.check = function () { function a(a, e) { return b.options.debug && l && k.log("confirm", a, e), b.progress(a), c++, c === d && b.complete(), !0 } var b = this, c = 0, d = this.images.length; if (this.hasAnyBroken = !1, !d) return void this.complete(); for (var e = 0; d > e; e++) { var f = this.images[e]; f.on("confirm", a), f.check() } }, g.prototype.progress = function (a) { this.hasAnyBroken = this.hasAnyBroken || !a.isLoaded; var b = this; setTimeout(function () { b.emit("progress", b, a), b.jqDeferred && b.jqDeferred.notify && b.jqDeferred.notify(b, a) }) }, g.prototype.complete = function () { var a = this.hasAnyBroken ? "fail" : "done"; this.isComplete = !0; var b = this; setTimeout(function () { if (b.emit(a, b), b.emit("always", b), b.jqDeferred) { var c = b.hasAnyBroken ? "reject" : "resolve"; b.jqDeferred[c](b) } }) }, j && (j.fn.imagesLoaded = function (a, b) { var c = new g(this, a, b); return c.jqDeferred.promise(j(this)) }), h.prototype = new b, h.prototype.check = function () { var a = n[this.img.src] || new i(this.img.src); if (a.isConfirmed) return void this.confirm(a.isLoaded, "cached was confirmed"); if (this.img.complete && void 0 !== this.img.naturalWidth) return void this.confirm(0 !== this.img.naturalWidth, "naturalWidth"); var b = this; a.on("confirm", function (a, c) { return b.confirm(a.isLoaded, c), !0 }), a.check() }, h.prototype.confirm = function (a, b) { this.isLoaded = a, this.emit("confirm", this, b) }; var n = {}; return i.prototype = new b, i.prototype.check = function () { if (!this.isChecked) { var a = new Image; c.bind(a, "load", this), c.bind(a, "error", this), a.src = this.src, this.isChecked = !0 } }, i.prototype.handleEvent = function (a) { var b = "on" + a.type; this[b] && this[b](a) }, i.prototype.onload = function (a) { this.confirm(!0, "onload"), this.unbindProxyEvents(a) }, i.prototype.onerror = function (a) { this.confirm(!1, "onerror"), this.unbindProxyEvents(a) }, i.prototype.confirm = function (a, b) { this.isConfirmed = !0, this.isLoaded = a, this.emit("confirm", this, b) }, i.prototype.unbindProxyEvents = function (a) { c.unbind(a.target, "load", this), c.unbind(a.target, "error", this) }, g }), function (a) { function b() { } function c(a) { function c(b) { b.prototype.option || (b.prototype.option = function (b) { a.isPlainObject(b) && (this.options = a.extend(!0, this.options, b)) }) } function e(b, c) { a.fn[b] = function (e) { if ("string" == typeof e) { for (var g = d.call(arguments, 1), h = 0, i = this.length; i > h; h++) { var j = this[h], k = a.data(j, b); if (k) if (a.isFunction(k[e]) && "_" !== e.charAt(0)) { var l = k[e].apply(k, g); if (void 0 !== l) return l } else f("no such method '" + e + "' for " + b + " instance"); else f("cannot call methods on " + b + " prior to initialization; attempted to call '" + e + "'") } return this } return this.each(function () { var d = a.data(this, b); d ? (d.option(e), d._init()) : (d = new c(this, e), a.data(this, b, d)) }) } } if (a) { var f = "undefined" == typeof console ? b : function (a) { console.error(a) }; return a.bridget = function (a, b) { c(b), e(a, b) }, a.bridget } } var d = Array.prototype.slice; "function" == typeof define && define.amd ? define("jquery-bridget/jquery.bridget", ["jquery"], c) : c(a.jQuery) }(window), function (a) { function b(b) { var c = a.event; return c.target = c.target || c.srcElement || b, c } var c = document.documentElement, d = function () { }; c.addEventListener ? d = function (a, b, c) { a.addEventListener(b, c, !1) } : c.attachEvent && (d = function (a, c, d) { a[c + d] = d.handleEvent ? function () { var c = b(a); d.handleEvent.call(d, c) } : function () { var c = b(a); d.call(a, c) }, a.attachEvent("on" + c, a[c + d]) }); var e = function () { }; c.removeEventListener ? e = function (a, b, c) { a.removeEventListener(b, c, !1) } : c.detachEvent && (e = function (a, b, c) { a.detachEvent("on" + b, a[b + c]); try { delete a[b + c] } catch (d) { a[b + c] = void 0 } }); var f = { bind: d, unbind: e }; "function" == typeof define && define.amd ? define("eventie/eventie", f) : "object" == typeof exports ? module.exports = f : a.eventie = f }(this), function (a) { function b(a) { "function" == typeof a && (b.isReady ? a() : f.push(a)) } function c(a) { var c = "readystatechange" === a.type && "complete" !== e.readyState; if (!b.isReady && !c) { b.isReady = !0; for (var d = 0, g = f.length; g > d; d++) { var h = f[d]; h() } } } function d(d) { return d.bind(e, "DOMContentLoaded", c), d.bind(e, "readystatechange", c), d.bind(a, "load", c), b } var e = a.document, f = []; b.isReady = !1, "function" == typeof define && define.amd ? (b.isReady = "function" == typeof requirejs, define("doc-ready/doc-ready", ["eventie/eventie"], d)) : a.docReady = d(a.eventie) }(this), function () { function a() { } function b(a, b) { for (var c = a.length; c--;) if (a[c].listener === b) return c; return -1 } function c(a) { return function () { return this[a].apply(this, arguments) } } var d = a.prototype, e = this, f = e.EventEmitter; d.getListeners = function (a) { var b, c, d = this._getEvents(); if (a instanceof RegExp) { b = {}; for (c in d) d.hasOwnProperty(c) && a.test(c) && (b[c] = d[c]) } else b = d[a] || (d[a] = []); return b }, d.flattenListeners = function (a) { var b, c = []; for (b = 0; a.length > b; b += 1) c.push(a[b].listener); return c }, d.getListenersAsObject = function (a) { var b, c = this.getListeners(a); return c instanceof Array && (b = {}, b[a] = c), b || c }, d.addListener = function (a, c) { var d, e = this.getListenersAsObject(a), f = "object" == typeof c; for (d in e) e.hasOwnProperty(d) && -1 === b(e[d], c) && e[d].push(f ? c : { listener: c, once: !1 }); return this }, d.on = c("addListener"), d.addOnceListener = function (a, b) { return this.addListener(a, { listener: b, once: !0 }) }, d.once = c("addOnceListener"), d.defineEvent = function (a) { return this.getListeners(a), this }, d.defineEvents = function (a) { for (var b = 0; a.length > b; b += 1) this.defineEvent(a[b]); return this }, d.removeListener = function (a, c) { var d, e, f = this.getListenersAsObject(a); for (e in f) f.hasOwnProperty(e) && (d = b(f[e], c), -1 !== d && f[e].splice(d, 1)); return this }, d.off = c("removeListener"), d.addListeners = function (a, b) { return this.manipulateListeners(!1, a, b) }, d.removeListeners = function (a, b) { return this.manipulateListeners(!0, a, b) }, d.manipulateListeners = function (a, b, c) { var d, e, f = a ? this.removeListener : this.addListener, g = a ? this.removeListeners : this.addListeners; if ("object" != typeof b || b instanceof RegExp) for (d = c.length; d--;) f.call(this, b, c[d]); else for (d in b) b.hasOwnProperty(d) && (e = b[d]) && ("function" == typeof e ? f.call(this, d, e) : g.call(this, d, e)); return this }, d.removeEvent = function (a) { var b, c = typeof a, d = this._getEvents(); if ("string" === c) delete d[a]; else if (a instanceof RegExp) for (b in d) d.hasOwnProperty(b) && a.test(b) && delete d[b]; else delete this._events; return this }, d.removeAllListeners = c("removeEvent"), d.emitEvent = function (a, b) { var c, d, e, f, g = this.getListenersAsObject(a); for (e in g) if (g.hasOwnProperty(e)) for (d = g[e].length; d--;) c = g[e][d], c.once === !0 && this.removeListener(a, c.listener), f = c.listener.apply(this, b || []), f === this._getOnceReturnValue() && this.removeListener(a, c.listener); return this }, d.trigger = c("emitEvent"), d.emit = function (a) { var b = Array.prototype.slice.call(arguments, 1); return this.emitEvent(a, b) }, d.setOnceReturnValue = function (a) { return this._onceReturnValue = a, this }, d._getOnceReturnValue = function () { return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0 }, d._getEvents = function () { return this._events || (this._events = {}) }, a.noConflict = function () { return e.EventEmitter = f, a }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function () { return a }) : "object" == typeof module && module.exports ? module.exports = a : this.EventEmitter = a }.call(this), function (a) { function b(a) { if (a) { if ("string" == typeof d[a]) return a; a = a.charAt(0).toUpperCase() + a.slice(1); for (var b, e = 0, f = c.length; f > e; e++) if (b = c[e] + a, "string" == typeof d[b]) return b } } var c = "Webkit Moz ms Ms O".split(" "), d = document.documentElement.style; "function" == typeof define && define.amd ? define("get-style-property/get-style-property", [], function () { return b }) : "object" == typeof exports ? module.exports = b : a.getStyleProperty = b }(window), function (a) { function b(a) { var b = parseFloat(a), c = -1 === a.indexOf("%") && !isNaN(b); return c && b } function c() { for (var a = { width: 0, height: 0, innerWidth: 0, innerHeight: 0, outerWidth: 0, outerHeight: 0 }, b = 0, c = g.length; c > b; b++) { var d = g[b]; a[d] = 0 } return a } function d(a) { function d(a) { if ("string" == typeof a && (a = document.querySelector(a)), a && "object" == typeof a && a.nodeType) { var d = f(a); if ("none" === d.display) return c(); var e = {}; e.width = a.offsetWidth, e.height = a.offsetHeight; for (var k = e.isBorderBox = !(!j || !d[j] || "border-box" !== d[j]), l = 0, m = g.length; m > l; l++) { var n = g[l], o = d[n]; o = h(a, o); var p = parseFloat(o); e[n] = isNaN(p) ? 0 : p } var q = e.paddingLeft + e.paddingRight, r = e.paddingTop + e.paddingBottom, s = e.marginLeft + e.marginRight, t = e.marginTop + e.marginBottom, u = e.borderLeftWidth + e.borderRightWidth, v = e.borderTopWidth + e.borderBottomWidth, w = k && i, x = b(d.width); x !== !1 && (e.width = x + (w ? 0 : q + u)); var y = b(d.height); return y !== !1 && (e.height = y + (w ? 0 : r + v)), e.innerWidth = e.width - (q + u), e.innerHeight = e.height - (r + v), e.outerWidth = e.width + s, e.outerHeight = e.height + t, e } } function h(a, b) { if (e || -1 === b.indexOf("%")) return b; var c = a.style, d = c.left, f = a.runtimeStyle, g = f && f.left; return g && (f.left = a.currentStyle.left), c.left = b, b = c.pixelLeft, c.left = d, g && (f.left = g), b } var i, j = a("boxSizing"); return function () { if (j) { var a = document.createElement("div"); a.style.width = "200px", a.style.padding = "1px 2px 3px 4px", a.style.borderStyle = "solid", a.style.borderWidth = "1px 2px 3px 4px", a.style[j] = "border-box"; var c = document.body || document.documentElement; c.appendChild(a); var d = f(a); i = 200 === b(d.width), c.removeChild(a) } }(), d } var e = a.getComputedStyle, f = e ? function (a) { return e(a, null) } : function (a) { return a.currentStyle }, g = ["paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth"]; "function" == typeof define && define.amd ? define("get-size/get-size", ["get-style-property/get-style-property"], d) : "object" == typeof exports ? module.exports = d(require("get-style-property")) : a.getSize = d(a.getStyleProperty) }(window), function (a, b) { function c(a, b) { return a[h](b) } function d(a) { if (!a.parentNode) { var b = document.createDocumentFragment(); b.appendChild(a) } } function e(a, b) { d(a); for (var c = a.parentNode.querySelectorAll(b), e = 0, f = c.length; f > e; e++) if (c[e] === a) return !0; return !1 } function f(a, b) { return d(a), c(a, b) } var g, h = function () { if (b.matchesSelector) return "matchesSelector"; for (var a = ["webkit", "moz", "ms", "o"], c = 0, d = a.length; d > c; c++) { var e = a[c], f = e + "MatchesSelector"; if (b[f]) return f } }(); if (h) { var i = document.createElement("div"), j = c(i, "div"); g = j ? c : f } else g = e; "function" == typeof define && define.amd ? define("matches-selector/matches-selector", [], function () { return g }) : window.matchesSelector = g }(this, Element.prototype), function (a) { function b(a, b) { for (var c in b) a[c] = b[c]; return a } function c(a) { for (var b in a) return !1; return b = null, !0 } function d(a) { return a.replace(/([A-Z])/g, function (a) { return "-" + a.toLowerCase() }) } function e(a, e, f) { function h(a, b) { a && (this.element = a, this.layout = b, this.position = { x: 0, y: 0 }, this._create()) } var i = f("transition"), j = f("transform"), k = i && j, l = !!f("perspective"), m = { WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "otransitionend", transition: "transitionend" }[i], n = ["transform", "transition", "transitionDuration", "transitionProperty"], o = function () { for (var a = {}, b = 0, c = n.length; c > b; b++) { var d = n[b], e = f(d); e && e !== d && (a[d] = e) } return a }(); b(h.prototype, a.prototype), h.prototype._create = function () { this._transn = { ingProperties: {}, clean: {}, onEnd: {} }, this.css({ position: "absolute" }) }, h.prototype.handleEvent = function (a) { var b = "on" + a.type; this[b] && this[b](a) }, h.prototype.getSize = function () { this.size = e(this.element) }, h.prototype.css = function (a) { var b = this.element.style; for (var c in a) { var d = o[c] || c; b[d] = a[c] } }, h.prototype.getPosition = function () { var a = g(this.element), b = this.layout.options, c = b.isOriginLeft, d = b.isOriginTop, e = parseInt(a[c ? "left" : "right"], 10), f = parseInt(a[d ? "top" : "bottom"], 10); e = isNaN(e) ? 0 : e, f = isNaN(f) ? 0 : f; var h = this.layout.size; e -= c ? h.paddingLeft : h.paddingRight, f -= d ? h.paddingTop : h.paddingBottom, this.position.x = e, this.position.y = f }, h.prototype.layoutPosition = function () { var a = this.layout.size, b = this.layout.options, c = {}; b.isOriginLeft ? (c.left = this.position.x + a.paddingLeft + "px", c.right = "") : (c.right = this.position.x + a.paddingRight + "px", c.left = ""), b.isOriginTop ? (c.top = this.position.y + a.paddingTop + "px", c.bottom = "") : (c.bottom = this.position.y + a.paddingBottom + "px", c.top = ""), this.css(c), this.emitEvent("layout", [this]) }; var p = l ? function (a, b) { return "translate3d(" + a + "px, " + b + "px, 0)" } : function (a, b) { return "translate(" + a + "px, " + b + "px)" }; h.prototype._transitionTo = function (a, b) { this.getPosition(); var c = this.position.x, d = this.position.y, e = parseInt(a, 10), f = parseInt(b, 10), g = e === this.position.x && f === this.position.y; if (this.setPosition(a, b), g && !this.isTransitioning) return void this.layoutPosition(); var h = a - c, i = b - d, j = {}, k = this.layout.options; h = k.isOriginLeft ? h : -h, i = k.isOriginTop ? i : -i, j.transform = p(h, i), this.transition({ to: j, onTransitionEnd: { transform: this.layoutPosition }, isCleaning: !0 }) }, h.prototype.goTo = function (a, b) { this.setPosition(a, b), this.layoutPosition() }, h.prototype.moveTo = k ? h.prototype._transitionTo : h.prototype.goTo, h.prototype.setPosition = function (a, b) { this.position.x = parseInt(a, 10), this.position.y = parseInt(b, 10) }, h.prototype._nonTransition = function (a) { this.css(a.to), a.isCleaning && this._removeStyles(a.to); for (var b in a.onTransitionEnd) a.onTransitionEnd[b].call(this) }, h.prototype._transition = function (a) { if (!parseFloat(this.layout.options.transitionDuration)) return void this._nonTransition(a); var b = this._transn; for (var c in a.onTransitionEnd) b.onEnd[c] = a.onTransitionEnd[c]; for (c in a.to) b.ingProperties[c] = !0, a.isCleaning && (b.clean[c] = !0); if (a.from) { this.css(a.from); var d = this.element.offsetHeight; d = null } this.enableTransition(a.to), this.css(a.to), this.isTransitioning = !0 }; var q = j && d(j) + ",opacity"; h.prototype.enableTransition = function () { this.isTransitioning || (this.css({ transitionProperty: q, transitionDuration: this.layout.options.transitionDuration }), this.element.addEventListener(m, this, !1)) }, h.prototype.transition = h.prototype[i ? "_transition" : "_nonTransition"], h.prototype.onwebkitTransitionEnd = function (a) { this.ontransitionend(a) }, h.prototype.onotransitionend = function (a) { this.ontransitionend(a) }; var r = { "-webkit-transform": "transform", "-moz-transform": "transform", "-o-transform": "transform" }; h.prototype.ontransitionend = function (a) { if (a.target === this.element) { var b = this._transn, d = r[a.propertyName] || a.propertyName; if (delete b.ingProperties[d], c(b.ingProperties) && this.disableTransition(), d in b.clean && (this.element.style[a.propertyName] = "", delete b.clean[d]), d in b.onEnd) { var e = b.onEnd[d]; e.call(this), delete b.onEnd[d] } this.emitEvent("transitionEnd", [this]) } }, h.prototype.disableTransition = function () { this.removeTransitionStyles(), this.element.removeEventListener(m, this, !1), this.isTransitioning = !1 }, h.prototype._removeStyles = function (a) { var b = {}; for (var c in a) b[c] = ""; this.css(b) }; var s = { transitionProperty: "", transitionDuration: "" }; return h.prototype.removeTransitionStyles = function () { this.css(s) }, h.prototype.removeElem = function () { this.element.parentNode.removeChild(this.element), this.emitEvent("remove", [this]) }, h.prototype.remove = function () { if (!i || !parseFloat(this.layout.options.transitionDuration)) return void this.removeElem(); var a = this; this.on("transitionEnd", function () { return a.removeElem(), !0 }), this.hide() }, h.prototype.reveal = function () { delete this.isHidden, this.css({ display: "" }); var a = this.layout.options; this.transition({ from: a.hiddenStyle, to: a.visibleStyle, isCleaning: !0 }) }, h.prototype.hide = function () { this.isHidden = !0, this.css({ display: "" }); var a = this.layout.options; this.transition({ from: a.visibleStyle, to: a.hiddenStyle, isCleaning: !0, onTransitionEnd: { opacity: function () { this.isHidden && this.css({ display: "none" }) } } }) }, h.prototype.destroy = function () { this.css({ position: "", left: "", right: "", top: "", bottom: "", transition: "", transform: "" }) }, h } var f = document.defaultView, g = f && f.getComputedStyle ? function (a) { return f.getComputedStyle(a, null) } : function (a) { return a.currentStyle }; "function" == typeof define && define.amd ? define("outlayer/item", ["eventEmitter/EventEmitter", "get-size/get-size", "get-style-property/get-style-property"], e) : (a.Outlayer = {}, a.Outlayer.Item = e(a.EventEmitter, a.getSize, a.getStyleProperty)) }(window), function (a) { function b(a, b) { for (var c in b) a[c] = b[c]; return a } function c(a) { return "[object Array]" === l.call(a) } function d(a) { var b = []; if (c(a)) b = a; else if (a && "number" == typeof a.length) for (var d = 0, e = a.length; e > d; d++) b.push(a[d]); else b.push(a); return b } function e(a, b) { var c = n(b, a); -1 !== c && b.splice(c, 1) } function f(a) { return a.replace(/(.)([A-Z])/g, function (a, b, c) { return b + "-" + c }).toLowerCase() } function g(c, g, l, n, o, p) { function q(a, c) { if ("string" == typeof a && (a = h.querySelector(a)), !a || !m(a)) return void (i && i.error("Bad " + this.constructor.namespace + " element: " + a)); this.element = a, this.options = b({}, this.options), this.option(c); var d = ++s; this.element.outlayerGUID = d, t[d] = this, this._create(), this.options.isInitLayout && this.layout() } function r(a, c) { a.prototype[c] = b({}, q.prototype[c]) } var s = 0, t = {}; return q.namespace = "outlayer", q.Item = p, q.prototype.options = { containerStyle: { position: "relative" }, isInitLayout: !0, isOriginLeft: !0, isOriginTop: !0, isResizeBound: !0, transitionDuration: "0.4s", hiddenStyle: { opacity: 0, transform: "scale(0.001)" }, visibleStyle: { opacity: 1, transform: "scale(1)" } }, b(q.prototype, l.prototype), q.prototype.option = function (a) { b(this.options, a) }, q.prototype._create = function () { this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), b(this.element.style, this.options.containerStyle), this.options.isResizeBound && this.bindResize() }, q.prototype.reloadItems = function () { this.items = this._itemize(this.element.children) }, q.prototype._itemize = function (a) { for (var b = this._filterFindItemElements(a), c = this.constructor.Item, d = [], e = 0, f = b.length; f > e; e++) { var g = b[e], h = new c(g, this); d.push(h) } return d }, q.prototype._filterFindItemElements = function (a) { a = d(a); for (var b = this.options.itemSelector, c = [], e = 0, f = a.length; f > e; e++) { var g = a[e]; if (m(g)) if (b) { o(g, b) && c.push(g); for (var h = g.querySelectorAll(b), i = 0, j = h.length; j > i; i++) c.push(h[i]) } else c.push(g) } return c }, q.prototype.getItemElements = function () { for (var a = [], b = 0, c = this.items.length; c > b; b++) a.push(this.items[b].element); return a }, q.prototype.layout = function () { this._resetLayout(), this._manageStamps(); var a = void 0 !== this.options.isLayoutInstant ? this.options.isLayoutInstant : !this._isLayoutInited; this.layoutItems(this.items, a), this._isLayoutInited = !0 }, q.prototype._init = q.prototype.layout, q.prototype._resetLayout = function () { this.getSize() }, q.prototype.getSize = function () { this.size = n(this.element) }, q.prototype._getMeasurement = function (a, b) { var c, d = this.options[a]; d ? ("string" == typeof d ? c = this.element.querySelector(d) : m(d) && (c = d), this[a] = c ? n(c)[b] : d) : this[a] = 0 }, q.prototype.layoutItems = function (a, b) { a = this._getItemsForLayout(a), this._layoutItems(a, b), this._postLayout() }, q.prototype._getItemsForLayout = function (a) { for (var b = [], c = 0, d = a.length; d > c; c++) { var e = a[c]; e.isIgnored || b.push(e) } return b }, q.prototype._layoutItems = function (a, b) { function c() { d.emitEvent("layoutComplete", [d, a]) } var d = this; if (!a || !a.length) return void c(); this._itemsOn(a, "layout", c); for (var e = [], f = 0, g = a.length; g > f; f++) { var h = a[f], i = this._getItemLayoutPosition(h); i.item = h, i.isInstant = b || h.isLayoutInstant, e.push(i) } this._processLayoutQueue(e) }, q.prototype._getItemLayoutPosition = function () { return { x: 0, y: 0 } }, q.prototype._processLayoutQueue = function (a) { for (var b = 0, c = a.length; c > b; b++) { var d = a[b]; this._positionItem(d.item, d.x, d.y, d.isInstant) } }, q.prototype._positionItem = function (a, b, c, d) { d ? a.goTo(b, c) : a.moveTo(b, c) }, q.prototype._postLayout = function () { var a = this._getContainerSize(); a && (this._setContainerMeasure(a.width, !0), this._setContainerMeasure(a.height, !1)) }, q.prototype._getContainerSize = k, q.prototype._setContainerMeasure = function (a, b) { if (void 0 !== a) { var c = this.size; c.isBorderBox && (a += b ? c.paddingLeft + c.paddingRight + c.borderLeftWidth + c.borderRightWidth : c.paddingBottom + c.paddingTop + c.borderTopWidth + c.borderBottomWidth), a = Math.max(a, 0), this.element.style[b ? "width" : "height"] = a + "px" } }, q.prototype._itemsOn = function (a, b, c) { function d() { return e++, e === f && c.call(g), !0 } for (var e = 0, f = a.length, g = this, h = 0, i = a.length; i > h; h++) { var j = a[h]; j.on(b, d) } }, q.prototype.ignore = function (a) { var b = this.getItem(a); b && (b.isIgnored = !0) }, q.prototype.unignore = function (a) { var b = this.getItem(a); b && delete b.isIgnored }, q.prototype.stamp = function (a) { if (a = this._find(a)) { this.stamps = this.stamps.concat(a); for (var b = 0, c = a.length; c > b; b++) { var d = a[b]; this.ignore(d) } } }, q.prototype.unstamp = function (a) { if (a = this._find(a)) for (var b = 0, c = a.length; c > b; b++) { var d = a[b]; e(d, this.stamps), this.unignore(d) } }, q.prototype._find = function (a) { return a ? ("string" == typeof a && (a = this.element.querySelectorAll(a)), a = d(a)) : void 0 }, q.prototype._manageStamps = function () { if (this.stamps && this.stamps.length) { this._getBoundingRect(); for (var a = 0, b = this.stamps.length; b > a; a++) { var c = this.stamps[a]; this._manageStamp(c) } } }, q.prototype._getBoundingRect = function () { var a = this.element.getBoundingClientRect(), b = this.size; this._boundingRect = { left: a.left + b.paddingLeft + b.borderLeftWidth, top: a.top + b.paddingTop + b.borderTopWidth, right: a.right - (b.paddingRight + b.borderRightWidth), bottom: a.bottom - (b.paddingBottom + b.borderBottomWidth) } }, q.prototype._manageStamp = k, q.prototype._getElementOffset = function (a) { var b = a.getBoundingClientRect(), c = this._boundingRect, d = n(a), e = { left: b.left - c.left - d.marginLeft, top: b.top - c.top - d.marginTop, right: c.right - b.right - d.marginRight, bottom: c.bottom - b.bottom - d.marginBottom }; return e }, q.prototype.handleEvent = function (a) { var b = "on" + a.type; this[b] && this[b](a) }, q.prototype.bindResize = function () { this.isResizeBound || (c.bind(a, "resize", this), this.isResizeBound = !0) }, q.prototype.unbindResize = function () { c.unbind(a, "resize", this), this.isResizeBound = !1 }, q.prototype.onresize = function () { function a() { b.resize(), delete b.resizeTimeout } this.resizeTimeout && clearTimeout(this.resizeTimeout); var b = this; this.resizeTimeout = setTimeout(a, 100) }, q.prototype.resize = function () { var a = n(this.element), b = this.size && a; b && a.innerWidth === this.size.innerWidth || this.layout() }, q.prototype.addItems = function (a) { var b = this._itemize(a); return b.length && (this.items = this.items.concat(b)), b }, q.prototype.appended = function (a) { var b = this.addItems(a); b.length && (this.layoutItems(b, !0), this.reveal(b)) }, q.prototype.prepended = function (a) { var b = this._itemize(a); if (b.length) { var c = this.items.slice(0); this.items = b.concat(c), this._resetLayout(), this._manageStamps(), this.layoutItems(b, !0), this.reveal(b), this.layoutItems(c) } }, q.prototype.reveal = function (a) { var b = a && a.length; if (b) for (var c = 0; b > c; c++) { var d = a[c]; d.reveal() } }, q.prototype.hide = function (a) { var b = a && a.length; if (b) for (var c = 0; b > c; c++) { var d = a[c]; d.hide() } }, q.prototype.getItem = function (a) { for (var b = 0, c = this.items.length; c > b; b++) { var d = this.items[b]; if (d.element === a) return d } }, q.prototype.getItems = function (a) { if (a && a.length) { for (var b = [], c = 0, d = a.length; d > c; c++) { var e = a[c], f = this.getItem(e); f && b.push(f) } return b } }, q.prototype.remove = function (a) { a = d(a); var b = this.getItems(a); if (b && b.length) { this._itemsOn(b, "remove", function () { this.emitEvent("removeComplete", [this, b]) }); for (var c = 0, f = b.length; f > c; c++) { var g = b[c]; g.remove(), e(g, this.items) } } }, q.prototype.destroy = function () { var a = this.element.style; a.height = "", a.position = "", a.width = ""; for (var b = 0, c = this.items.length; c > b; b++) { var d = this.items[b]; d.destroy() } this.unbindResize(), delete this.element.outlayerGUID, j && j.removeData(this.element, this.constructor.namespace) }, q.data = function (a) { var b = a && a.outlayerGUID; return b && t[b] }, q.create = function (a, c) { function d() { q.apply(this, arguments) } return Object.create ? d.prototype = Object.create(q.prototype) : b(d.prototype, q.prototype), d.prototype.constructor = d, r(d, "options"), b(d.prototype.options, c), d.namespace = a, d.data = q.data, d.Item = function () { p.apply(this, arguments) }, d.Item.prototype = new p, g(function () { for (var b = f(a), c = h.querySelectorAll(".js-" + b), e = "data-" + b + "-options", g = 0, k = c.length; k > g; g++) { var l, m = c[g], n = m.getAttribute(e); try { l = n && JSON.parse(n) } catch (o) { i && i.error("Error parsing " + e + " on " + m.nodeName.toLowerCase() + (m.id ? "#" + m.id : "") + ": " + o); continue } var p = new d(m, l); j && j.data(m, a, p) } }), j && j.bridget && j.bridget(a, d), d }, q.Item = p, q } var h = a.document, i = a.console, j = a.jQuery, k = function () { }, l = Object.prototype.toString, m = "object" == typeof HTMLElement ? function (a) { return a instanceof HTMLElement } : function (a) { return a && "object" == typeof a && 1 === a.nodeType && "string" == typeof a.nodeName }, n = Array.prototype.indexOf ? function (a, b) { return a.indexOf(b) } : function (a, b) { for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return c; return -1 }; "function" == typeof define && define.amd ? define("outlayer/outlayer", ["eventie/eventie", "doc-ready/doc-ready", "eventEmitter/EventEmitter", "get-size/get-size", "matches-selector/matches-selector", "./item"], g) : a.Outlayer = g(a.eventie, a.docReady, a.EventEmitter, a.getSize, a.matchesSelector, a.Outlayer.Item) }(window), function (a) { function b(a, b) { var d = a.create("masonry"); return d.prototype._resetLayout = function () { this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), this.measureColumns(); var a = this.cols; for (this.colYs = []; a--;) this.colYs.push(0); this.maxY = 0 }, d.prototype.measureColumns = function () { if (this.getContainerWidth(), !this.columnWidth) { var a = this.items[0], c = a && a.element; this.columnWidth = c && b(c).outerWidth || this.containerWidth } this.columnWidth += this.gutter, this.cols = Math.floor((this.containerWidth + this.gutter) / this.columnWidth), this.cols = Math.max(this.cols, 1) }, d.prototype.getContainerWidth = function () { var a = this.options.isFitWidth ? this.element.parentNode : this.element, c = b(a); this.containerWidth = c && c.innerWidth }, d.prototype._getItemLayoutPosition = function (a) { a.getSize(); var b = a.size.outerWidth % this.columnWidth, d = b && 1 > b ? "round" : "ceil", e = Math[d](a.size.outerWidth / this.columnWidth); e = Math.min(e, this.cols); for (var f = this._getColGroup(e), g = Math.min.apply(Math, f), h = c(f, g), i = { x: this.columnWidth * h, y: g }, j = g + a.size.outerHeight, k = this.cols + 1 - f.length, l = 0; k > l; l++) this.colYs[h + l] = j; return i }, d.prototype._getColGroup = function (a) { if (2 > a) return this.colYs; for (var b = [], c = this.cols + 1 - a, d = 0; c > d; d++) { var e = this.colYs.slice(d, d + a); b[d] = Math.max.apply(Math, e) } return b }, d.prototype._manageStamp = function (a) { var c = b(a), d = this._getElementOffset(a), e = this.options.isOriginLeft ? d.left : d.right, f = e + c.outerWidth, g = Math.floor(e / this.columnWidth); g = Math.max(0, g); var h = Math.floor(f / this.columnWidth); h -= f % this.columnWidth ? 0 : 1, h = Math.min(this.cols - 1, h); for (var i = (this.options.isOriginTop ? d.top : d.bottom) + c.outerHeight, j = g; h >= j; j++) this.colYs[j] = Math.max(i, this.colYs[j]) }, d.prototype._getContainerSize = function () { this.maxY = Math.max.apply(Math, this.colYs); var a = { height: this.maxY }; return this.options.isFitWidth && (a.width = this._getContainerFitWidth()), a }, d.prototype._getContainerFitWidth = function () { for (var a = 0, b = this.cols; --b && 0 === this.colYs[b];) a++; return (this.cols - a) * this.columnWidth - this.gutter }, d.prototype.resize = function () { var a = this.containerWidth; this.getContainerWidth(), a !== this.containerWidth && this.layout() }, d } var c = Array.prototype.indexOf ? function (a, b) { return a.indexOf(b) } : function (a, b) { for (var c = 0, d = a.length; d > c; c++) { var e = a[c]; if (e === b) return c } return -1 }; "function" == typeof define && define.amd ? define(["outlayer/outlayer", "get-size/get-size"], b) : a.Masonry = b(a.Outlayer, a.getSize) }(window), Saatchi.Modal = function (a) { "use strict"; return { api: null, title: null, content: null, viewport: a(window), "class": "", url: null, type: "GET", data: {}, onRender: function () { }, onVisible: function () { }, onHide: function () { }, init: function () { var b = a("body").qtip({ content: { text: Saatchi.Modal.content ? Saatchi.Modal.content : "Loading...", title: { text: Saatchi.Modal.title ? "<h2>" + Saatchi.Modal.title + "</h2>" : " ", button: "Close" }, ajax: { url: Saatchi.Modal.url, type: Saatchi.Modal.type, data: Saatchi.Modal.data, success: function (a, b) { var c = a.content ? a.content : a; this.set("content.text", c) }, loading: !1 } }, position: { my: "center", at: "center", target: a(window), viewport: Saatchi.Modal.viewport }, show: { event: !1, ready: !0, solo: !0, modal: !0 }, hide: !1, style: { classes: "ui-tooltip-modal ui-tooltip-shadow ui-tooltip-light " + Saatchi.Modal["class"], tip: { corner: !1 } }, events: { render: function () { a(this).find(".ui-tooltip-icon[title]").addClass("so-quick-tip"), Saatchi.Tips.init(), Saatchi.Modal.onRender() }, visible: function () { Saatchi.Modal.onVisible() }, hide: function () { a(this).qtip("destroy"), Saatchi.Modal.url = null, Saatchi.Modal.content = null, Saatchi.Modal.onHide() } } }); Saatchi.Modal.api = b.qtip("api") } } }(jQuery), Saatchi.Multiselect = function (a) { "undefined" == typeof a.fn.each2 && a.fn.extend({ each2: function (b) { for (var c = a([0]), d = -1, e = this.length; ++d < e && (c.context = c[0] = this[d]) && b.call(c[0], d, c) !== !1;); return this } }) }(jQuery), function (a, b) {
    "use strict"; function c(a, b) { for (var c = 0, d = b.length; d > c; c += 1) if (e(a, b[c])) return c; return -1 } function d() { var b = a(K); b.appendTo("body"); var c = { width: b.width() - b[0].clientWidth, height: b.height() - b[0].clientHeight }; return b.remove(), c } function e(a, c) { return a === c ? !0 : a === b || c === b ? !1 : null === a || null === c ? !1 : a.constructor === String ? a + "" == c + "" : c.constructor === String ? c + "" == a + "" : !1 } function f(b, c) { var d, e, f; if (null === b || b.length < 1) return []; for (d = b.split(c), e = 0, f = d.length; f > e; e += 1) d[e] = a.trim(d[e]); return d } function g(a) { return a.outerWidth(!1) - a.width() } function h(c) { var d = "keyup-change-value"; c.on("keydown", function () { a.data(c, d) === b && a.data(c, d, c.val()) }), c.on("keyup", function () { var e = a.data(c, d); e !== b && c.val() !== e && (a.removeData(c, d), c.trigger("keyup-change")) }) } function i(c) { c.on("mousemove", function (c) { var d = H; (d === b || d.x !== c.pageX || d.y !== c.pageY) && a(c.target).trigger("mousemove-filtered", c) }) } function j(a, c, d) { d = d || b; var e; return function () { var b = arguments; window.clearTimeout(e), e = window.setTimeout(function () { c.apply(d, b) }, a) } } function k(a) { var b, c = !1; return function () { return c === !1 && (b = a(), c = !0), b } } function l(a, b) { var d = j(a, function (a) { b.trigger("scroll-debounced", a) }); b.on("scroll", function (a) { c(a.target, b.get()) >= 0 && d(a) }) } function m(a) { a[0] !== document.activeElement && window.setTimeout(function () { var b, c = a[0], d = a.val().length; a.focus(), a.is(":visible") && c === document.activeElement && (c.setSelectionRange ? c.setSelectionRange(d, d) : c.createTextRange && (b = c.createTextRange(), b.collapse(!1), b.select())) }, 0) } function n(b) {
        b = a(b)[0]; var c = 0, d = 0; if ("selectionStart" in b) c = b.selectionStart, d = b.selectionEnd - c; else if ("selection" in document) {
            b.focus(); var e = document.selection.createRange();
            d = document.selection.createRange().text.length, e.moveStart("character", -b.value.length), c = e.text.length - d
        } return { offset: c, length: d }
    } function o(a) { a.preventDefault(), a.stopPropagation() } function p(a) { a.preventDefault(), a.stopImmediatePropagation() } function q(b) { if (!G) { var c = b[0].currentStyle || window.getComputedStyle(b[0], null); G = a(document.createElement("div")).css({ position: "absolute", left: "-10000px", top: "-10000px", display: "none", fontSize: c.fontSize, fontFamily: c.fontFamily, fontStyle: c.fontStyle, fontWeight: c.fontWeight, letterSpacing: c.letterSpacing, textTransform: c.textTransform, whiteSpace: "nowrap" }), G.attr("class", "select2-sizer"), a("body").append(G) } return G.text(b.val()), G.width() } function r(b, c, d) { var e, f, g = []; e = b.attr("class"), e && (e = "" + e, a(e.split(" ")).each2(function () { 0 === this.indexOf("select2-") && g.push(this) })), e = c.attr("class"), e && (e = "" + e, a(e.split(" ")).each2(function () { 0 !== this.indexOf("select2-") && (f = d(this), f && g.push(this)) })), b.attr("class", g.join(" ")) } function s(a, b, c, d) { var e = a.toUpperCase().indexOf(b.toUpperCase()), f = b.length; return 0 > e ? void c.push(d(a)) : (c.push(d(a.substring(0, e))), c.push("<span class='select2-match'>"), c.push(d(a.substring(e, e + f))), c.push("</span>"), void c.push(d(a.substring(e + f, a.length)))) } function t(c) { var d, e = 0, f = null, g = c.quietMillis || 100, h = c.url, i = this; return function (j) { window.clearTimeout(d), d = window.setTimeout(function () { e += 1; var d = e, g = c.data, k = h, l = c.transport || a.fn.select2.ajaxDefaults.transport, m = { type: c.type || "GET", cache: c.cache || !1, jsonpCallback: c.jsonpCallback || b, dataType: c.dataType || "json" }, n = a.extend({}, a.fn.select2.ajaxDefaults.params, m); g = g ? g.call(i, j.term, j.page, j.context) : null, k = "function" == typeof k ? k.call(i, j.term, j.page, j.context) : k, null !== f && f.abort(), c.params && (a.isFunction(c.params) ? a.extend(n, c.params.call(i)) : a.extend(n, c.params)), a.extend(n, { url: k, dataType: c.dataType, data: g, success: function (a) { if (!(e > d)) { var b = c.results(a, j.page); j.callback(b) } } }), f = l.call(i, n) }, g) } } function u(b) { var c, d, e = b, f = function (a) { return "" + a.text }; a.isArray(e) && (d = e, e = { results: d }), a.isFunction(e) === !1 && (d = e, e = function () { return d }); var g = e(); return g.text && (f = g.text, a.isFunction(f) || (c = g.text, f = function (a) { return a[c] })), function (b) { var c, d = b.term, g = { results: [] }; return "" === d ? void b.callback(e()) : (c = function (e, g) { var h, i; if (e = e[0], e.children) { h = {}; for (i in e) e.hasOwnProperty(i) && (h[i] = e[i]); h.children = [], a(e.children).each2(function (a, b) { c(b, h.children) }), (h.children.length || b.matcher(d, f(h), e)) && g.push(h) } else b.matcher(d, f(e), e) && g.push(e) }, a(e().results).each2(function (a, b) { c(b, g.results) }), void b.callback(g)) } } function v(c) { var d = a.isFunction(c); return function (e) { var f = e.term, g = { results: [] }; a(d ? c() : c).each(function () { var a = this.text !== b, c = a ? this.text : this; ("" === f || e.matcher(f, c)) && g.results.push(a ? this : { id: this, text: this }) }), e.callback(g) } } function w(b, c) { if (a.isFunction(b)) return !0; if (!b) return !1; throw new Error("formatterName must be a function or a falsy value") } function x(b) { return a.isFunction(b) ? b() : b } function y(b) { var c = 0; return a.each(b, function (a, b) { b.children ? c += y(b.children) : c++ }), c } function z(a, c, d, f) { var g, h, i, j, k, l = a, m = !1; if (!f.createSearchChoice || !f.tokenSeparators || f.tokenSeparators.length < 1) return b; for (; ;) { for (h = -1, i = 0, j = f.tokenSeparators.length; j > i && (k = f.tokenSeparators[i], h = a.indexOf(k), !(h >= 0)) ; i++); if (0 > h) break; if (g = a.substring(0, h), a = a.substring(h + k.length), g.length > 0 && (g = f.createSearchChoice(g, c), g !== b && null !== g && f.id(g) !== b && null !== f.id(g))) { for (m = !1, i = 0, j = c.length; j > i; i++) if (e(f.id(g), f.id(c[i]))) { m = !0; break } m || d(g) } } return l !== a ? a : void 0 } function A(b, c) { var d = function () { }; return d.prototype = new b, d.prototype.constructor = d, d.prototype.parent = b.prototype, d.prototype = a.extend(d.prototype, c), d } if (window.Select2 === b) {
        var B, C, D, E, F, G, H, I, J, B = { TAB: 9, ENTER: 13, ESC: 27, SPACE: 32, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, SHIFT: 16, CTRL: 17, ALT: 18, PAGE_UP: 33, PAGE_DOWN: 34, HOME: 36, END: 35, BACKSPACE: 8, DELETE: 46, isArrow: function (a) { switch (a = a.which ? a.which : a) { case B.LEFT: case B.RIGHT: case B.UP: case B.DOWN: return !0 } return !1 }, isControl: function (a) { var b = a.which; switch (b) { case B.SHIFT: case B.CTRL: case B.ALT: return !0 } return a.metaKey ? !0 : !1 }, isFunctionKey: function (a) { return a = a.which ? a.which : a, a >= 112 && 123 >= a } }, K = "<div class='select2-measure-scrollbar'></div>"; I = a(document), F = function () { var a = 1; return function () { return a++ } }(), I.on("mousemove", function (a) { H = { x: a.pageX, y: a.pageY } }), C = A(Object, { bind: function (a) { var b = this; return function () { a.apply(b, arguments) } }, init: function (c) { var e, f, g, j, m = ".select2-results"; this.opts = c = this.prepareOpts(c), this.id = c.id, c.element.data("select2") !== b && null !== c.element.data("select2") && this.destroy(), this.container = this.createContainer(), this.containerId = "s2id_" + (c.element.attr("id") || "autogen" + F()), this.containerSelector = "#" + this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1"), this.container.attr("id", this.containerId), this.body = k(function () { return c.element.closest("body") }), r(this.container, this.opts.element, this.opts.adaptContainerCssClass), this.container.css(x(c.containerCss)), this.container.addClass(x(c.containerCssClass)), this.elementTabIndex = this.opts.element.attr("tabindex"), this.opts.element.data("select2", this).attr("tabindex", "-1").before(this.container), this.container.data("select2", this), this.dropdown = this.container.find(".select2-drop"), this.dropdown.addClass(x(c.dropdownCssClass)), this.dropdown.data("select2", this), this.results = e = this.container.find(m), this.search = f = this.container.find("input.select2-input"), this.resultsPage = 0, this.context = null, this.initContainer(), i(this.results), this.dropdown.on("mousemove-filtered touchstart touchmove touchend", m, this.bind(this.highlightUnderEvent)), l(80, this.results), this.dropdown.on("scroll-debounced", m, this.bind(this.loadMoreIfNeeded)), a(this.container).on("change", ".select2-input", function (a) { a.stopPropagation() }), a(this.dropdown).on("change", ".select2-input", function (a) { a.stopPropagation() }), a.fn.mousewheel && e.mousewheel(function (a, b, c, d) { var f = e.scrollTop(); d > 0 && 0 >= f - d ? (e.scrollTop(0), o(a)) : 0 > d && e.get(0).scrollHeight - e.scrollTop() + d <= e.height() && (e.scrollTop(e.get(0).scrollHeight - e.height()), o(a)) }), h(f), f.on("keyup-change input paste", this.bind(this.updateResults)), f.on("focus", function () { f.addClass("select2-focused") }), f.on("blur", function () { f.removeClass("select2-focused") }), this.dropdown.on("click mousedown", m, this.bind(function (b) { a(b.target).closest(".select2-result-selectable").length > 0 && (this.highlightUnderEvent(b), this.selectHighlighted(b)) })), this.dropdown.on("click mouseup mousedown", function (a) { a.stopPropagation() }), a.isFunction(this.opts.initSelection) && (this.initSelection(), this.monitorSource()), null !== c.maximumInputLength && this.search.attr("maxlength", c.maximumInputLength); var g = c.element.prop("disabled"); g === b && (g = !1), this.enable(!g); var j = c.element.prop("readonly"); j === b && (j = !1), this.readonly(j), J = J || d(), this.autofocus = c.element.prop("autofocus"), c.element.prop("autofocus", !1), this.autofocus && this.focus() }, destroy: function () { var a = this.opts.element.data("select2"); this.propertyObserver && (delete this.propertyObserver, this.propertyObserver = null), a !== b && (a.container.remove(), a.dropdown.remove(), a.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({ tabindex: this.elementTabIndex }).prop("autofocus", this.autofocus || !1).show()) }, optionToData: function (a) { return a.is("option") ? { id: a.prop("value"), text: a.text(), element: a.get(), css: a.attr("class"), disabled: a.prop("disabled"), locked: e(a.attr("locked"), "locked") } : a.is("optgroup") ? { text: a.attr("label"), children: [], element: a.get(), css: a.attr("class") } : void 0 }, prepareOpts: function (c) { var d, g, h, i, j = this; if (d = c.element, "select" === d.get(0).tagName.toLowerCase() && (this.select = g = c.element), g && a.each(["id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags"], function () { if (this in c) throw new Error("Option '" + this + "' is not allowed for Select2 when attached to a <select> element.") }), c = a.extend({}, { populateResults: function (d, e, f) { var g, h = this.opts.id; (g = function (d, e, i) { var k, l, m, n, o, p, q, r, s, t; for (d = c.sortResults(d, e, f), k = 0, l = d.length; l > k; k += 1) m = d[k], o = m.disabled === !0, n = !o && h(m) !== b, p = m.children && m.children.length > 0, q = a("<li></li>"), q.addClass("select2-results-dept-" + i), q.addClass("select2-result"), q.addClass(n ? "select2-result-selectable" : "select2-result-unselectable"), o && q.addClass("select2-disabled"), p && q.addClass("select2-result-with-children"), q.addClass(j.opts.formatResultCssClass(m)), r = a(document.createElement("div")), r.addClass("select2-result-label"), t = c.formatResult(m, r, f, j.opts.escapeMarkup), t !== b && r.html(t), q.append(r), p && (s = a("<ul></ul>"), s.addClass("select2-result-sub"), g(m.children, s, i + 1), q.append(s)), q.data("select2-data", m), e.append(q) })(e, d, 0) } }, a.fn.select2.defaults, c), "function" != typeof c.id && (h = c.id, c.id = function (a) { return a[h] }), a.isArray(c.element.data("select2Tags"))) { if ("tags" in c) throw "tags specified as both an attribute 'data-select2-tags' and in options of Select2 " + c.element.attr("id"); c.tags = c.element.data("select2Tags") } if (g ? (c.query = this.bind(function (c) { var e, f, g, h = { results: [], more: !1 }, i = c.term; g = function (a, b) { var d; a.is("option") ? c.matcher(i, a.text(), a) && b.push(j.optionToData(a)) : a.is("optgroup") && (d = j.optionToData(a), a.children().each2(function (a, b) { g(b, d.children) }), d.children.length > 0 && b.push(d)) }, e = d.children(), this.getPlaceholder() !== b && e.length > 0 && (f = e[0], "" === a(f).text() && (e = e.not(f))), e.each2(function (a, b) { g(b, h.results) }), c.callback(h) }), c.id = function (a) { return a.id }, c.formatResultCssClass = function (a) { return a.css }) : "query" in c || ("ajax" in c ? (i = c.element.data("ajax-url"), i && i.length > 0 && (c.ajax.url = i), c.query = t.call(c.element, c.ajax)) : "data" in c ? c.query = u(c.data) : "tags" in c && (c.query = v(c.tags), c.createSearchChoice === b && (c.createSearchChoice = function (a) { return { id: a, text: a } }), c.initSelection === b && (c.initSelection = function (b, d) { var g = []; a(f(b.val(), c.separator)).each(function () { var b = this, d = this, f = c.tags; a.isFunction(f) && (f = f()), a(f).each(function () { return e(this.id, b) ? (d = this.text, !1) : void 0 }), g.push({ id: b, text: d }) }), d(g) }))), "function" != typeof c.query) throw "query function not defined for Select2 " + c.element.attr("id"); return c }, monitorSource: function () { var a, c = this.opts.element; c.on("change.select2", this.bind(function (a) { this.opts.element.data("select2-change-triggered") !== !0 && this.initSelection() })), a = this.bind(function () { var a, d = c.prop("disabled"); d === b && (d = !1), this.enable(!d); var a = c.prop("readonly"); a === b && (a = !1), this.readonly(a), r(this.container, this.opts.element, this.opts.adaptContainerCssClass), this.container.addClass(x(this.opts.containerCssClass)), r(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass), this.dropdown.addClass(x(this.opts.dropdownCssClass)) }), c.on("propertychange.select2 DOMAttrModified.select2", a), this.mutationCallback === b && (this.mutationCallback = function (b) { b.forEach(a) }), "undefined" != typeof WebKitMutationObserver && (this.propertyObserver && (delete this.propertyObserver, this.propertyObserver = null), this.propertyObserver = new WebKitMutationObserver(this.mutationCallback), this.propertyObserver.observe(c.get(0), { attributes: !0, subtree: !1 })) }, triggerSelect: function (b) { var c = a.Event("select2-selecting", { val: this.id(b), object: b }); return this.opts.element.trigger(c), !c.isDefaultPrevented() }, triggerChange: function (b) { b = b || {}, b = a.extend({}, b, { type: "change", val: this.val() }), this.opts.element.data("select2-change-triggered", !0), this.opts.element.trigger(b), this.opts.element.data("select2-change-triggered", !1), this.opts.element.click(), this.opts.blurOnChange && this.opts.element.blur() }, isInterfaceEnabled: function () { return this.enabledInterface === !0 }, enableInterface: function () { var a = this._enabled && !this._readonly, b = !a; return a === this.enabledInterface ? !1 : (this.container.toggleClass("select2-container-disabled", b), this.close(), this.enabledInterface = a, !0) }, enable: function (a) { return a === b && (a = !0), this._enabled === a ? !1 : (this._enabled = a, this.opts.element.prop("disabled", !a), this.enableInterface(), !0) }, readonly: function (a) { return a === b && (a = !1), this._readonly === a ? !1 : (this._readonly = a, this.opts.element.prop("readonly", a), this.enableInterface(), !0) }, opened: function () { return this.container.hasClass("select2-dropdown-open") }, positionDropdown: function () { var b, c, d, e, f = this.dropdown, g = this.container.offset(), h = this.container.outerHeight(!1), i = this.container.outerWidth(!1), j = f.outerHeight(!1), k = a(window).scrollLeft() + a(window).width(), l = a(window).scrollTop() + a(window).height(), m = g.top + h, n = g.left, o = l >= m + j, p = g.top - j >= this.body().scrollTop(), q = f.outerWidth(!1), r = k >= n + q, s = f.hasClass("select2-drop-above"); this.opts.dropdownAutoWidth ? (e = a(".select2-results", f)[0], f.addClass("select2-drop-auto-width"), f.css("width", ""), q = f.outerWidth(!1) + (e.scrollHeight === e.clientHeight ? 0 : J.width), q > i ? i = q : q = i, r = k >= n + q) : this.container.removeClass("select2-drop-auto-width"), "static" !== this.body().css("position") && (b = this.body().offset(), m -= b.top, n -= b.left), s ? (c = !0, !p && o && (c = !1)) : (c = !1, !o && p && (c = !0)), r || (n = g.left + i - q), c ? (m = g.top - j, this.container.addClass("select2-drop-above"), f.addClass("select2-drop-above")) : (this.container.removeClass("select2-drop-above"), f.removeClass("select2-drop-above")), d = a.extend({ top: m, left: n, width: i }, x(this.opts.dropdownCss)), f.css(d) }, shouldOpen: function () { var b; return this.opened() ? !1 : this._enabled === !1 || this._readonly === !0 ? !1 : (b = a.Event("select2-opening"), this.opts.element.trigger(b), !b.isDefaultPrevented()) }, clearDropdownAlignmentPreference: function () { this.container.removeClass("select2-drop-above"), this.dropdown.removeClass("select2-drop-above") }, open: function () { return this.shouldOpen() ? (this.opening(), !0) : !1 }, opening: function () { function b() { return { width: Math.max(document.documentElement.scrollWidth, a(window).width()), height: Math.max(document.documentElement.scrollHeight, a(window).height()) } } var c, d = this.containerId, e = "scroll." + d, f = "resize." + d, g = "orientationchange." + d; this.container.addClass("select2-dropdown-open").addClass("select2-container-active"), this.clearDropdownAlignmentPreference(), this.dropdown[0] !== this.body().children().last()[0] && this.dropdown.detach().appendTo(this.body()), c = a("#select2-drop-mask"), 0 == c.length && (c = a(document.createElement("div")), c.attr("id", "select2-drop-mask").attr("class", "select2-drop-mask"), c.hide(), c.appendTo(this.body()), c.on("mousedown touchstart click", function (b) { var c, d = a("#select2-drop"); d.length > 0 && (c = d.data("select2"), c.opts.selectOnBlur && c.selectHighlighted({ noFocus: !0 }), c.close(), b.preventDefault(), b.stopPropagation()) })), this.dropdown.prev()[0] !== c[0] && this.dropdown.before(c), a("#select2-drop").removeAttr("id"), this.dropdown.attr("id", "select2-drop"), c.css(b()), c.show(), this.dropdown.show(), this.positionDropdown(), this.dropdown.addClass("select2-drop-active"), this.ensureHighlightVisible(); var h = this; this.container.parents().add(window).each(function () { a(this).on(f + " " + e + " " + g, function (c) { a("#select2-drop-mask").css(b()), h.positionDropdown() }) }) }, close: function () { if (this.opened()) { var b = this.containerId, c = "scroll." + b, d = "resize." + b, e = "orientationchange." + b; this.container.parents().add(window).each(function () { a(this).off(c).off(d).off(e) }), this.clearDropdownAlignmentPreference(), a("#select2-drop-mask").hide(), this.dropdown.removeAttr("id"), this.dropdown.hide(), this.container.removeClass("select2-dropdown-open"), this.results.empty(), this.clearSearch(), this.search.removeClass("select2-active"), this.opts.element.trigger(a.Event("select2-close")) } }, clearSearch: function () { }, getMaximumSelectionSize: function () { return x(this.opts.maximumSelectionSize) }, ensureHighlightVisible: function () { var b, c, d, e, f, g, h, i = this.results; if (c = this.highlight(), !(0 > c)) { if (0 == c) return void i.scrollTop(0); b = this.findHighlightableChoices().find(".select2-result-label"), d = a(b[c]), e = d.offset().top + d.outerHeight(!0), c === b.length - 1 && (h = i.find("li.select2-more-results"), h.length > 0 && (e = h.offset().top + h.outerHeight(!0))), f = i.offset().top + i.outerHeight(!0), e > f && i.scrollTop(i.scrollTop() + (e - f)), g = d.offset().top - i.offset().top, 0 > g && "none" != d.css("display") && i.scrollTop(i.scrollTop() + g) } }, findHighlightableChoices: function () { return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)") }, moveHighlight: function (b) { for (var c = this.findHighlightableChoices(), d = this.highlight() ; d > -1 && d < c.length;) { d += b; var e = a(c[d]); if (e.hasClass("select2-result-selectable") && !e.hasClass("select2-disabled") && !e.hasClass("select2-selected")) { this.highlight(d); break } } }, highlight: function (b) { var d, e, f = this.findHighlightableChoices(); return 0 === arguments.length ? c(f.filter(".select2-highlighted")[0], f.get()) : (b >= f.length && (b = f.length - 1), 0 > b && (b = 0), this.results.find(".select2-highlighted").removeClass("select2-highlighted"), d = a(f[b]), d.addClass("select2-highlighted"), this.ensureHighlightVisible(), e = d.data("select2-data"), void (e && this.opts.element.trigger({ type: "select2-highlight", val: this.id(e), choice: e }))) }, countSelectableResults: function () { return this.findHighlightableChoices().length }, highlightUnderEvent: function (b) { var c = a(b.target).closest(".select2-result-selectable"); if (c.length > 0 && !c.is(".select2-highlighted")) { var d = this.findHighlightableChoices(); this.highlight(d.index(c)) } else 0 == c.length && this.results.find(".select2-highlighted").removeClass("select2-highlighted") }, loadMoreIfNeeded: function () { var a, b = this.results, c = b.find("li.select2-more-results"), d = this.resultsPage + 1, e = this, f = this.search.val(), g = this.context; 0 !== c.length && (a = c.offset().top - b.offset().top - b.height(), a <= this.opts.loadMorePadding && (c.addClass("select2-active"), this.opts.query({ element: this.opts.element, term: f, page: d, context: g, matcher: this.opts.matcher, callback: this.bind(function (a) { e.opened() && (e.opts.populateResults.call(this, b, a.results, { term: f, page: d, context: g }), e.postprocessResults(a, !1, !1), a.more === !0 ? (c.detach().appendTo(b).text(e.opts.formatLoadMore(d + 1)), window.setTimeout(function () { e.loadMoreIfNeeded() }, 10)) : c.remove(), e.positionDropdown(), e.resultsPage = d, e.context = a.context) }) }))) }, tokenize: function () { }, updateResults: function (c) { function d() { j.scrollTop(0), i.removeClass("select2-active"), l.positionDropdown() } function f(a) { j.html(a), d() } var g, h, i = this.search, j = this.results, k = this.opts, l = this, m = i.val(), n = a.data(this.container, "select2-last-term"); if ((c === !0 || !n || !e(m, n)) && (a.data(this.container, "select2-last-term", m), c === !0 || this.showSearchInput !== !1 && this.opened())) { var o = this.getMaximumSelectionSize(); if (o >= 1 && (g = this.data(), a.isArray(g) && g.length >= o && w(k.formatSelectionTooBig, "formatSelectionTooBig"))) return void f("<li class='select2-selection-limit'>" + k.formatSelectionTooBig(o) + "</li>"); if (i.val().length < k.minimumInputLength) return f(w(k.formatInputTooShort, "formatInputTooShort") ? "<li class='select2-no-results'>" + k.formatInputTooShort(i.val(), k.minimumInputLength) + "</li>" : ""), void (c && this.showSearch(!0)); if (k.maximumInputLength && i.val().length > k.maximumInputLength) return void f(w(k.formatInputTooLong, "formatInputTooLong") ? "<li class='select2-no-results'>" + k.formatInputTooLong(i.val(), k.maximumInputLength) + "</li>" : ""); k.formatSearching && 0 === this.findHighlightableChoices().length && f("<li class='select2-searching'>" + k.formatSearching() + "</li>"), i.addClass("select2-active"), h = this.tokenize(), h != b && null != h && i.val(h), this.resultsPage = 1, k.query({ element: k.element, term: i.val(), page: this.resultsPage, context: null, matcher: k.matcher, callback: this.bind(function (g) { var h; return this.opened() ? (this.context = g.context === b ? null : g.context, this.opts.createSearchChoice && "" !== i.val() && (h = this.opts.createSearchChoice.call(null, i.val(), g.results), h !== b && null !== h && l.id(h) !== b && null !== l.id(h) && 0 === a(g.results).filter(function () { return e(l.id(this), l.id(h)) }).length && g.results.unshift(h)), 0 === g.results.length && w(k.formatNoMatches, "formatNoMatches") ? void f("<li class='select2-no-results'>" + k.formatNoMatches(i.val()) + "</li>") : (j.empty(), l.opts.populateResults.call(this, j, g.results, { term: i.val(), page: this.resultsPage, context: null }), g.more === !0 && w(k.formatLoadMore, "formatLoadMore") && (j.append("<li class='select2-more-results'>" + l.opts.escapeMarkup(k.formatLoadMore(this.resultsPage)) + "</li>"), window.setTimeout(function () { l.loadMoreIfNeeded() }, 10)), this.postprocessResults(g, c), d(), void this.opts.element.trigger({ type: "select2-loaded", data: g }))) : void this.search.removeClass("select2-active") }) }) } }, cancel: function () { this.close() }, blur: function () { this.opts.selectOnBlur && this.selectHighlighted({ noFocus: !0 }), this.close(), this.container.removeClass("select2-container-active"), this.search[0] === document.activeElement && this.search.blur(), this.clearSearch(), this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus") }, focusSearch: function () { m(this.search) }, selectHighlighted: function (a) { var b = this.highlight(), c = this.results.find(".select2-highlighted"), d = c.closest(".select2-result").data("select2-data"); d && (this.highlight(b), this.onSelect(d, a)) }, getPlaceholder: function () { return this.opts.element.attr("placeholder") || this.opts.element.attr("data-placeholder") || this.opts.element.data("placeholder") || this.opts.placeholder }, initContainerWidth: function () { function c() { var c, d, e, f, g; if ("off" === this.opts.width) return null; if ("element" === this.opts.width) return 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px"; if ("copy" === this.opts.width || "resolve" === this.opts.width) { if (c = this.opts.element.attr("style"), c !== b) for (d = c.split(";"), f = 0, g = d.length; g > f; f += 1) if (e = d[f].replace(/\s/g, "").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i), null !== e && e.length >= 1) return e[1]; return c = this.opts.element.css("width"), c && c.length > 0 ? c : "resolve" === this.opts.width ? 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px" : null } return a.isFunction(this.opts.width) ? this.opts.width() : this.opts.width } var d = c.call(this); null !== d && this.container.css("width", d) } }), D = A(C, { createContainer: function () { var b = a(document.createElement("div")).attr({ "class": "select2-container" }).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>", "   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>", "   <div><b></b></div>", "</a>", "<input class='select2-focusser select2-offscreen' type='text'/>", "<div class='select2-drop select2-display-none'>", "   <div class='select2-search'>", "       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>", "   </div>", "   <ul class='select2-results'>", "   </ul>", "</div>"].join("")); return b }, enableInterface: function () { this.parent.enableInterface.apply(this, arguments) && this.focusser.prop("disabled", !this.isInterfaceEnabled()) }, opening: function () { var b, c; this.parent.opening.apply(this, arguments), this.showSearchInput !== !1 && this.search.val(this.focusser.val()), this.search.focus(), b = this.search.get(0), b.createTextRange && (c = b.createTextRange(), c.collapse(!1), c.select()), this.focusser.prop("disabled", !0).val(""), this.updateResults(!0), this.opts.element.trigger(a.Event("select2-open")) }, close: function () { this.opened() && (this.parent.close.apply(this, arguments), this.focusser.removeAttr("disabled"), this.focusser.focus()) }, focus: function () { this.opened() ? this.close() : (this.focusser.removeAttr("disabled"), this.focusser.focus()) }, isFocused: function () { return this.container.hasClass("select2-container-active") }, cancel: function () { this.parent.cancel.apply(this, arguments), this.focusser.removeAttr("disabled"), this.focusser.focus() }, initContainer: function () { var b, c = this.container, d = this.dropdown; this.showSearch(!1), this.selection = b = c.find(".select2-choice"), this.focusser = c.find(".select2-focusser"), this.focusser.attr("id", "s2id_autogen" + F()), a("label[for='" + this.opts.element.attr("id") + "']").attr("for", this.focusser.attr("id")), this.focusser.attr("tabindex", this.elementTabIndex), this.search.on("keydown", this.bind(function (a) { if (this.isInterfaceEnabled()) { if (a.which === B.PAGE_UP || a.which === B.PAGE_DOWN) return void o(a); switch (a.which) { case B.UP: case B.DOWN: return this.moveHighlight(a.which === B.UP ? -1 : 1), void o(a); case B.ENTER: return this.selectHighlighted(), void o(a); case B.TAB: return void this.selectHighlighted({ noFocus: !0 }); case B.ESC: return this.cancel(a), void o(a) } } })), this.search.on("blur", this.bind(function (a) { document.activeElement === this.body().get(0) && window.setTimeout(this.bind(function () { this.search.focus() }), 0) })), this.focusser.on("keydown", this.bind(function (a) { return !this.isInterfaceEnabled() || a.which === B.TAB || B.isControl(a) || B.isFunctionKey(a) || a.which === B.ESC ? void 0 : this.opts.openOnEnter === !1 && a.which === B.ENTER ? void o(a) : a.which == B.DOWN || a.which == B.UP || a.which == B.ENTER && this.opts.openOnEnter ? (this.open(), void o(a)) : a.which == B.DELETE || a.which == B.BACKSPACE ? (this.opts.allowClear && this.clear(), void o(a)) : void 0 })), h(this.focusser), this.focusser.on("keyup-change input", this.bind(function (a) { a.stopPropagation(), this.opened() || this.open() })), b.on("mousedown touchstart", "abbr", this.bind(function (a) { this.isInterfaceEnabled() && (this.clear(), p(a), this.close(), this.selection.focus()) })), b.on("mousedown touchstart", this.bind(function (b) { this.container.hasClass("select2-container-active") || this.opts.element.trigger(a.Event("select2-focus")), this.opened() ? this.close() : this.isInterfaceEnabled() && this.open(), o(b) })), d.on("mousedown touchstart", this.bind(function () { this.search.focus() })), b.on("focus", this.bind(function (a) { o(a) })), this.focusser.on("focus", this.bind(function () { this.container.hasClass("select2-container-active") || this.opts.element.trigger(a.Event("select2-focus")), this.container.addClass("select2-container-active") })).on("blur", this.bind(function () { this.opened() || (this.container.removeClass("select2-container-active"), this.opts.element.trigger(a.Event("select2-blur"))) })), this.search.on("focus", this.bind(function () { this.container.hasClass("select2-container-active") || this.opts.element.trigger(a.Event("select2-focus")), this.container.addClass("select2-container-active") })), this.initContainerWidth(), this.opts.element.addClass("select2-offscreen"), this.setPlaceholder() }, clear: function (a) { var b = this.selection.data("select2-data"); b && (this.opts.element.val(""), this.selection.find("span").empty(), this.selection.removeData("select2-data"), this.setPlaceholder(), a !== !1 && (this.opts.element.trigger({ type: "select2-removed", val: this.id(b), choice: b }), this.triggerChange({ removed: b }))) }, initSelection: function () { if ("" === this.opts.element.val() && "" === this.opts.element.text()) this.updateSelection([]), this.close(), this.setPlaceholder(); else { var a = this; this.opts.initSelection.call(null, this.opts.element, function (c) { c !== b && null !== c && (a.updateSelection(c), a.close(), a.setPlaceholder()) }) } }, prepareOpts: function () { var b = this.parent.prepareOpts.apply(this, arguments), c = this; return "select" === b.element.get(0).tagName.toLowerCase() ? b.initSelection = function (a, b) { var d = a.find(":selected"); b(c.optionToData(d)) } : "data" in b && (b.initSelection = b.initSelection || function (c, d) { var f = c.val(), g = null; b.query({ matcher: function (a, c, d) { var h = e(f, b.id(d)); return h && (g = d), h }, callback: a.isFunction(d) ? function () { d(g) } : a.noop }) }), b }, getPlaceholder: function () { return this.select && "" !== this.select.find("option").first().text() ? b : this.parent.getPlaceholder.apply(this, arguments) }, setPlaceholder: function () { var a = this.getPlaceholder(); if ("" === this.opts.element.val() && a !== b) { if (this.select && "" !== this.select.find("option:first").text()) return; this.selection.find("span").html(this.opts.escapeMarkup(a)), this.selection.addClass("select2-default"), this.container.removeClass("select2-allowclear") } }, postprocessResults: function (a, b, c) { var d = 0, f = this; if (this.findHighlightableChoices().each2(function (a, b) { return e(f.id(b.data("select2-data")), f.opts.element.val()) ? (d = a, !1) : void 0 }), c !== !1 && this.highlight(d), b === !0 && this.showSearchInput === !1) { var g = this.opts.minimumResultsForSearch; g >= 0 && this.showSearch(y(a.results) >= g) } }, showSearch: function (b) { this.showSearchInput = b, this.dropdown.find(".select2-search").toggleClass("select2-search-hidden", !b), this.dropdown.find(".select2-search").toggleClass("select2-offscreen", !b), a(this.dropdown, this.container).toggleClass("select2-with-searchbox", b) }, onSelect: function (a, b) { if (this.triggerSelect(a)) { var c = this.opts.element.val(), d = this.data(); this.opts.element.val(this.id(a)), this.updateSelection(a), this.opts.element.trigger({ type: "select2-selected", val: this.id(a), choice: a }), this.close(), b && b.noFocus || this.selection.focus(), e(c, this.id(a)) || this.triggerChange({ added: a, removed: d }) } }, updateSelection: function (a) { var c, d = this.selection.find("span"); this.selection.data("select2-data", a), d.empty(), c = this.opts.formatSelection(a, d), c !== b && d.append(this.opts.escapeMarkup(c)), this.selection.removeClass("select2-default"), this.opts.allowClear && this.getPlaceholder() !== b && this.container.addClass("select2-allowclear") }, val: function () { var a, c = !1, d = null, e = this, f = this.data(); if (0 === arguments.length) return this.opts.element.val(); if (a = arguments[0], arguments.length > 1 && (c = arguments[1]), this.select) this.select.val(a).find(":selected").each2(function (a, b) { return d = e.optionToData(b), !1 }), this.updateSelection(d), this.setPlaceholder(), c && this.triggerChange({ added: d, removed: f }); else { if (this.opts.initSelection === b) throw new Error("cannot call val() if initSelection() is not defined"); if (!a && 0 !== a) return void this.clear(c); this.opts.element.val(a), this.opts.initSelection(this.opts.element, function (a) { e.opts.element.val(a ? e.id(a) : ""), e.updateSelection(a), e.setPlaceholder(), c && e.triggerChange({ added: a, removed: f }) }) } }, clearSearch: function () { this.search.val(""), this.focusser.val("") }, data: function (a, c) { var d; return 0 === arguments.length ? (d = this.selection.data("select2-data"), d == b && (d = null), d) : void (a && "" !== a ? (d = this.data(), this.opts.element.val(a ? this.id(a) : ""), this.updateSelection(a), c && this.triggerChange({ added: a, removed: d })) : this.clear(c)) } }), E = A(C, {
            createContainer: function () { var b = a(document.createElement("div")).attr({ "class": "select2-container select2-container-multi" }).html(["    <ul class='select2-choices'>", "  <li class='select2-search-field'>", "    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>", "  </li>", "</ul>", "<div class='select2-drop select2-drop-multi select2-display-none'>", "   <ul class='select2-results'>", "   </ul>", "</div>"].join("")); return b }, prepareOpts: function () { var b = this.parent.prepareOpts.apply(this, arguments), c = this; return "select" === b.element.get(0).tagName.toLowerCase() ? b.initSelection = function (a, b) { var d = []; a.find(":selected").each2(function (a, b) { d.push(c.optionToData(b)) }), b(d) } : "data" in b && (b.initSelection = b.initSelection || function (c, d) { var g = f(c.val(), b.separator), h = []; b.query({ matcher: function (c, d, f) { var i = a.grep(g, function (a) { return e(a, b.id(f)) }).length; return i && h.push(f), i }, callback: a.isFunction(d) ? function () { for (var a = [], c = 0; c < g.length; c++) for (var f = g[c], i = 0; i < h.length; i++) { var j = h[i]; if (e(f, b.id(j))) { a.push(j), h.splice(i, 1); break } } d(a) } : a.noop }) }), b }, selectChoice: function (a) { var b = this.container.find(".select2-search-choice-focus"); b.length && a && a[0] == b[0] || (b.length && this.opts.element.trigger("choice-deselected", b), b.removeClass("select2-search-choice-focus"), a && a.length && (this.close(), a.addClass("select2-search-choice-focus"), this.opts.element.trigger("choice-selected", a))) }, initContainer: function () {
                var b, c = ".select2-choices"; this.searchContainer = this.container.find(".select2-search-field"), this.selection = b = this.container.find(c); var d = this; this.selection.on("mousedown", ".select2-search-choice", function (b) { d.search[0].focus(), d.selectChoice(a(this)) }), this.search.attr("id", "s2id_autogen" + F()), a("label[for='" + this.opts.element.attr("id") + "']").attr("for", this.search.attr("id")), this.search.on("input paste", this.bind(function () { this.isInterfaceEnabled() && (this.opened() || this.open()) })), this.search.attr("tabindex", this.elementTabIndex), this.keydowns = 0, this.search.on("keydown", this.bind(function (a) {
                    if (this.isInterfaceEnabled()) { ++this.keydowns; var c = b.find(".select2-search-choice-focus"), d = c.prev(".select2-search-choice:not(.select2-locked)"), e = c.next(".select2-search-choice:not(.select2-locked)"), f = n(this.search); if (c.length && (a.which == B.LEFT || a.which == B.RIGHT || a.which == B.BACKSPACE || a.which == B.DELETE || a.which == B.ENTER)) { var g = c; return a.which == B.LEFT && d.length ? g = d : a.which == B.RIGHT ? g = e.length ? e : null : a.which === B.BACKSPACE ? (this.unselect(c.first()), this.search.width(10), g = d.length ? d : e) : a.which == B.DELETE ? (this.unselect(c.first()), this.search.width(10), g = e.length ? e : null) : a.which == B.ENTER && (g = null), this.selectChoice(g), o(a), void (g && g.length || this.open()) } if ((a.which === B.BACKSPACE && 1 == this.keydowns || a.which == B.LEFT) && 0 == f.offset && !f.length) return this.selectChoice(b.find(".select2-search-choice:not(.select2-locked)").last()), void o(a); if (this.selectChoice(null), this.opened()) switch (a.which) { case B.UP: case B.DOWN: return this.moveHighlight(a.which === B.UP ? -1 : 1), void o(a); case B.ENTER: return this.selectHighlighted(), void o(a); case B.TAB: return void this.selectHighlighted({ noFocus: !0 }); case B.ESC: return this.cancel(a), void o(a) } if (a.which !== B.TAB && !B.isControl(a) && !B.isFunctionKey(a) && a.which !== B.BACKSPACE && a.which !== B.ESC) { if (a.which === B.ENTER) { if (this.opts.openOnEnter === !1) return; if (a.altKey || a.ctrlKey || a.shiftKey || a.metaKey) return } this.open(), (a.which === B.PAGE_UP || a.which === B.PAGE_DOWN) && o(a), a.which === B.ENTER && o(a) } }
                })), this.search.on("keyup", this.bind(function (a) { this.keydowns = 0, this.resizeSearch() })), this.search.on("blur", this.bind(function (b) { this.container.removeClass("select2-container-active"), this.search.removeClass("select2-focused"), this.selectChoice(null), this.opened() || this.clearSearch(), b.stopImmediatePropagation(), this.opts.element.trigger(a.Event("select2-blur")) })), this.container.on("mousedown", c, this.bind(function (b) { this.isInterfaceEnabled() && (a(b.target).closest(".select2-search-choice").length > 0 || (this.selectChoice(null), this.clearPlaceholder(), this.container.hasClass("select2-container-active") || this.opts.element.trigger(a.Event("select2-focus")), this.open(), this.focusSearch(), b.preventDefault())) })), this.container.on("focus", c, this.bind(function () { this.isInterfaceEnabled() && (this.container.hasClass("select2-container-active") || this.opts.element.trigger(a.Event("select2-focus")), this.container.addClass("select2-container-active"), this.dropdown.addClass("select2-drop-active"), this.clearPlaceholder()) })), this.initContainerWidth(), this.opts.element.addClass("select2-offscreen"), this.clearSearch()
            }, enableInterface: function () { this.parent.enableInterface.apply(this, arguments) && this.search.prop("disabled", !this.isInterfaceEnabled()) }, initSelection: function () { if ("" === this.opts.element.val() && "" === this.opts.element.text() && (this.updateSelection([]), this.close(), this.clearSearch()), this.select || "" !== this.opts.element.val()) { var a = this; this.opts.initSelection.call(null, this.opts.element, function (c) { c !== b && null !== c && (a.updateSelection(c), a.close(), a.clearSearch()) }) } }, clearSearch: function () { var a = this.getPlaceholder(), c = this.getMaxSearchWidth(); a !== b && 0 === this.getVal().length && this.search.hasClass("select2-focused") === !1 ? (this.search.val(a).addClass("select2-default"), this.search.width(c > 0 ? c : this.container.css("width"))) : this.search.val("").width(10) }, clearPlaceholder: function () { this.search.hasClass("select2-default") && this.search.val("").removeClass("select2-default") }, opening: function () { this.clearPlaceholder(), this.resizeSearch(), this.parent.opening.apply(this, arguments), this.focusSearch(), this.updateResults(!0), this.search.focus(), this.opts.element.trigger(a.Event("select2-open")) }, close: function () { this.opened() && this.parent.close.apply(this, arguments) }, focus: function () { this.close(), this.search.focus() }, isFocused: function () { return this.search.hasClass("select2-focused") }, updateSelection: function (b) { var d = [], e = [], f = this; a(b).each(function () { c(f.id(this), d) < 0 && (d.push(f.id(this)), e.push(this)) }), b = e, this.selection.find(".select2-search-choice").remove(), a(b).each(function () { f.addSelectedChoice(this) }), f.postprocessResults() }, tokenize: function () { var a = this.search.val(); a = this.opts.tokenizer(a, this.data(), this.bind(this.onSelect), this.opts), null != a && a != b && (this.search.val(a), a.length > 0 && this.open()) }, onSelect: function (a, b) { this.triggerSelect(a) && (this.addSelectedChoice(a), this.opts.element.trigger({ type: "selected", val: this.id(a), choice: a }), (this.select || !this.opts.closeOnSelect) && this.postprocessResults(), this.opts.closeOnSelect ? (this.close(), this.search.width(10)) : this.countSelectableResults() > 0 ? (this.search.width(10), this.resizeSearch(), this.getMaximumSelectionSize() > 0 && this.val().length >= this.getMaximumSelectionSize() && this.updateResults(!0), this.positionDropdown()) : (this.close(), this.search.width(10)), this.triggerChange({ added: a }), b && b.noFocus || this.focusSearch()) }, cancel: function () { this.close(), this.focusSearch() }, addSelectedChoice: function (c) { var d, e = !c.locked, f = a("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"), g = a("<li class='select2-search-choice select2-locked'><div></div></li>"), h = e ? f : g, i = this.id(c), j = this.getVal(); d = this.opts.formatSelection(c, h.find("div")), d != b && h.find("div").replaceWith("<div title='" + this.opts.escapeMarkup(d) + "'>" + this.opts.escapeMarkup(d) + "</div>"), e && h.find(".select2-search-choice-close").on("mousedown", o).on("click dblclick", this.bind(function (b) { this.isInterfaceEnabled() && (a(b.target).closest(".select2-search-choice").fadeOut("fast", this.bind(function () { this.unselect(a(b.target)), this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"), this.close(), this.focusSearch() })).dequeue(), o(b)) })).on("focus", this.bind(function () { this.isInterfaceEnabled() && (this.container.addClass("select2-container-active"), this.dropdown.addClass("select2-drop-active")) })), h.data("select2-data", c), h.insertBefore(this.searchContainer), j.push(i), this.setVal(j) }, unselect: function (a) { var b, d, e = this.getVal(); if (a = a.closest(".select2-search-choice"), 0 === a.length) throw "Invalid argument: " + a + ". Must be .select2-search-choice"; b = a.data("select2-data"), b && (d = c(this.id(b), e), d >= 0 && (e.splice(d, 1), this.setVal(e), this.select && this.postprocessResults()), a.remove(), this.opts.element.trigger({ type: "removed", val: this.id(b), choice: b }), this.triggerChange({ removed: b })) }, postprocessResults: function (a, b, d) { var e = this.getVal(), f = this.results.find(".select2-result"), g = this.results.find(".select2-result-with-children"), h = this; f.each2(function (a, b) { var d = h.id(b.data("select2-data")); c(d, e) >= 0 && (b.addClass("select2-selected"), b.find(".select2-result-selectable").addClass("select2-selected")) }), g.each2(function (a, b) { b.is(".select2-result-selectable") || 0 !== b.find(".select2-result-selectable:not(.select2-selected)").length || b.addClass("select2-selected") }), -1 == this.highlight() && d !== !1 && h.highlight(0), !this.opts.createSearchChoice && !f.filter(".select2-result:not(.select2-selected)").length > 0 && this.results.append("<li class='select2-no-results'>" + h.opts.formatNoMatches(h.search.val()) + "</li>") }, getMaxSearchWidth: function () { return this.selection.width() - g(this.search) }, resizeSearch: function () { var a, b, c, d, e, f = g(this.search); a = q(this.search) + 10, b = this.search.offset().left, c = this.selection.width(), d = this.selection.offset().left, e = c - (b - d) - f, a > e && (e = c - f), 40 > e && (e = c - f), 0 >= e && (e = a), this.search.width(e) }, getVal: function () { var a; return this.select ? (a = this.select.val(), null === a ? [] : a) : (a = this.opts.element.val(), f(a, this.opts.separator)) }, setVal: function (b) { var d; this.select ? this.select.val(b) : (d = [], a(b).each(function () { c(this, d) < 0 && d.push(this) }), this.opts.element.val(0 === d.length ? "" : d.join(this.opts.separator))) }, buildChangeDetails: function (a, b) { for (var b = b.slice(0), a = a.slice(0), c = 0; c < b.length; c++) for (var d = 0; d < a.length; d++) e(this.opts.id(b[c]), this.opts.id(a[d])) && (b.splice(c, 1), c--, a.splice(d, 1), d--); return { added: b, removed: a } }, val: function (c, d) { var e, f = this; if (0 === arguments.length) return this.getVal(); if (e = this.data(), e.length || (e = []), !c && 0 !== c) return this.opts.element.val(""), this.updateSelection([]), this.clearSearch(), void (d && this.triggerChange({ added: this.data(), removed: e })); if (this.setVal(c), this.select) this.opts.initSelection(this.select, this.bind(this.updateSelection)), d && this.triggerChange(this.buildChangeDetails(e, this.data())); else { if (this.opts.initSelection === b) throw new Error("val() cannot be called if initSelection() is not defined"); this.opts.initSelection(this.opts.element, function (b) { var c = a(b).map(f.id); f.setVal(c), f.updateSelection(b), f.clearSearch(), d && f.triggerChange(this.buildChangeDetails(e, this.data())) }) } this.clearSearch() }, onSortStart: function () { if (this.select) throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead."); this.search.width(0), this.searchContainer.hide() }, onSortEnd: function () { var b = [], c = this; this.searchContainer.show(), this.searchContainer.appendTo(this.searchContainer.parent()), this.resizeSearch(), this.selection.find(".select2-search-choice").each(function () { b.push(c.opts.id(a(this).data("select2-data"))) }), this.setVal(b), this.triggerChange() }, data: function (b, c) { var d, e, f = this; return 0 === arguments.length ? this.selection.find(".select2-search-choice").map(function () { return a(this).data("select2-data") }).get() : (e = this.data(), b || (b = []), d = a.map(b, function (a) { return f.opts.id(a) }), this.setVal(d), this.updateSelection(b), this.clearSearch(), c && this.triggerChange(this.buildChangeDetails(e, this.data())), void 0) }
        }), a.fn.select2 = function () { var d, e, f, g, h = Array.prototype.slice.call(arguments, 0), i = ["val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "onSortStart", "onSortEnd", "enable", "readonly", "positionDropdown", "data"], j = ["val", "opened", "isFocused", "container", "data"]; return this.each(function () { if (0 === h.length || "object" == typeof h[0]) d = 0 === h.length ? {} : a.extend({}, h[0]), d.element = a(this), "select" === d.element.get(0).tagName.toLowerCase() ? g = d.element.prop("multiple") : (g = d.multiple || !1, "tags" in d && (d.multiple = g = !0)), e = g ? new E : new D, e.init(d); else { if ("string" != typeof h[0]) throw "Invalid arguments to select2 plugin: " + h; if (c(h[0], i) < 0) throw "Unknown method: " + h[0]; if (f = b, e = a(this).data("select2"), e === b) return; if (f = "container" === h[0] ? e.container : e[h[0]].apply(e, h.slice(1)), c(h[0], j) >= 0) return !1 } }), f === b ? this : f }, a.fn.select2.defaults = { width: "copy", loadMorePadding: 0, closeOnSelect: !0, openOnEnter: !0, containerCss: {}, dropdownCss: {}, containerCssClass: "", dropdownCssClass: "", formatResult: function (a, b, c, d) { var e = []; return s(a.text, c.term, e, d), e.join("") }, formatSelection: function (a, c) { return a ? a.text : b }, sortResults: function (a, b, c) { return a }, formatResultCssClass: function (a) { return b }, formatNoMatches: function () { return "No matches found" }, formatInputTooShort: function (a, b) { var c = b - a.length; return "Please enter " + c + " more character" + (1 == c ? "" : "s") }, formatInputTooLong: function (a, b) { var c = a.length - b; return "Please delete " + c + " character" + (1 == c ? "" : "s") }, formatSelectionTooBig: function (a) { return "You can only select " + a + " item" + (1 == a ? "" : "s") }, formatLoadMore: function (a) { return "Loading more results..." }, formatSearching: function () { return "Searching..." }, minimumResultsForSearch: 0, minimumInputLength: 0, maximumInputLength: null, maximumSelectionSize: 0, id: function (a) { return a.id }, matcher: function (a, b) { return ("" + b).toUpperCase().indexOf(("" + a).toUpperCase()) >= 0 }, separator: ",", tokenSeparators: [], tokenizer: z, escapeMarkup: function (a) { var b = { "\\": "&#92;", "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#47;" }; return String(a).replace(/[&<>"'\/\\]/g, function (a) { return b[a] }) }, blurOnChange: !1, selectOnBlur: !1, adaptContainerCssClass: function (a) { return a }, adaptDropdownCssClass: function (a) { return null } }, a.fn.select2.ajaxDefaults = { transport: a.ajax, params: { type: "GET", cache: !1, dataType: "json" } }, window.Select2 = { query: { ajax: t, local: u, tags: v }, util: { debounce: j, markMatch: s }, "class": { "abstract": C, single: D, multi: E } }
    }
}(jQuery), Saatchi.Navigation = function (a) { "use strict"; return { active: !1, viewportWidth: a(window).width(), topbar: a(".top-bar"), init: function () { if (Saatchi.Navigation.viewportWidth < 768 && (Saatchi.Navigation.active = !0, a("#navUser, #navFeatures, #navSculpture, #navDrawings, #navCollage, #navPhotography, #navPaintings, #navPrints").on("click", function (b) { b.preventDefault(); var c = a(this).parent(), d = a(".mobile-link"); if (c.hasClass("activeMobile")) Saatchi.Navigation.CloseReset(); else { Saatchi.Navigation.CloseReset(); var e = a(this).parent(), f = e.find(".submenu-content"); e.addClass("activeMobile"), f.stop(!0, !0).show(0), c.find(d).show() } }), a(".toggle-topbar>a").on("click", function () { Saatchi.Navigation.CloseReset() })), Saatchi.Navigation.viewportWidth > 1024) { var b; a(".top-bar").mouseenter(function () { b = setTimeout(function () { a(".submenu").one("mousemove", function () { Saatchi.Navigation.SubnavHover() }), Saatchi.Navigation.Subnav() }, 200) }).mouseleave(function () { clearTimeout(b), a(".submenu").off() }) } (a("body").hasClass(".touch") || Saatchi.Navigation.viewportWidth > 767 && Saatchi.Navigation.viewportWidth < 1025) && Saatchi.Navigation.SubnavTouch() }, SubnavHover: function () { var b = a(".submenu:hover"), c = b.find(".submenu-content"); b.addClass("active"), Saatchi.Navigation.topbar.css("height", "auto"), 0 == Saatchi.Navigation.topbar.hasClass("open") ? (c.stop(!0, !0).show(0), Saatchi.Navigation.topbar.addClass("open")) : c.stop(!0, !0).show(0) }, Subnav: function () { Saatchi.Navigation.active !== !0 && (Saatchi.Navigation.active = !0, a(".submenu").on({ mouseenter: function () { var b = a(this), c = b.find(".submenu-content"); b.addClass("active"), Saatchi.Navigation.topbar.css("height", "auto"), c.stop(!0, !0).show(0) }, mouseleave: function () { var b = a(this); a(this).find(".submenu-content").stop(!0, !0).fadeOut(10, function () { b.removeClass("active") }) } }), Saatchi.Navigation.topbar.on({ mouseleave: function () { var b = a(this); b.find(".submenu.active>.submenu-content").stop(!0, !0).fadeOut(10, function () { b.removeClass("open"), a(".submenu.active").removeClass("active") }), a(this).removeClass("open") } }), a(".top-bar.expanded") && (Saatchi.Navigation.active = !1)) }, SubnavTouch: function () { if (Saatchi.Navigation.active !== !0) { var b = a(".top-bar"); Saatchi.Navigation.active = !0, a(".submenu").on({ mouseenter: function () { var c = a(this), d = c.find(".submenu-content"); c.addClass("active"), b.css("height", "auto"), 0 == b.hasClass("open") ? (d.stop(!0, !0).show(0), b.addClass("open")) : d.stop(!0, !0).show(0) }, mouseleave: function () { var b = a(this); a(this).find(".submenu-content").stop(!0, !0).fadeOut(10, function () { b.removeClass("active") }) } }), a(".top-bar.expanded") && (Saatchi.Navigation.active = !1), a(window).scroll(function () { Saatchi.Navigation.CloseReset() }) } }, CloseReset: function () { a(".activeMobile").removeClass("activeMobile"), a(".submenu.active").removeClass("active"), a(".submenu-content").hide(), a(".mobile-link").hide(), Saatchi.Navigation.active = !1 } } }(jQuery), Saatchi.NewDesktopNavigation = function () { "use strict"; function a(a) { var b = a.clientWidth, c = a.offsetLeft; j.style.transform = "translateX(" + c + "px) scaleX(" + b + ")" } function b() { for (var a = 0; a < l.length; a++) v.push(l[a].querySelector(u)) } function c() { for (var a = 0; a < l.length; a++) A.push(m.querySelector(y + "[data-index='" + a + "']")) } function d() { for (var a = 0; a < A.length; a++) { var b = A[a]; b && b.classList.remove(z) } } function e() { var b = this.dataset.index; j.style.opacity = 1, a(v[b]); var c = A[b]; c ? (d(), m.classList.add(x), c.classList.add(z)) : m.classList.remove(x) } function f() { j.style.opacity = 0, m.classList.remove(x) } function g() { for (var a = 0; a < l.length; a++) { var b = l[a]; b.addEventListener("mouseenter", e) } } function h() { n.addEventListener("click", function () { raf(function () { o.classList.add(D), o.focus() }) }) } function i() { o.addEventListener("blur", function () { o.classList.remove(D) }); for (var a = 0; a < o.children.length; a++) !function () { var b = o.children[a]; b.addEventListener("click", function () { raf(function () { for (var a = 0; a < o.children.length; a++) o.children[a].classList.remove(E); o.classList.remove(D), p.placeholder = b.innerHTML, b.classList.add(E); var c = b.dataset.path; q.action = c }) }) }() } var j, k, l, m, n, o, p, q, r = ".desktop-navigation__site-links__indicator", s = ".desktop-navigation__site-links", t = ".desktop-navigation__site-link", u = ".desktop-navigation__site-link__title", v = [], w = ".desktop-navigation__dropdown", x = "desktop-navigation__dropdown--active", y = ".desktop-navigation__dropdown__inner", z = "desktop-navigation__dropdown__inner--active", A = [], B = ".desktop-navigation__search__caret", C = ".desktop-navigation__search__dropdown", D = "dropdown-menu--active", E = "desktop-navigation__search__dropdown__item--active", F = ".desktop-navigation__search__input", G = ".desktop-navigation__search"; return { init: function () { k = document.querySelector(s), j = document.querySelector(r), l = document.querySelectorAll(t), m = document.querySelector(w), n = document.querySelector(B), o = document.querySelector(C), p = document.querySelector(F), q = document.querySelector(G), b(), c(), h(), i(), j.style.opacity = 0, a(l[0]), g(), k.addEventListener("mouseleave", f) } } }(), Saatchi.NewMobileNavigation = function () { "use strict"; function a() { w(function () { var a = !z; a ? (Saatchi.LockScroll.lock(), j.classList.add(A)) : (Saatchi.LockScroll.unlock(), j.classList.remove(A)), z = a }) } function b() { w(function () { for (var a = 0; a < n.length; a++) n[a].classList.remove(G); k.classList.remove(C) }) } function c(a) { return function () { w(function () { a.classList.add(G), k.classList.add(C), k.scrollTop = 0 }) } } function d() { for (var a = 0; a < m.length; a++) !function () { var b = m[a], d = b.dataset.index; if (d) { var e = document.querySelector(F + "[data-index='" + d + "']"); e && b.addEventListener("click", c(e)) } }() } function e() { for (var a = 0; a < o.length; a++) o[a].addEventListener("click", b) } function f(a) { return a.charAt(0).toUpperCase() + a.slice(1) } function g() { p.addEventListener("click", function () { u.focus(), w(function () { q.classList.add(K) }) }), r.addEventListener("click", function () { w(function () { q.classList.remove(K) }) }), s.addEventListener("change", function () { w(function () { var a = s.value; t.action = Q[a], v.innerHTML = f(a) }) }) } var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w = window.requestAnimationFrame || function (a) { a() }, x = ".mobile-navigation__hamburger", y = ".mobile-navigation__menu", z = !1, A = "mobile-navigation__menu--is-open", B = ".mobile-navigation__content", C = "mobile-navigation__content--submenu-open", D = ".mobile-navigation__backdrop", E = ".mobile-navigation__site-link", F = ".mobile-navigation__menu__panel", G = "mobile-navigation__menu__panel--is-open", H = ".mobile-navigation__menu__panel__back", I = ".mobile-navigation__search-trigger", J = ".mobile-navigation__search-container", K = "mobile-navigation__search-container--open", L = ".mobile-navigation__search-container__cancel", M = ".mobile-navigation__search-type-selector", N = ".mobile-navigation__search-container", O = ".mobile-navigation__search-container__input", P = ".mobile-navigation__search-type-indicator__text span", Q = { art: "/qsearch/art", Agency: "/qsearch/Agency", collection: "/qsearch/collection" }; return { init: function () { h = document.querySelector("body"), i = document.querySelector(x), j = document.querySelector(y), k = document.querySelector(B), l = document.querySelector(D), m = document.querySelectorAll(E), o = document.querySelectorAll(H), n = document.querySelectorAll(F), p = document.querySelector(I), q = document.querySelector(J), r = document.querySelector(L), s = document.querySelector(M), t = document.querySelector(N), u = t.querySelector(O), v = document.querySelector(P), d(), e(), g(), i.addEventListener("click", a), l.addEventListener("click", a) } } }(), Saatchi.Qtip = function (a, b, c) {
    "use strict"; function d() { if (d.history = d.history || [], d.history.push(arguments), "object" == typeof console) { var a, b = console[console.warn ? "warn" : "log"], c = Array.prototype.slice.call(arguments); "string" == typeof arguments[0] && (c[0] = "qTip2: " + c[0]), a = b.apply ? b.apply(console, c) : b(c) } } function e(b) { var c; return b && "object" == typeof b ? ((b.metadata === s || "object" != typeof b.metadata) && (b.metadata = { type: b.metadata }), "content" in b && ((b.content === s || "object" != typeof b.content || b.content.jquery) && (b.content = { text: b.content }), c = b.content.text || r, !a.isFunction(c) && (!c && !c.attr || c.length < 1 || "object" == typeof c && !c.jquery) && (b.content.text = r), "title" in b.content && ((b.content.title === s || "object" != typeof b.content.title) && (b.content.title = { text: b.content.title }), c = b.content.title.text || r, !a.isFunction(c) && (!c && !c.attr || c.length < 1 || "object" == typeof c && !c.jquery) && (b.content.title.text = r))), "position" in b && (b.position === s || "object" != typeof b.position) && (b.position = { my: b.position, at: b.position }), "show" in b && (b.show === s || "object" != typeof b.show) && (b.show = b.show.jquery ? { target: b.show } : { event: b.show }), "hide" in b && (b.hide === s || "object" != typeof b.hide) && (b.hide = b.hide.jquery ? { target: b.hide } : { event: b.hide }), "style" in b && (b.style === s || "object" != typeof b.style) && (b.style = { classes: b.style }), a.each(n, function () { this.sanitize && this.sanitize(b) }), b) : r } function f(d, f, g, h) {
        function i(a) { for (var b, c = 0, d = f, e = a.split(".") ; d = d[e[c++]];) c < e.length && (b = d); return [b || f, e.pop()] } function j() { var a = f.style.widget; Q.toggleClass(v, a).toggleClass(y, f.style["default"] && !a), J.content.toggleClass(v + "-content", a), J.titlebar && J.titlebar.toggleClass(v + "-header", a), J.button && J.button.toggleClass(u + "-icon", !a) } function k(a) { J.title && (J.titlebar.remove(), J.titlebar = J.title = J.button = s, a !== r && L.reposition()) } function l() { var b = f.content.title.button, c = "string" == typeof b, d = c ? b : "Close tooltip"; J.button && J.button.remove(), J.button = b.jquery ? b : a("<a />", { "class": "ui-state-default ui-tooltip-close " + (f.style.widget ? "" : u + "-icon"), title: d, "aria-label": d }).prepend(a("<span />", { "class": "ui-icon ui-icon-close", html: "&times;" })), J.button.appendTo(J.titlebar).attr("role", "button").click(function (a) { return Q.hasClass(w) || L.hide(a), r }), L.redraw() } function C() { var b = N + "-title"; J.titlebar && k(), J.titlebar = a("<div />", { "class": u + "-titlebar " + (f.style.widget ? "ui-widget-header" : "") }).append(J.title = a("<div />", { id: b, "class": u + "-title", "aria-atomic": q })).insertBefore(J.content).delegate(".ui-tooltip-close", "mousedown keydown mouseup keyup mouseout", function (b) { a(this).toggleClass("ui-state-active ui-state-focus", "down" === b.type.substr(-4)) }).delegate(".ui-tooltip-close", "mouseover mouseout", function (b) { a(this).toggleClass("ui-state-hover", "mouseover" === b.type) }), f.content.title.button ? l() : L.rendered && L.redraw() } function E(a) { var b = J.button, c = J.title; return L.rendered ? void (a ? (c || C(), l()) : b.remove()) : r } function F(b, c) { var e = J.title; return L.rendered && b ? (a.isFunction(b) && (b = b.call(d, K.event, L)), b === r ? k(r) : (b.jquery && b.length > 0 ? e.empty().append(b.css({ display: "block" })) : e.html(b), L.redraw(), void (c !== r && L.rendered && Q.is(":visible") && L.reposition(K.event)))) : r } function G(b, e) { function f(b) { function d(c) { c && (delete h[c.src], clearTimeout(L.timers.img[c.src]), a(c).unbind(R)), a.isEmptyObject(h) && (L.redraw(), e !== r && L.reposition(K.event), b()) } var f, h = {}; return 0 === (f = g.find("img:not([height]):not([width])")).length ? d() : void f.each(function (b, e) { if (h[e.src] === c) { var f = 0, g = 3; !function i() { return e.height || e.width || f > g ? d(e) : (f += 1, void (L.timers.img[e.src] = setTimeout(i, 700))) }(), a(e).bind("error" + R + " load" + R, function () { d(this) }), h[e.src] = e } }) } var g = J.content; return L.rendered && b ? (a.isFunction(b) && (b = b.call(d, K.event, L) || ""), b.jquery && b.length > 0 ? g.empty().append(b.css({ display: "block" })) : g.html(b), L.rendered < 0 ? Q.queue("fx", f) : (P = 0, f(a.noop)), L) : r } function H() { function c(a) { if (Q.hasClass(w)) return r; clearTimeout(L.timers.show), clearTimeout(L.timers.hide); var b = function () { L.toggle(q, a) }; f.show.delay > 0 ? L.timers.show = setTimeout(b, f.show.delay) : b() } function e(b) { if (Q.hasClass(w) || O || P) return r; var c = a(b.relatedTarget || b.target), d = c.closest(x)[0] === Q[0], e = c[0] === k.show[0]; if (clearTimeout(L.timers.show), clearTimeout(L.timers.hide), "mouse" === j.target && d || f.hide.fixed && /mouse(out|leave|move)/.test(b.type) && (d || e)) try { b.preventDefault(), b.stopImmediatePropagation() } catch (g) { } else f.hide.delay > 0 ? L.timers.hide = setTimeout(function () { L.hide(b) }, f.hide.delay) : L.hide(b) } function h(a) { return Q.hasClass(w) ? r : (clearTimeout(L.timers.inactive), void (L.timers.inactive = setTimeout(function () { L.hide(a) }, f.hide.inactive))) } function i(a) { Q.is(":visible") && L.reposition(a) } var j = f.position, k = { show: f.show.target, hide: f.hide.target, viewport: a(j.viewport), document: a(document), body: a(document.body), window: a(b) }, l = { show: a.trim("" + f.show.event).split(" "), hide: a.trim("" + f.hide.event).split(" ") }, n = a.browser.msie && 6 === parseInt(a.browser.version, 10); Q.bind("mouseenter" + R + " mouseleave" + R, function (a) { var b = "mouseenter" === a.type; b && L.focus(a), Q.toggleClass(A, b) }), f.hide.fixed && (k.hide = k.hide.add(Q), Q.bind("mouseover" + R, function () { Q.hasClass(w) || clearTimeout(L.timers.hide) })), /mouse(out|leave)/i.test(f.hide.event) ? "window" === f.hide.leave && k.window.bind("mouseout" + R + " blur" + R, function (a) { /select|option/.test(a.target) && !a.relatedTarget && L.hide(a) }) : /mouse(over|enter)/i.test(f.show.event) && k.hide.bind("mouseleave" + R, function () { clearTimeout(L.timers.show) }), ("" + f.hide.event).indexOf("unfocus") > -1 && k.body.bind("mousedown" + R, function (b) { var c = a(b.target); !Q.hasClass(w) && Q.is(":visible"), c[0] !== Q[0] && 0 === c.parents(x).length && c.add(d).length > 1 && !c.attr("disabled") && L.hide(b) }), "number" == typeof f.hide.inactive && (k.show.bind("qtip-" + g + "-inactive", h), a.each(m.inactiveEvents, function (a, b) { k.hide.add(J.tooltip).bind(b + R + "-inactive", h) })), a.each(l.hide, function (b, d) { var f = a.inArray(d, l.show), g = a(k.hide); f > -1 && g.add(k.show).length === g.length || "unfocus" === d ? (k.show.bind(d + R, function (a) { Q.is(":visible") ? e(a) : c(a) }), delete l.show[f]) : k.hide.bind(d + R, e) }), a.each(l.show, function (a, b) { k.show.bind(b + R, c) }), "number" == typeof f.hide.distance && k.show.add(Q).bind("mousemove" + R, function (a) { var b = K.origin || {}, c = f.hide.distance, d = Math.abs; (d(a.pageX - b.pageX) >= c || d(a.pageY - b.pageY) >= c) && L.hide(a) }), "mouse" === j.target && (k.show.bind("mousemove" + R, function (a) { o = { pageX: a.pageX, pageY: a.pageY, type: "mousemove" } }), j.adjust.mouse && (f.hide.event && (Q.bind("mouseleave" + R, function (a) { (a.relatedTarget || a.target) !== k.show[0] && L.hide(a) }), J.target.bind("mouseenter" + R + " mouseleave" + R, function (a) { K.onTarget = "mouseenter" === a.type })), k.document.bind("mousemove" + R, function (a) { K.onTarget && !Q.hasClass(w) && Q.is(":visible") && L.reposition(a || o) }))), (j.adjust.resize || k.viewport.length) && (a.event.special.resize ? k.viewport : k.window).bind("resize" + R, i), (k.viewport.length || n && "fixed" === Q.css("position")) && k.viewport.bind("scroll" + R, i) } function I() { var c = [f.show.target[0], f.hide.target[0], L.rendered && J.tooltip[0], f.position.container[0], f.position.viewport[0], b, document]; L.rendered ? a([]).pushStack(a.grep(c, function (a) { return "object" == typeof a })).unbind(R) : f.show.target.unbind(R + "-create") } var J, K, L = this, M = document.body, N = u + "-" + g, O = 0, P = 0, Q = a(), R = ".qtip-" + g; L.id = g, L.rendered = r, L.elements = J = { target: d }, L.timers = { img: {} }, L.options = f, L.checks = {}, L.plugins = {}, L.cache = K = { event: {}, target: a(), disabled: r, attr: h, onTarget: r }, L.checks.builtin = { "^id$": function (b, c, d) { var e = d === q ? m.nextid : d, f = u + "-" + e; e !== r && e.length > 0 && !a("#" + f).length && (Q[0].id = f, J.content[0].id = f + "-content", J.title[0].id = f + "-title") }, "^content.text$": function (a, b, c) { G(c) }, "^content.title.text$": function (a, b, c) { return c ? (!J.title && c && C(), void F(c)) : k() }, "^content.title.button$": function (a, b, c) { E(c) }, "^position.(my|at)$": function (a, b, c) { "string" == typeof c && (a[b] = new n.Corner(c)) }, "^position.container$": function (a, b, c) { L.rendered && Q.appendTo(c) }, "^show.ready$": function () { L.rendered ? L.toggle(q) : L.render(1) }, "^style.classes$": function (a, b, c) { Q.attr("class", u + " qtip ui-helper-reset " + c) }, "^style.widget|content.title": j, "^events.(render|show|move|hide|focus|blur)$": function (b, c, d) { Q[(a.isFunction(d) ? "" : "un") + "bind"]("tooltip" + c, d) }, "^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)": function () { var a = f.position; Q.attr("tracking", "mouse" === a.target && a.adjust.mouse), I(), H() } }, a.extend(L, {
            render: function (b) { if (L.rendered) return L; var c = f.content.text, e = f.content.title.text, g = f.position, h = a.Event("tooltiprender"); return a.attr(d[0], "aria-describedby", N), Q = J.tooltip = a("<div/>", { id: N, "class": u + " qtip ui-helper-reset " + y + " " + f.style.classes + " " + u + "-pos-" + f.position.my.abbrev(), width: f.style.width || "", height: f.style.height || "", tracking: "mouse" === g.target && g.adjust.mouse, role: "alert", "aria-live": "polite", "aria-atomic": r, "aria-describedby": N + "-content", "aria-hidden": q }).toggleClass(w, K.disabled).data("qtip", L).appendTo(f.position.container).append(J.content = a("<div />", { "class": u + "-content", id: N + "-content", "aria-atomic": q })), L.rendered = -1, P = 1, O = 1, e && (C(), a.isFunction(e) || F(e, r)), a.isFunction(c) || G(c, r), L.rendered = q, j(), a.each(f.events, function (b, c) { a.isFunction(c) && Q.bind("toggle" === b ? "tooltipshow tooltiphide" : "tooltip" + b, c) }), a.each(n, function () { "render" === this.initialize && this(L) }), H(), Q.queue("fx", function (a) { h.originalEvent = K.event, Q.trigger(h, [L]), P = 0, O = 0, L.redraw(), (f.show.ready || b) && L.toggle(q, K.event, r), a() }), L }, get: function (a) { var b, c; switch (a.toLowerCase()) { case "dimensions": b = { height: Q.outerHeight(), width: Q.outerWidth() }; break; case "offset": b = n.offset(Q, f.position.container); break; default: c = i(a.toLowerCase()), b = c[0][c[1]], b = b.precedance ? b.string() : b } return b }, set: function (b, c) { function d(a, b) { var c, d, e; for (c in m) for (d in m[c]) (e = new RegExp(d, "i").exec(a)) && (b.push(e), m[c][d].apply(L, b)) } var g, h = /^position\.(my|at|adjust|target|container)|style|content|show\.ready/i, j = /^content\.(title|attr)|style/i, k = r, l = r, m = L.checks; return "string" == typeof b ? (g = b, b = {}, b[g] = c) : b = a.extend(q, {}, b), a.each(b, function (c, d) { var e, f = i(c.toLowerCase()); e = f[0][f[1]], f[0][f[1]] = "object" == typeof d && d.nodeType ? a(d) : d, b[c] = [f[0], f[1], d, e], k = h.test(c) || k, l = j.test(c) || l }), e(f), O = P = 1, a.each(b, d), O = P = 0, Q.is(":visible") && L.rendered && (k && L.reposition("mouse" === f.position.target ? s : K.event), l && L.redraw()), L }, toggle: function (b, c) { function d() { b ? (a.browser.msie && Q[0].style.removeAttribute("filter"), Q.css("overflow", ""), "string" == typeof i.autofocus && a(i.autofocus, Q).focus(), e = a.Event("tooltipvisible"), e.originalEvent = c ? K.event : s, Q.trigger(e, [L]), i.target.trigger("qtip-" + g + "-inactive")) : Q.css({ display: "", visibility: "", opacity: "", left: "", top: "" }) } if (!L.rendered) return b ? L.render(1) : L; var e, h = b ? "show" : "hide", i = f[h], j = Q.is(":visible"), k = !c || f[h].target.length < 2 || K.target[0] === c.target, l = f.position, m = f.content; if ((typeof b).search("boolean|number") && (b = !j), !Q.is(":animated") && j === b && k) return L; if (c) { if (/over|enter/.test(c.type) && /out|leave/.test(K.event.type) && c.target === f.show.target[0] && Q.has(c.relatedTarget).length) return L; K.event = a.extend({}, c) } return e = a.Event("tooltip" + h), e.originalEvent = c ? K.event : s, Q.trigger(e, [L, 90]), e.isDefaultPrevented() ? L : (a.attr(Q[0], "aria-hidden", !b), b ? (K.origin = a.extend({}, o), L.focus(c), a.isFunction(m.text) && G(m.text, r), a.isFunction(m.title.text) && F(m.title.text, r), !p && "mouse" === l.target && l.adjust.mouse && (a(document).bind("mousemove.qtip", function (a) { o = { pageX: a.pageX, pageY: a.pageY, type: "mousemove" } }), p = q), L.reposition(c, arguments[2]), (e.solo = !!i.solo) && a(x, i.solo).not(Q).qtip("hide", e)) : (clearTimeout(L.timers.show), delete K.origin, p && !a(x + '[tracking="true"]:visible', i.solo).not(Q).length && (a(document).unbind("mousemove.qtip"), p = r), L.blur(c)), k && Q.stop(0, 1), i.effect === r ? (Q[h](), d.call(Q)) : a.isFunction(i.effect) ? (i.effect.call(Q, L), Q.queue("fx", function (a) { d(), a() })) : Q.fadeTo(90, b ? 1 : 0, d), b && i.target.trigger("qtip-" + g + "-inactive"), L) }, show: function (a) { return L.toggle(q, a) }, hide: function (a) { return L.toggle(r, a) }, focus: function (b) { if (!L.rendered) return L; var c, d = a(x), e = parseInt(Q[0].style.zIndex, 10), f = m.zindex + d.length, g = a.extend({}, b); return Q.hasClass(z) || (c = a.Event("tooltipfocus"), c.originalEvent = g, Q.trigger(c, [L, f]), c.isDefaultPrevented() || (e !== f && (d.each(function () { this.style.zIndex > e && (this.style.zIndex = this.style.zIndex - 1) }), d.filter("." + z).qtip("blur", g)), Q.addClass(z)[0].style.zIndex = f)), L }, blur: function (b) { var c, d = a.extend({}, b); return Q.removeClass(z), c = a.Event("tooltipblur"), c.originalEvent = d, Q.trigger(c, [L]), L }, reposition: function (c, d) {
                if (!L.rendered || O) return L; O = 1; var e, g = f.position.target, h = f.position, i = h.my, j = h.at, k = h.adjust, l = k.method.split(" "), m = Q.outerWidth(), p = Q.outerHeight(), q = 0, s = 0, t = a.Event("tooltipmove"), v = "fixed" === Q.css("position"), w = h.viewport, x = {
                    left: 0, top: 0
                }, y = h.container, z = r, A = L.plugins.tip, B = { horizontal: l[0], vertical: l[1] = l[1] || l[0], enabled: w.jquery && g[0] !== b && g[0] !== M && "none" !== k.method, left: function (a) { var b = "shift" === B.horizontal, c = -y.offset.left + w.offset.left + w.scrollLeft, d = "left" === i.x ? m : "right" === i.x ? -m : -m / 2, e = "left" === j.x ? q : "right" === j.x ? -q : -q / 2, f = A && A.size ? A.size.width || 0 : 0, g = A && A.corner && "x" === A.corner.precedance && !b ? f : 0, h = c - a + g, l = a + m - w.width - c + g, n = d - ("x" === i.precedance || i.x === i.y ? e : 0), o = "center" === i.x; return b ? (g = A && A.corner && "y" === A.corner.precedance ? f : 0, n = ("left" === i.x ? 1 : -1) * d - g, x.left += h > 0 ? h : l > 0 ? -l : 0, x.left = Math.max(-y.offset.left + w.offset.left + (g && "center" === A.corner.x ? A.offset : 0), a - n, Math.min(Math.max(-y.offset.left + w.offset.left + w.width, a + n), x.left))) : (h > 0 && ("left" !== i.x || l > 0) ? x.left -= n : l > 0 && ("right" !== i.x || h > 0) && (x.left -= o ? -n : n), x.left !== a && o && (x.left -= k.x), x.left < c && -x.left > l && (x.left = a)), x.left - a }, top: function (a) { var b = "shift" === B.vertical, c = -y.offset.top + w.offset.top + w.scrollTop, d = "top" === i.y ? p : "bottom" === i.y ? -p : -p / 2, e = "top" === j.y ? s : "bottom" === j.y ? -s : -s / 2, f = A && A.size ? A.size.height || 0 : 0, g = A && A.corner && "y" === A.corner.precedance && !b ? f : 0, h = c - a + g, l = a + p - w.height - c + g, m = d - ("y" === i.precedance || i.x === i.y ? e : 0), n = "center" === i.y; return b ? (g = A && A.corner && "x" === A.corner.precedance ? f : 0, m = ("top" === i.y ? 1 : -1) * d - g, x.top += h > 0 ? h : l > 0 ? -l : 0, x.top = Math.max(-y.offset.top + w.offset.top + (g && "center" === A.corner.x ? A.offset : 0), a - m, Math.min(Math.max(-y.offset.top + w.offset.top + w.height, a + m), x.top))) : (h > 0 && ("top" !== i.y || l > 0) ? x.top -= m : l > 0 && ("bottom" !== i.y || h > 0) && (x.top -= n ? -m : m), x.top !== a && n && (x.top -= k.y), x.top < 0 && -x.top > l && (x.top = a)), x.top - a } }; if (a.isArray(g) && 2 === g.length) j = { x: "left", y: "top" }, x = { left: g[0], top: g[1] }; else if ("mouse" === g && (c && c.pageX || K.event.pageX)) j = { x: "left", y: "top" }, c = (!c || "resize" !== c.type && "scroll" !== c.type ? c && c.pageX && "mousemove" === c.type ? c : !o || !o.pageX || !k.mouse && c && c.pageX ? !k.mouse && K.origin && K.origin.pageX ? K.origin : c : { pageX: o.pageX, pageY: o.pageY } : K.event) || c || K.event || o || {}, x = { top: c.pageY, left: c.pageX }; else { if (g = "event" === g ? c && c.target && "scroll" !== c.type && "resize" !== c.type ? K.target = a(c.target) : K.target : K.target = a(g.jquery ? g : J.target), g = a(g).eq(0), 0 === g.length) return L; g[0] === document || g[0] === b ? (q = n.iOS ? b.innerWidth : g.width(), s = n.iOS ? b.innerHeight : g.height(), g[0] === b && (x = { top: (w || g).scrollTop(), left: (w || g).scrollLeft() })) : g.is("area") && n.imagemap ? x = n.imagemap(g, j, B.enabled ? l : r) : "http://www.w3.org/2000/svg" === g[0].namespaceURI && n.svg ? x = n.svg(g, j) : (q = g.outerWidth(), s = g.outerHeight(), x = n.offset(g, y)), x.offset && (q = x.width, s = x.height, z = x.flipoffset, x = x.offset), (n.iOS < 4.1 && n.iOS > 3.1 || 4.3 == n.iOS || !n.iOS && v) && (e = a(b), x.left -= e.scrollLeft(), x.top -= e.scrollTop()), x.left += "right" === j.x ? q : "center" === j.x ? q / 2 : 0, x.top += "bottom" === j.y ? s : "center" === j.y ? s / 2 : 0 } return x.left += k.x + ("right" === i.x ? -m : "center" === i.x ? -m / 2 : 0), x.top += k.y + ("bottom" === i.y ? -p : "center" === i.y ? -p / 2 : 0), B.enabled ? (w = { elem: w, height: w[(w[0] === b ? "h" : "outerH") + "eight"](), width: w[(w[0] === b ? "w" : "outerW") + "idth"](), scrollLeft: v ? 0 : w.scrollLeft(), scrollTop: v ? 0 : w.scrollTop(), offset: w.offset() || { left: 0, top: 0 } }, y = { elem: y, scrollLeft: y.scrollLeft(), scrollTop: y.scrollTop(), offset: y.offset() || { left: 0, top: 0 } }, x.adjusted = { left: "none" !== B.horizontal ? B.left(x.left) : 0, top: "none" !== B.vertical ? B.top(x.top) : 0 }, x.adjusted.left + x.adjusted.top && Q.attr("class", Q[0].className.replace(/ui-tooltip-pos-\w+/i, u + "-pos-" + i.abbrev())), z && x.adjusted.left && (x.left += z.left), z && x.adjusted.top && (x.top += z.top)) : x.adjusted = { left: 0, top: 0 }, t.originalEvent = a.extend({}, c), Q.trigger(t, [L, x, w.elem || w]), t.isDefaultPrevented() ? L : (delete x.adjusted, d === r || isNaN(x.left) || isNaN(x.top) || "mouse" === g || !a.isFunction(h.effect) ? Q.css(x) : a.isFunction(h.effect) && (h.effect.call(Q, L, a.extend({}, x)), Q.queue(function (b) { a(this).css({ opacity: "", height: "" }), a.browser.msie && this.style.removeAttribute("filter"), b() })), O = 0, L)
            }, redraw: function () { if (L.rendered < 1 || P) return L; var a, b, c, d, e = f.position.container; return P = 1, f.style.height && Q.css("height", f.style.height), f.style.width ? Q.css("width", f.style.width) : (Q.css("width", "").addClass(B), b = Q.width() + 1, c = Q.css("max-width") || "", d = Q.css("min-width") || "", a = (c + d).indexOf("%") > -1 ? e.width() / 100 : 0, c = (c.indexOf("%") > -1 ? a : 1) * parseInt(c, 10) || b, d = (d.indexOf("%") > -1 ? a : 1) * parseInt(d, 10) || 0, b = c + d ? Math.min(Math.max(b, d), c) : b, Q.css("width", Math.round(b)).removeClass(B)), P = 0, L }, disable: function (b) { return "boolean" != typeof b && (b = !(Q.hasClass(w) || K.disabled)), L.rendered ? (Q.toggleClass(w, b), a.attr(Q[0], "aria-disabled", b)) : K.disabled = !!b, L }, enable: function () { return L.disable(r) }, destroy: function () { var b = d[0], c = a.attr(b, D), e = d.data("qtip"); return L.rendered && (Q.remove(), a.each(L.plugins, function () { this.destroy && this.destroy() })), clearTimeout(L.timers.show), clearTimeout(L.timers.hide), I(), e && L !== e || (a.removeData(b, "qtip"), f.suppress && c && (a.attr(b, "title", c), d.removeAttr(D)), d.removeAttr("aria-describedby")), d.unbind(".qtip-" + g), delete t[L.id], d }
        })
    } function g(b, c) { var g, h, i, j, k, l = a(this), o = a(document.body), p = this === document ? o : l, t = l.metadata ? l.metadata(c.metadata) : s, u = "html5" === c.metadata.type && t ? t[c.metadata.name] : s, v = l.data(c.metadata.name || "qtipopts"); try { v = "string" == typeof v ? new Function("return " + v)() : v } catch (w) { d("Unable to parse HTML5 attribute data: " + v) } if (j = a.extend(q, {}, m.defaults, c, "object" == typeof v ? e(v) : s, e(u || t)), h = j.position, j.id = b, "boolean" == typeof j.content.text) { if (i = l.attr(j.content.attr), j.content.attr === r || !i) return d("Unable to locate content for tooltip! Aborting render of tooltip on element: ", l), r; j.content.text = i } if (h.container.length || (h.container = o), h.target === r && (h.target = p), j.show.target === r && (j.show.target = p), j.show.solo === q && (j.show.solo = o), j.hide.target === r && (j.hide.target = p), j.position.viewport === q && (j.position.viewport = h.container), h.at = new n.Corner(h.at), h.my = new n.Corner(h.my), a.data(this, "qtip")) if (j.overwrite) l.qtip("destroy"); else if (j.overwrite === r) return r; return j.suppress && (k = a.attr(this, "title")) && a(this).removeAttr("title").attr(D, k), g = new f(l, j, b, !!i), a.data(this, "qtip", g), l.bind("remove.qtip-" + b, function () { g.destroy() }), g } function h(b) { var c = this, d = b.elements.tooltip, e = b.options.content.ajax, f = ".qtip-ajax", g = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi; b.checks.ajax = { "^content.ajax": function (a, b, g) { "ajax" === b && (e = g), "once" === b ? c.init() : e && e.url ? c.load() : d.unbind(f) } }, a.extend(c, { init: function () { return e && e.url && d.unbind(f)[e.once ? "one" : "bind"]("tooltipshow" + f, c.load), c }, load: function (d, f) { function h() { n && (b.show(d.originalEvent), f = r), a.isFunction(e.complete) && e.complete.apply(this, arguments) } function i(c) { k && (c = a("<div/>").append(c.replace(g, "")).find(k)), b.set("content.text", c) } function j(a, c, d) { 0 !== a.status && b.set("content.text", c + ": " + d) } var k, l = e.url.indexOf(" "), m = e.url, n = e.once && !e.loading && f; if (n) try { d.preventDefault() } catch (o) { } else if (d && d.isDefaultPrevented()) return c; l > -1 && (k = m.substr(l), m = m.substr(0, l)), a.ajax(a.extend({ success: i, error: j, context: b }, e, { url: m, complete: h })) } }), c.init() } function i(b) { var c = this, d = b.elements, e = d.tooltip, f = ".bgiframe-" + b.id; a.extend(c, { init: function () { d.bgiframe = a('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'), d.bgiframe.appendTo(e), e.bind("tooltipmove" + f, c.adjust) }, adjust: function () { var a, c, f = b.get("dimensions"), g = b.plugins.tip, h = d.tip; c = parseInt(e.css("border-left-width"), 10) || 0, c = { left: -c, top: -c }, g && h && (a = "x" === g.corner.precedance ? ["width", "left"] : ["height", "top"], c[a[1]] -= h[a[0]]()), d.bgiframe.css(c).css(f) }, destroy: function () { d.bgiframe.remove(), e.unbind(f) } }), c.init() } function j(c) { function d() { u = a(t, k).not("[disabled]").map(function () { return "function" == typeof this.focus ? this : null }) } function e(a) { u.length < 1 && a.length ? a.not("body").blur() : u.first().focus() } function f(b) { var c, d = a(b.target), f = d.closest(".qtip"); c = f.length < 1 ? r : parseInt(f[0].style.zIndex, 10) > parseInt(k[0].style.zIndex, 10), c || a(b.target).closest(x)[0] === k[0] || e(d) } var g, h = this, i = c.options.show.modal, j = c.elements, k = j.tooltip, l = "#qtip-overlay", m = ".qtipmodal", o = m + c.id, p = "is-modal-qtip", s = a(document.body), t = n.modal.focusable.join(","), u = {}; c.checks.modal = { "^show.modal.(on|blur)$": function () { h.init(), j.overlay.toggle(k.is(":visible")) }, "^content.text$": function () { d() } }, a.extend(h, { init: function () { return i.on ? (g = h.create(), k.attr(p, q).css("z-index", n.modal.zindex + a(x + "[" + p + "]").length).unbind(m).unbind(o).bind("tooltipshow" + m + " tooltiphide" + m, function (b, c, d) { var e = b.originalEvent; if (b.target === k[0]) if (e && "tooltiphide" === b.type && /mouse(leave|enter)/.test(e.type) && a(e.relatedTarget).closest(g[0]).length) try { b.preventDefault() } catch (f) { } else (!e || e && !e.solo) && h[b.type.replace("tooltip", "")](b, d) }).bind("tooltipfocus" + m, function (b) { if (!b.isDefaultPrevented() && b.target === k[0]) { var c = a(x).filter("[" + p + "]"), d = n.modal.zindex + c.length, e = parseInt(k[0].style.zIndex, 10); g[0].style.zIndex = d - 2, c.each(function () { this.style.zIndex > e && (this.style.zIndex -= 1) }), c.end().filter("." + z).qtip("blur", b.originalEvent), k.addClass(z)[0].style.zIndex = d; try { b.preventDefault() } catch (f) { } } }).bind("tooltiphide" + m, function (b) { b.target === k[0] && a("[" + p + "]").filter(":visible").not(k).last().qtip("focus", b) }), i.escape && a(document).unbind(o).bind("keydown" + o, function (a) { 27 === a.keyCode && k.hasClass(z) && c.hide(a) }), i.blur && j.overlay.unbind(o).bind("click" + o, function (a) { k.hasClass(z) && c.hide(a) }), d(), h) : h }, create: function () { function c() { navigator.userAgent.match(/iPad/i) ? g.css({ height: b.innerHeight, width: b.innerWidth }) : g.css({ height: a(b).height(), width: a(b).width() }) } var d = a(l); return d.length ? j.overlay = d.insertAfter(a(x).last()) : (g = j.overlay = a("<div />", { id: l.substr(1), html: "<div></div>", mousedown: function () { return r } }).hide().insertAfter(a(x).last()), a(b).unbind(m).bind("resize" + m, c), c(), g) }, toggle: function (b, c, d) { if (b && b.isDefaultPrevented()) return h; var j = i.effect, l = c ? "show" : "hide", m = g.is(":visible"), n = a("[" + p + "]").filter(":visible").not(k); return g || (g = h.create()), g.is(":animated") && m === c || !c && n.length ? h : (c ? (g.css({ left: 0, top: 0 }), g.toggleClass("blurs", i.blur), i.stealfocus !== r && (s.bind("focusin" + o, f), e(a("body :focus")))) : s.unbind("focusin" + o), g.stop(q, r), a.isFunction(j) ? j.call(g, c) : j === r ? g[l]() : g.fadeTo(parseInt(d, 10) || 90, c ? 1 : 0, function () { c || a(this).hide() }), c || g.queue(function (a) { g.css({ left: "", top: "" }), a() }), h) }, show: function (a, b) { return h.toggle(a, q, b) }, hide: function (a, b) { return h.toggle(a, r, b) }, destroy: function () { var b = g; return b && (b = a("[" + p + "]").not(k).length < 1, b ? (j.overlay.remove(), a(document).unbind(m)) : j.overlay.unbind(m + c.id), s.undelegate("*", "focusin" + o)), k.removeAttr(p).unbind(m) } }), h.init() } function k(a, b, c) { var d = Math.ceil(b / 2), e = Math.ceil(c / 2), f = { bottomright: [[0, 0], [b, c], [b, 0]], bottomleft: [[0, 0], [b, 0], [0, c]], topright: [[0, c], [b, 0], [b, c]], topleft: [[0, 0], [0, c], [b, c]], topcenter: [[0, c], [d, 0], [b, c]], bottomcenter: [[0, 0], [b, 0], [d, c]], rightcenter: [[0, 0], [b, e], [0, c]], leftcenter: [[b, 0], [b, c], [0, e]] }; return f.lefttop = f.bottomright, f.righttop = f.bottomleft, f.leftbottom = f.topright, f.rightbottom = f.topleft, f[a.string()] } function l(b) { function d(a, d, e) { if (j.tip) { var f, g, k = h.corner.clone(), l = e.adjusted, n = b.options.position.adjust.method.split(" "), o = n[0], p = n[1] || n[0], s = { left: r, top: r, x: 0, y: 0 }, t = {}; h.corner.fixed !== q && ("shift" === o && "x" === k.precedance && l.left && "center" !== k.y ? k.precedance = "x" === k.precedance ? "y" : "x" : "flip" === o && l.left && (k.x = "center" === k.x ? l.left > 0 ? "left" : "right" : "left" === k.x ? "right" : "left"), "shift" === p && "y" === k.precedance && l.top && "center" !== k.x ? k.precedance = "y" === k.precedance ? "x" : "y" : "flip" === p && l.top && (k.y = "center" === k.y ? l.top > 0 ? "top" : "bottom" : "top" === k.y ? "bottom" : "top"), k.string() === m.corner.string() || m.top === l.top && m.left === l.left || h.update(k, r)), f = h.position(k, l), f.right !== c && (f.left = -f.right), f.bottom !== c && (f.top = -f.bottom), f.user = Math.max(0, i.offset), (s.left = "shift" === o && !!l.left) && ("center" === k.x ? t["margin-left"] = s.x = f["margin-left"] - l.left : (g = f.right !== c ? [l.left, -f.left] : [-l.left, f.left], (s.x = Math.max(g[0], g[1])) > g[0] && (e.left -= l.left, s.left = r), t[f.right !== c ? "right" : "left"] = s.x)), (s.top = "shift" === p && !!l.top) && ("center" === k.y ? t["margin-top"] = s.y = f["margin-top"] - l.top : (g = f.bottom !== c ? [l.top, -f.top] : [-l.top, f.top], (s.y = Math.max(g[0], g[1])) > g[0] && (e.top -= l.top, s.top = r), t[f.bottom !== c ? "bottom" : "top"] = s.y)), j.tip.css(t).toggle(!(s.x && s.y || "center" === k.x && s.y || "center" === k.y && s.x)), e.left -= f.left.charAt ? f.user : "shift" !== o || s.top || !s.left && !s.top ? f.left : 0, e.top -= f.top.charAt ? f.user : "shift" !== p || s.left || !s.left && !s.top ? f.top : 0, m.left = l.left, m.top = l.top, m.corner = k.clone() } } function e(a, b, c) { b = b ? b : a[a.precedance]; var d, e = l.hasClass(B), f = j.titlebar && "top" === a.y, g = f ? j.titlebar : j.content, h = "border-" + b + "-width"; return l.addClass(B), d = parseInt(g.css(h), 10), d = (c ? d || parseInt(l.css(h), 10) : d) || 0, l.toggleClass(B, e), d } function f(b) { var c = j.titlebar && "top" === b.y, d = c ? j.titlebar : j.content, e = a.browser.mozilla, f = e ? "-moz-" : a.browser.webkit ? "-webkit-" : "", g = b.y + (e ? "" : "-") + b.x, h = f + (e ? "border-radius-" + g : "border-" + g + "-radius"); return parseInt(d.css(h), 10) || parseInt(l.css(h), 10) || 0 } function g(a) { var b, c, d, e = "y" === a.precedance, f = o[e ? "width" : "height"], g = o[e ? "height" : "width"], h = a.string().indexOf("center") > -1, i = f * (h ? .5 : 1), j = Math.pow, k = Math.round, l = Math.sqrt(j(i, 2) + j(g, 2)), m = [t / i * l, t / g * l]; return m[2] = Math.sqrt(j(m[0], 2) - j(t, 2)), m[3] = Math.sqrt(j(m[1], 2) - j(t, 2)), b = l + m[2] + m[3] + (h ? 0 : m[0]), c = b / l, d = [k(c * g), k(c * f)], { height: d[e ? 0 : 1], width: d[e ? 1 : 0] } } var h = this, i = b.options.style.tip, j = b.elements, l = j.tooltip, m = { top: 0, left: 0 }, o = { width: i.width, height: i.height }, p = {}, t = i.border || 0, u = ".qtip-tip", v = !!(a("<canvas />")[0] || {}).getContext; h.corner = s, h.mimic = s, h.border = t, h.offset = i.offset, h.size = o, b.checks.tip = { "^position.my|style.tip.(corner|mimic|border)$": function () { h.init() || h.destroy(), b.reposition() }, "^style.tip.(height|width)$": function () { o = { width: i.width, height: i.height }, h.create(), h.update(), b.reposition() }, "^content.title.text|style.(classes|widget)$": function () { j.tip && h.update() } }, a.extend(h, { init: function () { var b = h.detectCorner() && (v || a.browser.msie); return b && (h.create(), h.update(), l.unbind(u).bind("tooltipmove" + u, d)), b }, detectCorner: function () { var a = i.corner, c = b.options.position, d = c.at, e = c.my.string ? c.my.string() : c.my; return a === r || e === r && d === r ? r : (a === q ? h.corner = new n.Corner(e) : a.string || (h.corner = new n.Corner(a), h.corner.fixed = q), m.corner = new n.Corner(h.corner.string()), "centercenter" !== h.corner.string()) }, detectColours: function (c) { var d, e, f = j.tip.css("cssText", ""), g = c || h.corner, k = g[g.precedance], m = "border-" + k + "-color", n = "border" + k.charAt(0) + k.substr(1) + "Color", q = /rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i, r = "background-color", s = "transparent", t = " !important", u = a(document.body).css("color"), v = (b.elements.content.css("color"), j.titlebar && ("top" === g.y || "center" === g.y && f.position().top + o.height / 2 + i.offset < j.titlebar.outerHeight(1))), w = v ? j.titlebar : j.content; l.addClass(B), p.fill = d = f.css(r), p.border = e = f[0].style[n] || f.css(m) || l.css(m), (!d || q.test(d)) && (p.fill = w.css(r) || s, q.test(p.fill) && (p.fill = l.css(r) || d)), (!e || q.test(e) || e === u) && (p.border = w.css(m) || s, q.test(p.border) && (p.border = e)), a("*", f).add(f).css("cssText", r + ":" + s + t + ";border:0" + t + ";"), l.removeClass(B) }, create: function () { var b, c = o.width, d = o.height; j.tip && j.tip.remove(), j.tip = a("<div />", { "class": "ui-tooltip-tip" }).css({ width: c, height: d }).prependTo(l), v ? a("<canvas />").appendTo(j.tip)[0].getContext("2d").save() : (b = '<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>', j.tip.html(b + b), a("*", j.tip).bind("click mousedown", function (a) { a.stopPropagation() })) }, update: function (b, c) { var d, f, l, u, w, x = j.tip, y = x.children(), z = o.width, A = o.height, B = i.mimic, C = Math.round; b || (b = m.corner || h.corner), B === r ? B = b : (B = new n.Corner(B), B.precedance = b.precedance, "inherit" === B.x ? B.x = b.x : "inherit" === B.y ? B.y = b.y : B.x === B.y && (B[b.precedance] = b[b.precedance])), d = B.precedance, h.detectColours(b), "transparent" !== p.border && "#123456" !== p.border ? (t = e(b, s, q), 0 === i.border && t > 0 && (p.fill = p.border), h.border = t = i.border !== q ? i.border : t) : h.border = t = 0, l = k(B, z, A), h.size = w = g(b), x.css(w), u = "y" === b.precedance ? [C("left" === B.x ? t : "right" === B.x ? w.width - z - t : (w.width - z) / 2), C("top" === B.y ? w.height - A : 0)] : [C("left" === B.x ? w.width - z : 0), C("top" === B.y ? t : "bottom" === B.y ? w.height - A - t : (w.height - A) / 2)], v ? (y.attr(w), f = y[0].getContext("2d"), f.restore(), f.save(), f.clearRect(0, 0, 3e3, 3e3), f.translate(u[0], u[1]), f.beginPath(), f.moveTo(l[0][0], l[0][1]), f.lineTo(l[1][0], l[1][1]), f.lineTo(l[2][0], l[2][1]), f.closePath(), f.fillStyle = p.fill, f.strokeStyle = p.border, f.lineWidth = 2 * t, f.lineJoin = "miter", f.miterLimit = 100, t && f.stroke(), f.fill()) : (l = "m" + l[0][0] + "," + l[0][1] + " l" + l[1][0] + "," + l[1][1] + " " + l[2][0] + "," + l[2][1] + " xe", u[2] = t && /^(r|b)/i.test(b.string()) ? 8 === parseFloat(a.browser.version, 10) ? 2 : 1 : 0, y.css({ antialias: "" + (B.string().indexOf("center") > -1), left: u[0] - u[2] * Number("x" === d), top: u[1] - u[2] * Number("y" === d), width: z + t, height: A + t }).each(function (b) { var c = a(this); c[c.prop ? "prop" : "attr"]({ coordsize: z + t + " " + (A + t), path: l, fillcolor: p.fill, filled: !!b, stroked: !b }).css({ display: t || b ? "block" : "none" }), b || "" !== c.html() || c.html('<vml:stroke weight="' + 2 * t + 'px" color="' + p.border + '" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />') })), c !== r && h.position(b) }, position: function (b) { var c, d, k, l = j.tip, m = {}, n = Math.max(0, i.offset); return i.corner !== r && l ? (b = b || h.corner, c = b.precedance, d = g(b), k = [b.x, b.y], "x" === c && k.reverse(), a.each(k, function (a, g) { var h, i; "center" === g ? (h = "y" === c ? "left" : "top", m[h] = "50%", m["margin-" + h] = -Math.round(d["y" === c ? "width" : "height"] / 2) + n) : (h = e(b, g, q), i = f(b), m[g] = a ? t ? e(b, g) : 0 : n + (i > h ? i : 0)) }), m[b[c]] -= d["x" === c ? "width" : "height"], l.css({ top: "", bottom: "", left: "", right: "", margin: "" }).css(m), m) : r }, destroy: function () { j.tip && j.tip.remove(), l.unbind(u) } }), h.init() } var m, n, o, p, q = !0, r = !1, s = null, t = {}, u = "ui-tooltip", v = "ui-widget", w = "ui-state-disabled", x = "div.qtip." + u, y = u + "-default", z = u + "-focus", A = u + "-hover", B = u + "-fluid", C = "_replacedByqTip", D = "oldtitle"; m = a.fn.qtip = function (b, d, f) { var g = ("" + b).toLowerCase(), h = s, i = a.makeArray(arguments).slice(1), j = i[i.length - 1], k = this[0] ? a.data(this[0], "qtip") : s; return !arguments.length && k || "api" === g ? k : "string" == typeof b ? (this.each(function () { var b = a.data(this, "qtip"); if (!b) return q; if (j && j.timeStamp && (b.cache.event = j), "option" !== g && "options" !== g || !d) b[g] && b[g].apply(b[g], i); else { if (!a.isPlainObject(d) && f === c) return h = b.get(d), r; b.set(d, f) } }), h !== s ? h : this) : "object" != typeof b && arguments.length ? void 0 : (k = e(a.extend(q, {}, b)), m.bind.call(this, k, j)) }, m.bind = function (b, d) { return this.each(function (e) { function f(b) { function d() { l.render("object" == typeof b || h.show.ready), i.show.add(i.hide).unbind(k) } return l.cache.disabled ? r : (l.cache.event = a.extend({}, b), l.cache.target = b ? a(b.target) : [c], void (h.show.delay > 0 ? (clearTimeout(l.timers.show), l.timers.show = setTimeout(d, h.show.delay), j.show !== j.hide && i.hide.bind(j.hide, function () { clearTimeout(l.timers.show) })) : d())) } var h, i, j, k, l, p; return p = a.isArray(b.id) ? b.id[e] : b.id, p = !p || p === r || p.length < 1 || t[p] ? m.nextid++ : t[p] = p, k = ".qtip-" + p + "-create", l = g.call(this, p, b), l === r ? q : (h = l.options, a.each(n, function () { "initialize" === this.initialize && this(l) }), i = { show: h.show.target, hide: h.hide.target }, j = { show: a.trim("" + h.show.event).replace(/ /g, k + " ") + k, hide: a.trim("" + h.hide.event).replace(/ /g, k + " ") + k }, /mouse(over|enter)/i.test(j.show) && !/mouse(out|leave)/i.test(j.hide) && (j.hide += " mouseleave" + k), i.show.bind("mousemove" + k, function (a) { o = { pageX: a.pageX, pageY: a.pageY, type: "mousemove" } }), i.show.bind(j.show, f), void ((h.show.ready || h.prerender) && f(d))) }) }, n = m.plugins = { Corner: function (a) { a = ("" + a).replace(/([A-Z])/, " $1").replace(/middle/gi, "center").toLowerCase(), this.x = (a.match(/left|right/i) || a.match(/center/) || ["inherit"])[0].toLowerCase(), this.y = (a.match(/top|bottom|center/i) || ["inherit"])[0].toLowerCase(); var b = a.charAt(0); this.precedance = "t" === b || "b" === b ? "y" : "x", this.string = function () { return "y" === this.precedance ? this.y + this.x : this.x + this.y }, this.abbrev = function () { var a = this.x.substr(0, 1), b = this.y.substr(0, 1); return a === b ? a : "c" === a || "c" !== a && "c" !== b ? b + a : a + b }, this.clone = function () { return { x: this.x, y: this.y, precedance: this.precedance, string: this.string, abbrev: this.abbrev, clone: this.clone } } }, offset: function (a, b) { function c(a, b) { f.left += b * a.scrollLeft(), f.top += b * a.scrollTop() } var d, e, f = a.offset(), g = b, h = 0, i = document.body; if (g) { do if ("static" !== g.css("position") && (d = g[0] === i ? { left: parseInt(g.css("left"), 10) || 0, top: parseInt(g.css("top"), 10) || 0 } : g.position(), f.left -= d.left + (parseInt(g.css("borderLeftWidth"), 10) || 0) + (parseInt(g.css("marginLeft"), 10) || 0), f.top -= d.top + (parseInt(g.css("borderTopWidth"), 10) || 0), e = g.css("overflow"), ("scroll" === e || "auto" === e) && h++), g[0] === i) break; while (g = g.offsetParent()); b[0] !== i && h && c(b, 1) } return f }, iOS: parseFloat(("" + (/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ""])[1]).replace("undefined", "3_2").replace("_", ".")) || r, fn: { attr: function (b, c) { if (this.length) { var d = this[0], e = "title", f = a.data(d, "qtip"); if (b === e && f && "object" == typeof f && f.options.suppress) return arguments.length < 2 ? a.attr(d, D) : (f && f.options.content.attr === e && f.cache.attr && f.set("content.text", c), this.attr(D, c)) } return a.fn["attr" + C].apply(this, arguments) }, clone: function (b) { var c = (a([]), a.fn["clone" + C].apply(this, arguments)); return b || c.filter("[" + D + "]").attr("title", function () { return a.attr(this, D) }).removeAttr(D), c }, remove: a.ui ? s : function (b, c) { a.ui || a(this).each(function () { c || (!b || a.filter(b, [this]).length) && a("*", this).add(this).each(function () { a(this).triggerHandler("remove") }) }) } } }, a.each(n.fn, function (b, c) { if (!c || a.fn[b + C]) return q; var d = a.fn[b + C] = a.fn[b]; a.fn[b] = function () { return c.apply(this, arguments) || d.apply(this, arguments) } }), m.version = "2.0.0pre", m.nextid = 0, m.inactiveEvents = "click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "), m.zindex = 15e3, m.defaults = { prerender: r, id: r, overwrite: q, suppress: q, content: { text: q, attr: "title", title: { text: r, button: r } }, position: { my: "top left", at: "bottom right", target: r, container: r, viewport: r, adjust: { x: 0, y: 0, mouse: q, resize: q, method: "flip flip" }, effect: function (b, c) { a(this).animate(c, { duration: 200, queue: r }) } }, show: { target: r, event: "mouseenter", effect: q, delay: 90, solo: r, ready: r, autofocus: r }, hide: { target: r, event: "mouseleave", effect: q, delay: 0, fixed: r, inactive: r, leave: "window", distance: r }, style: { classes: "", widget: r, width: r, height: r, "default": q }, events: { render: s, move: s, show: s, hide: s, toggle: s, visible: s, focus: s, blur: s } }, n.ajax = function (a) { var b = a.plugins.ajax; return "object" == typeof b ? b : a.plugins.ajax = new h(a) }, n.ajax.initialize = "render", n.ajax.sanitize = function (a) { var b, c = a.content; c && "ajax" in c && (b = c.ajax, "object" != typeof b && (b = a.content.ajax = { url: b }), "boolean" != typeof b.once && b.once && (b.once = !!b.once)) }, a.extend(q, m.defaults, { content: { ajax: { loading: q, once: q } } }), n.bgiframe = function (b) { var c = a.browser, d = b.plugins.bgiframe; return a("select, object").length < 1 || !c.msie || "6" !== ("" + c.version).charAt(0) ? r : "object" == typeof d ? d : b.plugins.bgiframe = new i(b) }, n.bgiframe.initialize = "render", n.imagemap = function (b, c, d) { function e(a, b, c) { for (var d = 0, e = 1, f = 1, g = 0, h = 0, i = a.width, j = a.height; i > 0 && j > 0 && e > 0 && f > 0;) for (i = Math.floor(i / 2), j = Math.floor(j / 2), "left" === c.x ? e = i : "right" === c.x ? e = a.width - i : e += Math.floor(i / 2), "top" === c.y ? f = j : "bottom" === c.y ? f = a.height - j : f += Math.floor(j / 2), d = b.length; d-- && !(b.length < 2) ;) g = b[d][0] - a.offset.left, h = b[d][1] - a.offset.top, ("left" === c.x && g >= e || "right" === c.x && e >= g || "center" === c.x && (e > g || g > a.width - e) || "top" === c.y && h >= f || "bottom" === c.y && f >= h || "center" === c.y && (f > h || h > a.height - f)) && b.splice(d, 1); return { left: b[0][0], top: b[0][1] } } b.jquery || (b = a(b)); var f = (b[0].shape || b.attr("shape")).toLowerCase(), g = (b[0].coords || b.attr("coords")).split(","), h = [], i = a('img[usemap="#' + b.parent("map").attr("name") + '"]'), j = i.offset(), k = { width: 0, height: 0, offset: { top: 1e10, right: 0, bottom: 0, left: 1e10 } }, l = 0, m = 0; if (j.left += Math.ceil((i.outerWidth() - i.width()) / 2), j.top += Math.ceil((i.outerHeight() - i.height()) / 2), "poly" === f) for (l = g.length; l--;) m = [parseInt(g[--l], 10), parseInt(g[l + 1], 10)], m[0] > k.offset.right && (k.offset.right = m[0]), m[0] < k.offset.left && (k.offset.left = m[0]), m[1] > k.offset.bottom && (k.offset.bottom = m[1]), m[1] < k.offset.top && (k.offset.top = m[1]), h.push(m); else h = a.map(g, function (a) { return parseInt(a, 10) }); switch (f) { case "rect": k = { width: Math.abs(h[2] - h[0]), height: Math.abs(h[3] - h[1]), offset: { left: Math.min(h[0], h[2]), top: Math.min(h[1], h[3]) } }; break; case "circle": k = { width: h[2] + 2, height: h[2] + 2, offset: { left: h[0], top: h[1] } }; break; case "poly": a.extend(k, { width: Math.abs(k.offset.right - k.offset.left), height: Math.abs(k.offset.bottom - k.offset.top) }), "centercenter" === c.string() ? k.offset = { left: k.offset.left + k.width / 2, top: k.offset.top + k.height / 2 } : (k.offset = e(k, h.slice(), c), !d || "flip" !== d[0] && "flip" !== d[1] || (k.flipoffset = e(k, h.slice(), { x: "left" === c.x ? "right" : "right" === c.x ? "left" : "center", y: "top" === c.y ? "bottom" : "bottom" === c.y ? "top" : "center" }), k.flipoffset.left -= k.offset.left, k.flipoffset.top -= k.offset.top)), k.width = k.height = 0 } return k.offset.left += j.left, k.offset.top += j.top, k }, n.modal = function (a) { var b = a.plugins.modal; return "object" == typeof b ? b : a.plugins.modal = new j(a) }, n.modal.initialize = "render", n.modal.sanitize = function (a) { a.show && ("object" != typeof a.show.modal ? a.show.modal = { on: !!a.show.modal } : "undefined" == typeof a.show.modal.on && (a.show.modal.on = q)) }, n.modal.zindex = m.zindex - 200, n.modal.focusable = ["a[href]", "area[href]", "input", "select", "textarea", "button", "iframe", "object", "embed", "[tabindex]", "[contenteditable]"], a.extend(q, m.defaults, { show: { modal: { on: r, effect: q, blur: q, stealfocus: q, escape: q } } }), n.svg = function (b) { var c, d, e, f, g, h = a(document), i = b[0], j = { width: 0, height: 0, offset: { top: 1e10, left: 1e10 } }; if (i.getBBox && i.parentNode) { if (c = i.getBBox(), d = i.getScreenCTM(), e = i.farthestViewportElement || i, !e.createSVGPoint) return j; f = e.createSVGPoint(), f.x = c.x, f.y = c.y, g = f.matrixTransform(d), j.offset.left = g.x, j.offset.top = g.y, f.x += c.width, f.y += c.height, g = f.matrixTransform(d), j.width = g.x - j.offset.left, j.height = g.y - j.offset.top, j.offset.left += h.scrollLeft(), j.offset.top += h.scrollTop() } return j }, n.tip = function (a) { var b = a.plugins.tip; return "object" == typeof b ? b : a.plugins.tip = new l(a) }, n.tip.initialize = "render", n.tip.sanitize = function (a) { var b, c = a.style; c && "tip" in c && (b = a.style.tip, "object" != typeof b && (a.style.tip = { corner: b }), /string|boolean/i.test(typeof b.corner) || (b.corner = q), "number" != typeof b.width && delete b.width, "number" != typeof b.height && delete b.height, "number" != typeof b.border && b.border !== q && delete b.border, "number" != typeof b.offset && delete b.offset) }, a.extend(q, m.defaults, { style: { tip: { corner: q, mimic: r, width: 6, height: 6, border: q, offset: 0 } } })
}(jQuery, window), Saatchi.Share = function (a) { "use strict"; return { event: "click", init: function () { Saatchi.Share.SharePage.init() }, SharePage: { width: 500, height: 500, url: null, total: 0, viewportWidth: a(window).width(), init: function () { if (0 === a("#shareArt").length) return !1; Saatchi.Share.SharePage.url = a("#shareArt").data("url").split("?")[0]; for (var b = document.querySelectorAll(".share"), c = 0; c < b.length; c++) b[c].onclick = Saatchi.Share.SharePage.popup; Saatchi.Share.SharePage.display() }, popup: function (a) { a = a ? a : window.event; var b = a.target.href ? a.target.href : a.target.parentNode.href, c = a.target.dataset.source ? a.target.dataset.source : a.target.parentNode.dataset.source, d = Math.floor(((screen.availWidth || 1024) - Saatchi.Share.SharePage.width) / 2), e = Math.floor(((screen.availHeight || 700) - Saatchi.Share.SharePage.height) / 2), f = window.open(b, "social", "width=" + Saatchi.Share.SharePage.width + ",height=" + Saatchi.Share.SharePage.height + ",left=" + d + ",top=" + e + ",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1"); return f && (f.focus(), a.preventDefault && a.preventDefault(), a.returnValue = !1), "facebook" === c && dataLayer.push({ event: "facebook_share" + Saatchi.Share.SharePage.url }), !!f }, getTotal: function () { var b = a("#shareArt"); "undefined" != typeof FB && null != FB.getAccessToken() ? FB.getLoginStatus(function (c) { if ("connected" === c.status) { var d = c.authResponse.accessToken; a.getJSON("https://graph.facebook.com/?id=" + Saatchi.Share.SharePage.url + "&access_token=" + d, function (a) { a.shares || (a.shares = 0), b.attr("data-facebookshares", a.shares) }) } else "not_authorized" === c.status || a.getJSON("https://graph.facebook.com/?id=" + Saatchi.Share.SharePage.url, function (a) { a.shares || (a.shares = 0), b.attr("data-facebookshares", a.shares) }) }) : a.getJSON("https://graph.facebook.com/?id=" + Saatchi.Share.SharePage.url, function (a) { a.shares || (a.shares = 0), b.attr("data-facebookshares", a.shares) }), a.getJSON("//cdn.api.twitter.com/1/urls/count.json?url=" + Saatchi.Share.SharePage.url + "&callback=?", function (a) { b.attr("data-twittershares", a.count) }), a.getJSON("//api.pinterest.com/v1/urls/count.json?url=" + Saatchi.Share.SharePage.url + "&callback=?", function (a) { b.attr("data-pinterestshares", a.count) }), Saatchi.Share.SharePage.setTotal() }, setTotal: function () { var b = a("#shareArt"); if (void 0 != b.attr("data-facebookshares") && void 0 != b.attr("data-twittershares") && void 0 != b.attr("data-pinterestshares")) { var c = parseInt(b.attr("data-facebookshares")), d = parseInt(b.attr("data-twittershares")), e = parseInt(b.attr("data-pinterestshares")), f = c + d + e; a("#totalShares").text(Saatchi.Share.SharePage.formatNumber(f)), Saatchi.Share.SharePage.display() } else setTimeout(function () { Saatchi.Share.SharePage.setTotal() }, 200) }, formatNumber: function (a) { return a >= 1e9 ? (a / 1e9).toFixed(1).replace(/\.0$/, "") + "G" : a >= 1e6 ? (a / 1e6).toFixed(1).replace(/\.0$/, "") + "M" : a >= 1e3 ? (a / 1e3).toFixed(1).replace(/\.0$/, "") + "K" : a }, display: function () { Saatchi.Share.SharePage.viewportWidth < 1070 && a(".share-module").append('<div class="collapsed"><i class="fa fa-share"></i></div>').fadeIn(3e3), a(window).scroll(function () { a("#shareArt").fadeIn("slow") }), a(".collapsed").on("click", function () { a(this).hide(300), a(".facebook, .twitter, .pinterest, .email").show(300).css("display", "block"), setTimeout(function () { a(".facebook, .twitter, .pinterest, .email, .total-share").fadeOut(600), a(this).delay(4e3).show(300), Saatchi.Share.SharePage.display() }, 8e3) }) } } } }(jQuery), Saatchi.Signup = function (a) {
    var b = "signup-form"; return {
        container: null, isLoggedIn: !1, isSignUp: !0, forceType: null, imageUploadServer: null, pubKey: null, redirectUrl: null, source: null, defaultSource: null, signupUserType: null, captchaEnabled: !1, init: function () { Saatchi.Signup._initializeContainer(), Saatchi.Signup.observeBackLink() }, v2Enabled: function () { return window.V2_AUTH_ENABLED }, redirectToLogin: function (a) { var b, c = {}, d = ""; "undefined" == typeof a && (a = {}), b = a.url ? a.url : window.LOGIN_URL, c.redirect_url = a.redirect_url ? a.redirect_url : window.location.pathname + window.location.search, a.message && (c.message = 1); for (var e in c) c.hasOwnProperty(e) && (d += encodeURIComponent(e) + "=" + encodeURIComponent(c[e]) + "&"); "" !== d && (d = d.slice(0, -1), b += "?" + d), window.location = b }, observeBackLink: function () { a(document).on("click", "#" + b + " .back", function (b) { b.preventDefault(), Saatchi.Signup.forceType = null, Saatchi.GoogleTracking.trackEvent("Create An Account", "Back Button"); var c = Saatchi.Signup.container.children("div:visible"), d = c.prev("div"); if (0 == d.length) return Saatchi.Signup.accountRequired(); a(".Agency-account, .collector-account", Saatchi.Signup.container).removeClass("hover"), Saatchi.Signup._slideRight(c), Saatchi.Signup._slideCenter(d); var e = 0; return 0 == d.index() && (e = 40), Saatchi.Modal.api && Saatchi.Modal.api.reposition(), !1 }) }, facebookConnect: function () { null != Saatchi.Signup.redirectUrl ? url = Saatchi.Signup.redirectUrl : url = window.location.href, Saatchi.GoogleTracking.trackEvent("Create Account / Login", "Connect With Facebook"), Saatchi.GoogleTracking.trackPageview("/register/signup-signin/facebook"); var a = a || []; a.push({ event: "signupFaceBook" }), Saatchi.Facebook.fblogin(url, Saatchi.Signup._handleFacebookConnectResponse) }, _handleFacebookConnectResponse: function () {
            Saatchi.Signup._showLoader(), a.get("/accounts/check-facebook-connect", function (a) {
                Saatchi.GoogleTracking.trackEvent("Create Account / Login", "FB Login"), Saatchi.GoogleTracking.trackPageview("/register/signup-signin/facebooklogin"), Saatchi.Signup._hideLoader(), a.success ? a.newUser ? (Saatchi.Signup.isLoggedIn = !0,
                Saatchi.Signup.selectAccountType()) : null != Saatchi.Signup.redirectUrl ? window.location = Saatchi.Signup.redirectUrl : window.location.reload() : Saatchi.Dialog.error(a.message)
            })
        }, openAccountType: function () { return Saatchi.Signup.v2Enabled() ? Saatchi.Signup.redirectToLogin() : (Saatchi.Signup._openDialog(), Saatchi.Signup.isSignUp = !0, void Saatchi.Signup.selectAccountType()) }, openAgencySignUp: function () { return Saatchi.Signup.v2Enabled() ? Saatchi.Signup.redirectToLogin({ url: window.REGISTER_URL }) : (Saatchi.Signup._openDialog(), Saatchi.Signup.forceType = "Agency", void Saatchi.Signup.AgencyAccount()) }, openAccountRequired: function (b, c, d) { return Saatchi.Signup.v2Enabled() ? Saatchi.Signup.redirectToLogin({ redirect_url: b, message: c }) : (Saatchi.Signup._openDialog(), a("#so-signin-submit").val("Logging In"), Saatchi.GoogleTracking.trackPageview("/register/signup-signin"), "undefined" == typeof b && (b = ""), "undefined" != typeof d && (Saatchi.Signup.forceType = d), Saatchi.Signup.redirectUrl = b, void Saatchi.Signup.accountRequired(c)) }, accountRequired: function (b) { return Saatchi.Signup.v2Enabled() ? Saatchi.Signup.redirectToLogin({ message: b }) : (Saatchi.Signup._reset(), Saatchi.Signup._showLoader(), Saatchi.Signup.isSignUp = !0, b || (b = ""), Saatchi.Signup.container.load("/wizard", { redirect_url: Saatchi.Signup.redirectUrl, destination_message: b }, function () { Saatchi.Signup._hideLoader(), a("#so-signin-form").submit(function (b) { return b.preventDefault(), Saatchi.Signup._showLoader(), a("#so-signin-submit").val("Logging In"), Saatchi.GoogleTracking.trackEvent("Create Account / Login", "Login"), Saatchi.GoogleTracking.trackPageview("/register/signup-signin/login"), a.post("/accounts/sign-in", a("#so-signin-form").serialize(), function (b) { b.redirectUrl && null !== b.redirectUrl && "" !== b.redirectUrl && "null" !== b.redirectUrl ? window.location = b.redirectUrl : b.success ? window.location.reload() : (a("#so-signin-submit").val("Login"), Saatchi.Signup._hideLoader(), Saatchi.Dialog.error(b.message)) }), !1 }) }), void Saatchi.Modal.api.reposition()) }, selectAccountType: function () { return Saatchi.GoogleTracking.trackEvent("Create Account / Login", "Create Account Button"), "collector" === Saatchi.Signup.forceType ? (Saatchi.Signup.container.html(""), Saatchi.Signup.collectorAccount()) : "Agency" == Saatchi.Signup.forceType ? (Saatchi.Signup.container.html(""), Saatchi.Signup.AgencyAccount()) : (Saatchi.GoogleTracking.trackPageview("/register/silhouette/collector-Agency"), Saatchi.Signup._showLoader(), void Saatchi.Signup.container.load("/wizard/account-type", function () { a(".Agency-account", Saatchi.Signup.container).click(function () { return a(this).addClass("hover"), Saatchi.Signup._showLoader(), Saatchi.Signup.signupUserType = "Agency", a.post("/wizard/set-account-type", { account_type: "Agency" }, function () { Saatchi.Signup._hideLoader(), Saatchi.Signup._loadForm("Agency") }), !1 }), a(".collector-account", Saatchi.Signup.container).click(function () { return a(this).addClass("hover"), Saatchi.Signup._showLoader(), Saatchi.Signup.signupUserType = "collector", a.post("/wizard/set-account-type", { account_type: "collector" }, function () { Saatchi.Signup._hideLoader(), Saatchi.Signup._loadForm("collector") }), !1 }), Saatchi.Modal.api.reposition(), Saatchi.Signup._hideLoader() })) }, collectorPreferences: function () { Saatchi.Signup._reset(), Saatchi.Signup._showLoader(), Saatchi.Signup.container.append('<div id="step-two" class="step" />'), a("#step-two").load("/wizard/collector", function () { Saatchi.Signup._hideLoader(), Saatchi.Signup._slideLeft(a("#step-one")), Saatchi.Signup._slideCenter(a("#step-two")), Saatchi.Signup._selectPreference(), Saatchi.Signup._selectPricePoint(), a("#step-two .next").click(function (a) { a.preventDefault(), Saatchi.Signup._validateCollectorPreferences() }), Saatchi.Modal.api.reposition() }) }, AgencyAccount: function () { Saatchi.Signup._reset(), Saatchi.Signup._showLoader(), Saatchi.Signup.container.append('<div id="step-two" class="step" />'), Saatchi.Signup._slideLeft(a("#step-one")), Saatchi.GoogleTracking.trackPageview("/register/silhouette/Agency/signup"), a("#step-two").load("/account/registration/register/type/Agency", function () { Saatchi.Signup._hideLoader(), Saatchi.Signup._slideCenter(a("#step-two")), a("#so-signup-source").val(Saatchi.Signup._getSource()), a("#so-signup-form form").submit(Saatchi.Signup._handleCreateUserSubmit), Saatchi.GoogleTracking.trackPageview("/register/silhouette/Agency/thankyou"), Saatchi.Signup._createRecaptcha() }) }, collectorAccount: function () { Saatchi.Signup._reset(), Saatchi.Signup._showLoader(), Saatchi.Signup.container.append('<div id="step-two" class="step" />'), Saatchi.GoogleTracking.trackPageview("/register/silhouette/collector/signup"), Saatchi.Signup._slideLeft(a("#step-one")), a("#step-two").load("/account/registration/register/type/collector", function () { Saatchi.Signup._hideLoader(), Saatchi.Signup._slideCenter(a("#step-two")), a("#so-signup-source").val(Saatchi.Signup._getSource()), a("#so-signup-form form").submit(Saatchi.Signup._handleCreateUserSubmit), Saatchi.GoogleTracking.trackPageview("/register/silhouette/collector/thankyou"), Saatchi.Modal.api.reposition() }), Saatchi.Signup.captchaEnabled = !1 }, onProfilePicUpload: function (b, c, d, e, f) { e = a.parseJSON(e); a(b.target), e.server + "?img=" + e.originalFile; Saatchi.Signup.container.find("#profileImage").val(e.originalFile), Saatchi.Signup.container.find("#profileImageDisplay").attr("src", e.server + "?img=" + e.thumbURL) }, _handleCreateUserSubmit: function (b) { return Saatchi.Signup._showLoader(), b.preventDefault(), Saatchi.GoogleTracking.trackEvent("Create An Account", "Create Account Button"), a.post("/account/registration/register", a("#so-signup-form form").serialize(), function (a) { if (a.success) Saatchi.Signup.signupUserType = a.userType, Saatchi.GoogleTracking.trackPageview("/newsletter/" + a.userType + "/thankyou"), Saatchi.Signup._signupCompleteRedirect(); else { Saatchi.Signup._hideLoader(); var b = a.messages; b || (b = "An error occurred, check your internet connection or contact us at support@saatchiart.com"), Saatchi.Dialog.error(b), 1 == Saatchi.Signup.captchaEnabled && Saatchi.Signup._reloadRecaptcha() } }), !1 }, _slideLeft: function (a) { a.hide() }, _slideCenter: function (a) { a.show(), a.css("filter", "") }, _slideRight: function (a) { a.hide() }, _showLoader: function () { Saatchi.Signup.container.append(a('<div class="loader"><img src="/media/images/status/loading/large.gif"></div>')) }, _hideLoader: function () { a(".loader", Saatchi.Signup.container).remove().fadeOut() }, _selectPricePoint: function () { a("#slider").slider({ value: 0, min: 0, max: a("#slider-labels span").length - 1, step: 1, animate: "fast", stop: function (b, c) { a("#slider-labels span").css("color", "#aaaaaa"), a("#price-point-selected").val(c.value), a("#slider-labels span:eq(" + c.value + ")").css("color", "#424242") } }) }, _selectPreference: function () { a(".select-type input:checked").parent().addClass("selected"), a(".select-type .checkbox-select").click(function (b) { b.preventDefault(), a(this).parent().addClass("selected"), a(this).parent().find(":checkbox").attr("checked", "checked") }), a(".select-type .checkbox-deselect").click(function (b) { b.preventDefault(), a(this).parent().removeClass("selected"), a(this).parent().find(":checkbox").removeAttr("checked") }) }, _selectAll: function () { a(document).on("click", ".so-select-all", function () { var b = a(this).siblings("ul"), c = b.children("li"); return c.addClass("selected"), c.find(":checkbox").attr("checked", "checked"), !1 }) }, _validateCollectorPreferences: function () { a.post("/wizard/collector-validate", a("#so-collector-form").serialize(), function (a) { a.success ? Saatchi.Signup._signupCompleteRedirect() : Saatchi.Dialog.error(a.messages) }) }, _signupCompleteRedirect: function () { Saatchi.Signup._showLoader(), Saatchi.GoogleTracking.trackEvent("signUp", "user-" + Saatchi.Signup.signupUserType, Saatchi.Signup._getSource(), function () { Saatchi.Signup.redirectUrl ? "!reload" == Saatchi.Signup.redirectUrl ? window.location.reload() : window.location = Saatchi.Signup.redirectUrl : window.location = "/wizard/redirect" }) }, _getSource: function () { return Saatchi.Signup.source ? Saatchi.Signup.source : Saatchi.Signup.defaultSource }, _resizeModal: function (a) { Saatchi.Signup.container.animate({ height: a }, 100) }, _initializeContainer: function () { Saatchi.Signup.container = a("<div/>", { id: b, "class": "hidden transition" }), a("body").append(Saatchi.Signup.container) }, _initRecaptcha: function () { if ("undefined" == typeof Recaptcha) { var a = document.createElement("script"); a.src = "//www.google.com/recaptcha/api/js/recaptcha_ajax.js", document.getElementsByTagName("head")[0].appendChild(a) } }, _createRecaptcha: function () { Recaptcha.create(Saatchi.Signup.pubKey, "captcha", { theme: "clean", callback: function () { Saatchi.Modal.api.reposition() } }), Saatchi.Signup.captchaEnabled = !0 }, _reloadRecaptcha: function () { Recaptcha.reload() }, _openDialog: function () { Saatchi.Modal.content = Saatchi.Signup.container, Saatchi.Modal["class"] = "so-sigup-wizard", Saatchi.Modal.title = '<img src="https://dfcdths9j2gip.cloudfront.net/images/saatchiart-logo@1x.png" width="258px">', Saatchi.Modal.viewport = !1, Saatchi.Modal.onHide = function () { Saatchi.Signup.container.html(""), Saatchi.Signup._initializeContainer() }, Saatchi.Modal.onRender = function () { Saatchi.Signup.container.removeClass("hidden"), Saatchi.GoogleTracking.trackPageview("/register/signup-signin") }, Saatchi.Modal.init(), Saatchi.Signup._initRecaptcha() }, _loadForm: function (a) { "Agency" == a ? Saatchi.Signup.isLoggedIn ? Saatchi.Signup._signupCompleteRedirect() : Saatchi.Signup.AgencyAccount() : Saatchi.Signup.isSignUp ? Saatchi.Signup.collectorAccount() : Saatchi.Signup.collectorPreferences() }, _reset: function () { a("#step-two").remove() }
    }
}(jQuery), Saatchi.Tips = function (a) { "use strict"; return { init: function (b) { var c = b ? b : a(".so-quick-tip[title]"); c.each(function () { a(this).qtip({ position: { viewport: a(window), my: "bottom center", at: "top center", target: a(this), adjust: { target: a(document) } }, hide: { delay: 0, event: "unfocus mouseleave click" }, style: { classes: "ui-tooltip-dark ui-tooltip-shadow ui-tooltip-tips", tip: { height: 5, width: 10 } } }).removeData("qtip") }), a(".so-more-tip").each(function () { var b = a(this).data("color") || "light", c = a(this).data("color") ? "" : "ui-tooltip-more"; a(this).qtip({ content: { text: a(this).next() }, position: { viewport: a(window), my: "top center", at: "bottom center", target: a(this), adjust: { target: a(document) } }, show: { event: a(this).data().event ? a(this).data().event : "mouseenter hover" }, hide: { delay: 0, event: "unfocus mouseleave click" }, style: { classes: "ui-tooltip-" + b + " ui-tooltip-shadow " + c, tip: { height: 5, width: 25 } } }).removeData("qtip").on("click", function () { return !1 }) }) }, custom: function (a) { return !1 } } }(jQuery), Saatchi.Totop = function (a) { a.fn.UItoTop = function (b) { var c = { text: "To Top", min: 200, inDelay: 600, outDelay: 400, containerID: "so-to-top", containerHoverID: "so-to-top-hover", scrollSpeed: 1200, easingType: "linear" }, d = a.extend(c, b), e = "#" + d.containerID, f = "#" + d.containerHoverID; a("body").append('<a href="#" id="' + d.containerID + '">' + d.text + "</a>"), a(e).hide().click(function () { return a("html, body").animate({ scrollTop: 0 }, d.scrollSpeed, d.easingType), a("#" + d.containerHoverID, this).stop().animate({ opacity: 0 }, d.inDelay, d.easingType), !1 }).prepend('<span id="' + d.containerHoverID + '"><i class="fa fa-angle-up"></i></span>').hover(function () { a(f, this).stop().animate({ opacity: 1 }, 600, "linear") }, function () { a(f, this).stop().animate({ opacity: 0 }, 700, "linear") }), a(window).scroll(function () { var b = a(window).scrollTop(); "undefined" == typeof document.body.style.maxHeight && a(e).css({ position: "absolute", top: a(window).scrollTop() + a(window).height() - 50 }), b > d.min ? a(e).fadeIn(d.inDelay) : a(e).fadeOut(d.Outdelay) }) } }(jQuery), Saatchi.Uniform = function (a) { a.uniform = { options: { selectClass: "selector", radioClass: "radio", checkboxClass: "checker", fileClass: "uploader", filenameClass: "filename", fileBtnClass: "action", fileDefaultText: "No file selected", fileBtnText: "Choose File", checkedClass: "checked", focusClass: "focus", disabledClass: "disabled", buttonClass: "button", activeClass: "active", hoverClass: "hover", useID: !0, idPrefix: "uniform", resetSelector: !1, autoHide: !0 }, elements: [] }, a.support.selectOpacity = !0, a.uniform.restore = function (b) { var c = b || a(a.uniform.elements); return c.each(function () { var b = a(this); b.is(":button, :submit, :reset") && b.parent().html(b), b.is(":checkbox, :radio, :button, :submit, :reset, a") && b.unwrap().unwrap(), b.is("select, :file") && b.unwrap().siblings("span").remove(), b.removeClass(b.attr("type") + " uniform"), b.unbind(".uniform").css("opacity", "1"); var d = a.inArray(c, a.uniform.elements); a.uniform.elements.splice(d, 1) }), this }, a.uniform.noSelect = function (b) { function c() { return !1 } return b.each(function () { this.onselectstart = this.ondragstart = c, a(this).mousedown(c).css({ MozUserSelect: "none" }) }), this }, a.uniform.update = function (b) { var c = b || a(a.uniform.elements); this.restore(c), c.uniform() }, a.fn.uniform = function (b) { if ("string" == typeof b) return b in a.uniform ? a.uniform[b](this) : !1; b = a.extend(a.uniform.options, b); var c = this; b.resetSelector && a(b.resetSelector).mouseup(function () { function b() { a.uniform.update(c) } setTimeout(b, 10) }); var d = function (a) { k(a.addClass(a.attr("type"))) }, e = function (a) { k(a.addClass("uniform")) }, f = function (c) { var d = a("<div>"), e = a("<span>"); d.addClass(b.buttonClass), b.useID && c.attr("id") && d.attr("id", b.idPrefix + "-" + c.attr("id")); var f = c.val() || c.text() || c.is(":reset") && "Reset" || c.is(":submit") && "Submit" || ""; e.html(f), c.css("opacity", 0).wrap(d).wrap(e), d = c.closest("div"), e = c.closest("span"), c.is(":disabled") && d.addClass(b.disabledClass), d.bind({ "mouseenter.uniform": function () { d.addClass(b.hoverClass) }, "mouseleave.uniform": function () { d.removeClass(b.hoverClass + " " + b.activeClass) }, "mousedown.uniform touchbegin.uniform": function () { d.addClass(b.activeClass) }, "mouseup.uniform touchend.uniform": function () { d.removeClass(b.activeClass) }, "click.uniform touchend.uniform": function (b) { a(b.target).is("span, div") && c.trigger("click") } }), c.bind({ "focus.uniform": function () { d.addClass(b.focusClass) }, "blur.uniform": function () { d.removeClass(b.focusClass) } }), a.uniform.noSelect(d), k(c) }, g = function (c) { var d = a("<div>"), e = a("<span>"); "none" == !c.css("display") && b.autoHide && d.hide(), d.addClass(b.selectClass), b.useID && c.attr("id") && d.attr("id", b.idPrefix + "-" + c.attr("id")), e.html(c.find(":selected").text() || c.find("option:first").text()), c.css("opacity", 0).wrap(d).before(e), d = c.parent(), e = c.siblings("span"), c.bind({ "change.uniform": function () { e.text(c.find(":selected").text()), d.removeClass(b.activeClass) }, "focus.uniform": function () { d.addClass(b.focusClass) }, "blur.uniform": function () { d.removeClass(b.focusClass + " " + b.activeClass) }, "mousedown.uniform touchbegin.uniform": function () { d.addClass(b.activeClass) }, "mouseup.uniform touchend.uniform": function () { d.removeClass(b.activeClass) }, "click.uniform touchend.uniform": function () { d.removeClass(b.activeClass) }, "mouseenter.uniform": function () { d.addClass(b.hoverClass) }, "mouseleave.uniform": function () { d.removeClass(b.hoverClass + " " + b.activeClass) }, "keyup.uniform": function () { e.text(c.find(":selected").text()) } }), c.attr("disabled") && d.addClass(b.disabledClass), a.uniform.noSelect(e), k(c) }, h = function (c) { var d = a("<div>"), e = a("<span>"); "none" == !c.css("display") && b.autoHide && d.hide(), d.addClass(b.checkboxClass), b.useID && c.attr("id") && d.attr("id", b.idPrefix + "-" + c.attr("id")), c.wrap(d).wrap(e), e = c.parent(), d = e.parent(), c.css("opacity", 0).bind({ "focus.uniform": function () { d.addClass(b.focusClass) }, "blur.uniform": function () { d.removeClass(b.focusClass) }, "click.uniform touchend.uniform": function () { var a = c.attr("checked") ? "add" : "remove"; e[a + "Class"](b.checkedClass) }, "mousedown.uniform touchbegin.uniform": function () { d.addClass(b.activeClass) }, "mouseup.uniform touchend.uniform": function () { d.removeClass(b.activeClass) }, "mouseenter.uniform": function () { d.addClass(b.hoverClass) }, "mouseleave.uniform": function () { d.removeClass(b.hoverClass + " " + b.activeClass) } }), c.attr("checked") && e.addClass(b.checkedClass), c.attr("disabled") && d.addClass(b.disabledClass), k(c) }, i = function (c) { var d = a("<div>"), e = a("<span>"); "none" == !c.css("display") && b.autoHide && d.hide(), d.addClass(b.radioClass), b.useID && c.attr("id") && d.attr("id", b.idPrefix + "-" + c.attr("id")), c.wrap(d).wrap(e), e = c.parent(), d = e.parent(), c.css("opacity", 0).bind({ "focus.uniform": function () { d.addClass(b.focusClass) }, "blur.uniform": function () { d.removeClass(b.focusClass) }, "click.uniform touchend.uniform": function () { c.attr("checked") ? (a("." + b.radioClass.replace(" ", ".") + " span." + b.checkedClass + ":has([name=" + c.attr("name") + "])").removeClass(b.checkedClass), e.addClass(b.checkedClass)) : e.removeClass(b.checkedClass) }, "mousedown.uniform touchend.uniform": function () { c.is(":disabled") || d.addClass(b.activeClass) }, "mouseup.uniform touchbegin.uniform": function () { d.removeClass(b.activeClass) }, "mouseenter.uniform touchend.uniform": function () { d.addClass(b.hoverClass) }, "mouseleave.uniform": function () { d.removeClass(b.hoverClass + " " + b.activeClass) } }), c.attr("checked") && e.addClass(b.checkedClass), c.attr("disabled") && d.addClass(b.disabledClass), k(c) }, j = function (c) { var d = a("<div>"), e = a("<span>", { text: b.fileDefaultText }), f = a("<span>", { text: b.fileBtnText }); if ("none" == !c.css("display") && b.autoHide && d.hide(), d.addClass(b.fileClass), e.addClass(b.filenameClass), f.addClass(b.fileBtnClass), b.useID && c.attr("id") && d.attr("id", b.idPrefix + "-" + c.attr("id")), c.wrap(d).after(f).after(e), d = c.parent(), e = c.siblings("." + b.filenameClass), f = c.siblings("." + b.fileBtnClass), !c.attr("size")) { var g = d.width(); c.attr("size", g / 10) } var h = function () { var a = c.val().split(/[\/\\]+/); a = a && a[a.length - 1] || b.fileDefaultText, e.text(a) }; h(), c.css("opacity", 0).bind({ "focus.uniform": function () { d.addClass(b.focusClass) }, "blur.uniform": function () { d.removeClass(b.focusClass) }, "mousedown.uniform": function () { c.is(":disabled") || d.addClass(b.activeClass) }, "mouseup.uniform": function () { d.removeClass(b.activeClass) }, "mouseenter.uniform": function () { d.addClass(b.hoverClass) }, "mouseleave.uniform": function () { d.removeClass(b.hoverClass + " " + b.activeClass) } }), a.browser.msie ? c.bind("click.uniform.ie7", function () { setTimeout(h, 0) }) : c.bind("change.uniform", h), c.attr("disabled") && d.addClass(b.disabledClass), a.uniform.noSelect(e), a.uniform.noSelect(f), k(c) }, k = function (b) { a.each(b, function (b, c) { a.uniform.elements.push(c) }) }; return this.each(function () { if (a.support.selectOpacity) { var b = a(this); b.is("select") && !b.attr("multiple") && !b.attr("size") || b.attr("size") <= 1 ? g(b) : b.is(":checkbox") ? h(b) : b.is(":radio") ? i(b) : b.is(":file") ? j(b) : b.is(":text, :password, input[type=email]") ? d(b) : b.is("textarea") ? e(b) : (b.is("a") || b.is(":submit") || b.is(":reset") || b.is("button") || b.is("input[type=button]")) && f(b) } }) } }(jQuery);